{"version":3,"sources":["schemas.js","types.js","actions/postActions.js","actions/userActions.js","images/image-placeholder.svg","images/link-post.svg","images/reddit-default.svg","webpack:///./src/images/down-arrow.svg?0968","webpack:///./src/images/up-arrow.svg?3f43","components/Post.jsx","components/Login.jsx","components/Signup.jsx","components/Home.jsx","images/magnifying-glass.svg","images/hamburger.svg","images/Triangle.svg","components/Navbar.jsx","components/NewPost.jsx","actions/commentActions.js","images/down-arrow.svg","images/edit.svg","images/up-arrow.svg","components/Comment.jsx","components/PostModal.jsx","App.js","reducers/reducer.js","index.js","store/store.js","localStorage.js"],"names":["comment","schema","Entity","idAttribute","define","comments","post","REQUEST_POSTS","RECEIVE_POSTS","RECEIVE_SINGLE_POSTS","LOGIN_REQUEST","LOGIN_SUCCESS","LOGIN_ERROR","SIGNUP_REQUEST","SIGNUP_SUCCESS","SIGNUP_ERROR","CURRENT_USER","POST_CREATION_CHANGE_SUBMISSION_TYPE","NEW_POST_SUCCESS","NEW_POST_REQUEST","NEW_COMMENT_SUCCESS","NEW_REPLY_REQUEST","NEW_REPLY_SUCCESS","VOTE_CAST","NEXT_PAGE","PREV_PAGE","DELETE_POST","EDIT_POST","LOG_OUT","CLEAR_ERROR","SET_POST_MODAL","SPLICED_POST","REFRESH_USER","UNAUTHORIZED_ERROR","SORT_POSTS","CLEAR_LOGIN_MODAL","REQUEST_USER_INFO","requestPosts","e","type","changePostSubmissionType","postType","dispatch","getState","currentValue","changeNewSubmissionType","submissionType","changePoint","point","postId","currentPostId","currentVoteState","posts","byId","voteState","axios","url","method","withCredentials","submitPost","form","data","then","res","status","id","_id","submitPostSuccess","getNormalizeData","myData","params","normalize","fetchPosts","query","sort","normalizedData","offset","nextPage","Promise","resolve","retryCount","logOut","localStorage","removeItem","login","username","password","loginSuccess","jwt_token","token","setItem","catch","signup","passwordConfirm","err","passwordError","error","response","interceptors","request","use","config","accessToken","getItem","headers","originalRequest","_retry","defaults","common","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","_ref2","transform","d","SvgDownArrow","_ref","svgRef","title","titleId","props","width","height","viewBox","ref","undefined","ForwardRef","SvgUpArrow","Post","useState","deleteButton","setDelete","setActive","useParams","useDispatch","postStore","useSelector","state","allIds","currentUser","postStatus","listings","confirmedDelete","deletePost","className","author","onClick","to","pathname","modal","alt","voteTotal","Login","setUsername","setPassword","isLoggedIn","handleLogin","x","window","location","reload","close","onChange","value","placeholder","onKeyDown","Signup","setPasswordConfirm","user","useEffect","Home","postsToDisplay","allPosts","loggedIn","listingOrder","sortOrder","currentIds","queryParams","history","search","offSetId","after","URLSearchParams","get","before","map","bottomRef","useCallback","node","shouldFetch","observer","IntersectionObserver","entries","intersectionRatio","disconnect","observe","threshold","listing","handlePostType","handleShowLogin","showSignup","src","defaultPic","imagePost","linkPost","pastParams","match","withRouter","dropdown","setDropDown","searchInput","setSearchInput","searchContent","setSearchContent","searchActive","setSearchActive","currentModal","flattened","handleSearchContent","a","trimStart","trimmed","filter","RegExp","test","filtered","handleCloseSearch","closeSearch","document","body","addEventListener","removeEventListener","replace","style","overflow","newPost","path","searchicon","backgroundColor","triangle","handleShowSignup","htmlFor","NewPost","useLocation","newQuery","newQuery2","useHistory","setTitle","text","setText","imagedata","setImage","submitCheck","submitted","reRouteId","push","replaceState","action","files","name","cols","rows","preventDefault","FormData","append","uploadForm","newComment","content","savedComment","parentId","newCommentSuccess","changeCommentPoint","commentId","currentCommentId","_ref3","_ref4","_ref5","_ref6","_ref7","_ref8","_ref9","_ref10","_ref11","_ref12","_ref13","_ref14","_ref15","_ref16","_ref17","_ref18","SvgEdit","Comment","allComments","replyText","setReplyText","replyToggle","setReplyToggle","nestedComments","marginLeft","marginTop","upvote","downvote","authorName","reply","newReply","connect","ownProps","commentText","setCommentText","edit","setEdit","editText","setEditText","currentPost","handleReroute","saveEdit","date","Date","createdAt","formatDate","Intl","DateTimeFormat","format","stopPropagation","image","showLogin","setLogin","setShowSignup","loggedInStatus","signedUpStatus","isSignedUp","closeModal","handleShowNextPage","lastId","exact","render","props2","combineArrays","arr1","arr2","combined","concat","set","Set","addComment","changePostPoint","handlePostSubmission","submitting","createdPosts","editPostReduce","handlePreviousPage","incomingIds","result","isFetching","entities","handleNextPage","setListings","prev","receievePosts","setPostModal","addCommentEntry","rootReducer","combineReducers","allId","firstId","newObj","splicedArray","filteredPosts","isLoggingIn","isSigningUp","userInfo","store","preloadedState","persistedState","serializedState","JSON","parse","loadState","composeEnhancers","composeWithDevTools","trace","createStore","applyMiddleware","thunkMiddleware","configureStore","createBrowserHistory","ReactDOM","StrictMode","component","App","getElementById"],"mappings":"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","file":"static/js/main.c1041920.chunk.js","sourcesContent":["import { schema } from \"normalizr\";\r\nexport const comment = new schema.Entity(\r\n  \"comments\",\r\n  {},\r\n  { idAttribute: \"_id\" }\r\n);\r\ncomment.define({\r\n  comments: [comment],\r\n});\r\nexport const post = new schema.Entity(\r\n  \"posts\",\r\n  {\r\n    comments: [comment],\r\n  },\r\n  { idAttribute: \"_id\" }\r\n);\r\n","export const REQUEST_POSTS = \"REQUEST_POSTS\";\r\nexport const RECEIVE_POSTS = \"RECEIVE_POSTS\";\r\nexport const REQUEST_SINGLE_POST = \"REQUEST_SINGLE_POST\";\r\nexport const RECEIVE_SINGLE_POSTS = \"RECEIVE_SINGLE_POSTS\";\r\nexport const LOGIN_REQUEST = \"LOGIN_REQUEST\";\r\nexport const LOGIN_SUCCESS = \"LOGIN_SUCCESS\";\r\nexport const LOGIN_ERROR = \"LOGIN_ERROR\";\r\nexport const SIGNUP_REQUEST = \"SIGNUP_REQUEST\";\r\nexport const SIGNUP_SUCCESS = \"SIGNUP_SUCCESS\";\r\nexport const SIGNUP_ERROR = \"SIGNUP_ERROR\";\r\nexport const CURRENT_USER = \"CURRENT_USER\";\r\nexport const POST_CREATION_CHANGE_SUBMISSION_TYPE =\r\n  \"POST_CREATION_CHANGE_SUBMISSION_TYPE\";\r\nexport const NEW_POST_SUCCESS = \"NEW_POST_SUCCESS\";\r\nexport const NEW_POST_REQUEST = \"NEW_POST_REQUEST\";\r\nexport const RESET_POST = \"RESET_POST\";\r\nexport const NEW_COMMENT_REQUEST = \"NEW_COMMENT_REQUEST\";\r\nexport const NEW_COMMENT_SUCCESS = \"NEW_COMMENT_SUCCESS\";\r\nexport const CHANGE_TO_MEDIA = \"CHANGE_TO_MEDIA\";\r\nexport const NEW_REPLY_REQUEST = \"NEW_REPLY_REQUEST\";\r\nexport const NEW_REPLY_SUCCESS = \"NEW_REPLY_SUCCESS\";\r\nexport const VOTE_CAST = \"VOTE_CAST\";\r\nexport const NEXT_PAGE = \"NEXT_PAGE\";\r\nexport const PREV_PAGE = \"PREV_PAGE\";\r\nexport const DELETE_POST = \"DELETE_POST\";\r\nexport const EDIT_POST = \"EDIT_POST\";\r\nexport const LOG_OUT = \"LOG_OUT\";\r\nexport const CLEAR_ERROR = \"CLEAR_ERROR\";\r\nexport const LOGIN_FAILURE = \"LOGIN_FAILURE\";\r\nexport const SET_POST_MODAL = \"SET_POST_MODAL\";\r\nexport const SPLICED_POST = \"SPLICED_POST\";\r\nexport const REFRESH_USER = \"REFRESH_USER\";\r\nexport const SET_POST = \"SET_POST\";\r\nexport const UNAUTHORIZED_ERROR = \"UNAUTHORIZED_ERROR\";\r\nexport const SORT_POSTS = \"SORT_POSTS\";\r\nexport const SORT_POSTS_REQUEST = \"SORT_POSTS_REQUEST\";\r\nexport const GET_SINGLE_POST = \"GET_SINGLE_POST\";\r\nexport const CLEAR_LOGIN_MODAL = \"CLEAR_LOGIN_MODAL\";\r\nexport const REQUEST_USER_INFO = \"REQUEST_USER_INFO\";\r\n","import axios from \"axios\";\r\nimport { normalize } from \"normalizr\";\r\nimport { post } from \"../schemas\";\r\nimport {\r\n  DELETE_POST,\r\n  EDIT_POST,\r\n  NEW_POST_REQUEST,\r\n  NEW_POST_SUCCESS,\r\n  NEXT_PAGE,\r\n  POST_CREATION_CHANGE_SUBMISSION_TYPE,\r\n  PREV_PAGE,\r\n  RECEIVE_POSTS,\r\n  RECEIVE_SINGLE_POSTS,\r\n  REQUEST_POSTS,\r\n  REQUEST_SINGLE_POST,\r\n  RESET_POST,\r\n  SET_POST,\r\n  SET_POST_MODAL,\r\n  SORT_POSTS,\r\n  VOTE_CAST,\r\n} from \"../types\";\r\nfunction requestPosts(e) {\r\n  return {\r\n    type: REQUEST_POSTS,\r\n    e,\r\n  };\r\n}\r\n\r\nfunction submitPostSuccess(post) {\r\n  let id = post._id;\r\n  post[\"newPost\"] = true;\r\n  return (dispatch) => {\r\n    dispatch({ type: NEW_POST_SUCCESS, post, id });\r\n  };\r\n}\r\nexport function newPostSubmissionType(postType) {\r\n  return (dispatch) => {\r\n    dispatch({ type: POST_CREATION_CHANGE_SUBMISSION_TYPE, postType });\r\n  };\r\n}\r\nexport function changePostSubmissionType(postType) {\r\n  return (dispatch, getState) => {\r\n    let currentValue = getState().changeNewSubmissionType.submissionType;\r\n    if (postType === currentValue) {\r\n      return;\r\n    } else {\r\n      dispatch({\r\n        type: POST_CREATION_CHANGE_SUBMISSION_TYPE,\r\n        postType,\r\n      });\r\n    }\r\n  };\r\n}\r\nexport function changePoint(point, postId) {\r\n  return (dispatch, getState) => {\r\n    let currentPostId = postId;\r\n    let currentPost = getState().posts.byId[currentPostId];\r\n    let currentVoteState = currentPost.voteState;\r\n    dispatch({\r\n      type: VOTE_CAST,\r\n      postId,\r\n      point,\r\n      currentVoteState,\r\n    });\r\n    if (point === 1) {\r\n      return axios({\r\n        url: `/api/posts/vote-up/${currentPostId}`,\r\n        method: \"PUT\",\r\n        withCredentials: true,\r\n      });\r\n    }\r\n    if (point === -1) {\r\n      return axios({\r\n        url: `/api/posts/vote-down/${currentPostId}`,\r\n        method: \"PUT\",\r\n        withCredentials: true,\r\n      });\r\n    }\r\n  };\r\n}\r\nexport function setPostModal(post) {\r\n  return {\r\n    type: SET_POST_MODAL,\r\n    post,\r\n  };\r\n}\r\nexport function submitPostAttempt() {\r\n  return {\r\n    type: NEW_POST_REQUEST,\r\n  };\r\n}\r\nexport function submitPost(form) {\r\n  return (dispatch) => {\r\n    return axios({\r\n      url: `/api/post/new/`,\r\n      method: \"POST\",\r\n      data: form,\r\n      withCredentials: true,\r\n    }).then((res) => {\r\n      if (res.status === 200) {\r\n        dispatch(submitPostSuccess(res.data));\r\n      }\r\n    });\r\n  };\r\n}\r\nfunction requestSinglePost() {\r\n  return {\r\n    type: REQUEST_SINGLE_POST,\r\n  };\r\n}\r\nexport function reset() {\r\n  return {\r\n    type: RESET_POST,\r\n  };\r\n}\r\nfunction getNormalizeData(myData, params) {\r\n  const normalizedData = normalize(myData.posts, [post]);\r\n  return normalizedData;\r\n}\r\nexport function sortPosts() {}\r\nexport function deletePost(postId, params) {\r\n  return (dispatch) => {\r\n    dispatch({\r\n      type: DELETE_POST,\r\n      postId,\r\n      params: params ? params : \"default\",\r\n    });\r\n    return axios({\r\n      url: `/api/delete/${postId}`,\r\n      method: \"DELETE\",\r\n      withCredentials: true,\r\n    });\r\n  };\r\n}\r\nexport function editPost(postId, content) {\r\n  return (dispatch) => {\r\n    dispatch({ type: EDIT_POST, postId, content });\r\n    return axios({\r\n      url: `/api/edit/${postId}`,\r\n      method: \"PUT\",\r\n      withCredentials: true,\r\n      data: {\r\n        content: content,\r\n      },\r\n    });\r\n  };\r\n}\r\nexport function fetchPosts(query, id, params, e) {\r\n  return (dispatch) => {\r\n    dispatch(requestPosts(e));\r\n    axios({\r\n      url: `/api/posts/${params && params.sort ? params.sort : \"\"}${\r\n        query ? `?${query}=${id}` : \"\"\r\n      }`,\r\n      method: \"GET\",\r\n      withCredentials: true,\r\n    }).then((res) => {\r\n      const normalizedData = getNormalizeData(\r\n        { posts: res.data.posts },\r\n        params\r\n      );\r\n      dispatch({\r\n        type:\r\n          params && params.sort && e === \"click\" ? SORT_POSTS : RECEIVE_POSTS,\r\n        normalizedData,\r\n        offset: res.data.offset,\r\n        sort: params && params.sort ? params.sort : \"default\",\r\n      });\r\n    });\r\n  };\r\n}\r\nexport function prevPage(id, params) {\r\n  return (dispatch) => {\r\n    dispatch(requestPosts());\r\n    return new Promise((resolve) => {\r\n      axios({\r\n        url: `/api/posts/${\r\n          params.length > 0 ? params : \"\"\r\n        }?page[size]=${10}&before=${id}`,\r\n        method: \"GET\",\r\n        withCredentials: true,\r\n      }).then((res) => {\r\n        if (res.status === 200) {\r\n          const normalizedData = getNormalizeData(\r\n            { posts: res.data.posts },\r\n            params\r\n          );\r\n          dispatch({\r\n            type: PREV_PAGE,\r\n            normalizedData,\r\n            offset: res.data.offset,\r\n            sort: params.sort ? params.sort : \"default\",\r\n          });\r\n          resolve(\"completed\");\r\n        }\r\n      });\r\n    });\r\n  };\r\n}\r\nexport function nextPage(id, params) {\r\n  return (dispatch) => {\r\n    dispatch(requestPosts());\r\n    return new Promise((resolve) => {\r\n      axios({\r\n        url: `/api/posts/${\r\n          params && params.sort ? params.sort : \"\"\r\n        }?page[size]=${10}&after=${id}`,\r\n        method: \"GET\",\r\n        withCredentials: true,\r\n      }).then((res) => {\r\n        if (res.status === 200) {\r\n          const normalizedData = getNormalizeData(\r\n            { posts: res.data.posts },\r\n            params\r\n          );\r\n          dispatch({\r\n            type: NEXT_PAGE,\r\n            normalizedData,\r\n            offset: res.data.offset,\r\n            sort: params.sort ? params.sort : \"default\",\r\n          });\r\n          resolve(\"completed\");\r\n        }\r\n      });\r\n    });\r\n  };\r\n}\r\nexport function setPostRange(before, after) {\r\n  return { type: SET_POST, before, after };\r\n}\r\nexport function fetchSinglePost(id) {\r\n  return (dispatch) => {\r\n    dispatch(requestSinglePost());\r\n    return axios({\r\n      url: `/api/post/${id}`,\r\n      method: \"GET\",\r\n      withCredentials: true,\r\n    }).then((res) => {\r\n      const normalizedData = getNormalizeData({ posts: [res.data] });\r\n      dispatch({ normalizedData, type: RECEIVE_SINGLE_POSTS });\r\n    });\r\n  };\r\n}\r\n","import axios from \"axios\";\r\nimport {\r\n  CLEAR_LOGIN_MODAL,\r\n  CURRENT_USER,\r\n  LOGIN_REQUEST,\r\n  LOGIN_SUCCESS,\r\n  LOG_OUT,\r\n  REQUEST_USER_INFO,\r\n  SIGNUP_ERROR,\r\n  SIGNUP_REQUEST,\r\n  SIGNUP_SUCCESS,\r\n  UNAUTHORIZED_ERROR,\r\n} from \"../types\";\r\nlet retryCount = 0;\r\naxios.interceptors.request.use((config) => {\r\n  const accessToken = localStorage.getItem(\"accessToken\");\r\n  if (accessToken) {\r\n    config.headers[\"Authorization\"] = `Bearer ${accessToken}`;\r\n  }\r\n  return config;\r\n});\r\naxios.interceptors.response.use(\r\n  function (response) {\r\n    return response;\r\n  },\r\n  function (err) {\r\n    const originalRequest = err.config;\r\n    if (\r\n      (err.response.status === 401 || err.response.status === 403) &&\r\n      !originalRequest._retry &&\r\n      retryCount <= 2 &&\r\n      err.config.url !== \"/api/refresh\"\r\n    ) {\r\n      retryCount = retryCount + 1;\r\n      originalRequest._retry = true;\r\n      axios({\r\n        url: \"/api/refresh\",\r\n        method: \"POST\",\r\n        withCredentials: true,\r\n      }).then((data) => {\r\n        if (data.data) {\r\n          localStorage.setItem(\"accessToken\", data.data.jwt_token);\r\n          axios.defaults.headers.common[\"Authorization\"] =\r\n            \"Bearer \" + data.jwt_token;\r\n          originalRequest.headers[\"Authorization\"] =\r\n            \"Bearer \" + data.data.jwt_token;\r\n          return axios(originalRequest);\r\n        }\r\n      });\r\n    } else {\r\n      return err.config;\r\n    }\r\n  }\r\n);\r\nfunction loginRequest() {\r\n  return {\r\n    type: LOGIN_REQUEST,\r\n  };\r\n}\r\nfunction loginSuccess(username, id) {\r\n  return (dispatch) => {\r\n    dispatch({\r\n      type: LOGIN_SUCCESS,\r\n      username,\r\n      id,\r\n    });\r\n    Promise.resolve(\"success\");\r\n  };\r\n}\r\nexport function logOut() {\r\n  return (dispatch) => {\r\n    return axios({\r\n      url: \"/api/logout\",\r\n      withCredentials: true,\r\n      method: \"POST\",\r\n    }).then((res) => {\r\n      if (res.status === 200) {\r\n        localStorage.removeItem(\"accessToken\");\r\n        return res;\r\n      }\r\n    });\r\n  };\r\n}\r\nfunction unauthorized() {\r\n  return {\r\n    type: UNAUTHORIZED_ERROR,\r\n  };\r\n}\r\nexport function login(username, password) {\r\n  return (dispatch) => {\r\n    dispatch(loginRequest());\r\n    return axios({\r\n      withCredentials: true,\r\n      method: \"POST\",\r\n      data: {\r\n        username: username,\r\n        password: password,\r\n      },\r\n      url: \"/api/login\",\r\n    })\r\n      .then((res) => {\r\n        if (res.status === 200) {\r\n          dispatch(loginSuccess(res.data.username, res.data._id));\r\n          let token = res.data.jwt_token;\r\n          return token;\r\n        }\r\n      })\r\n      .then((token) => {\r\n        localStorage.setItem(\"accessToken\", token);\r\n        return \"login\";\r\n      })\r\n      .catch(() => {\r\n        dispatch(unauthorized());\r\n      });\r\n  };\r\n}\r\nexport function clearLoginModal() {\r\n  return {\r\n    type: CLEAR_LOGIN_MODAL,\r\n  };\r\n}\r\nexport function loggedIn() {\r\n  const token = localStorage.getItem(\"accessToken\");\r\n  return async (dispatch) => {\r\n    if (!token) {\r\n      return;\r\n    }\r\n    dispatch({ type: REQUEST_USER_INFO });\r\n    const data = await axios({\r\n      withCredentials: true,\r\n      method: \"GET\",\r\n      url: \"/api/logged-in\",\r\n    });\r\n    try {\r\n      dispatch({\r\n        type: CURRENT_USER,\r\n        username: data.data.username,\r\n        user: data.data._id,\r\n      });\r\n    } catch (error) {\r\n      dispatch(logOut());\r\n    }\r\n  };\r\n}\r\nexport function signupRequest() {\r\n  return {\r\n    type: SIGNUP_REQUEST,\r\n  };\r\n}\r\nfunction signupSuccess() {\r\n  return {\r\n    type: SIGNUP_SUCCESS,\r\n  };\r\n}\r\nexport function signup(username, password, passwordConfirm) {\r\n  return (dispatch) => {\r\n    dispatch({ type: SIGNUP_REQUEST });\r\n    return axios({\r\n      url: \"/api/signup\",\r\n      data: {\r\n        username,\r\n        password,\r\n        passwordConfirm,\r\n      },\r\n      method: \"POST\",\r\n    })\r\n      .then((res) => {\r\n        if (res.status === 200) {\r\n          dispatch(signupSuccess());\r\n          return \"signup\";\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        let error = err.response.data;\r\n        let passwordError;\r\n        if (password !== passwordConfirm) {\r\n          passwordError = \"Passwords do not match\";\r\n        }\r\n        dispatch({ type: SIGNUP_ERROR, error, passwordError });\r\n      });\r\n  };\r\n}\r\n","export default __webpack_public_path__ + \"static/media/image-placeholder.1c6a32aa.svg\";","export default __webpack_public_path__ + \"static/media/link-post.cdb86b79.svg\";","export default __webpack_public_path__ + \"static/media/reddit-default.f7d549ef.svg\";","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"g\", {\n  id: \"Page-1\"\n}, /*#__PURE__*/React.createElement(\"g\", {\n  id: \"Desktop-(Card)\",\n  transform: \"translate(-516.000000, -289.000000)\"\n}, /*#__PURE__*/React.createElement(\"g\", {\n  id: \"Group-6\",\n  transform: \"translate(428.000000, 154.000000)\"\n}, /*#__PURE__*/React.createElement(\"g\", {\n  id: \"Group\",\n  transform: \"translate(16.000000, 134.000000)\"\n}, /*#__PURE__*/React.createElement(\"g\", {\n  id: \"down-arrow-copy\",\n  transform: \"translate(72.000000, 1.000000)\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M12.2275497,7.76096702 C12.1820052,7.65192943 12.0757255,7.58077755 11.957786,7.58077755 L8.75858504,7.58077755 L8.75858504,0.291577829 C8.75858504,0.130631897 8.62778141,0 8.4666239,0 L3.79538263,0 C3.63422512,0 3.50342149,0.130631897 3.50342149,0.291577829 L3.50342149,7.58080489 L0.291958509,7.58080489 C0.174019021,7.58080489 0.0677393658,7.65195676 0.0221948522,7.76042033 C-0.0227748808,7.86945792 0.00174908806,7.99484158 0.0852564863,8.07823934 L5.90969908,13.9142788 C5.96457693,13.9690846 6.03875099,14 6.1164011,14 C6.19405121,14 6.26822527,13.9690846 6.32310313,13.9148528 L12.1644881,8.07881337 C12.2479955,7.99538827 12.2730942,7.87003194 12.2275497,7.76096702 Z\",\n  id: \"Path\"\n}))))));\n\nfunction SvgDownArrow(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: \"13px\",\n    height: \"14px\",\n    viewBox: \"0 0 13 14\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title === undefined ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, \"down-arrow copy\") : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgDownArrow);\nexport default __webpack_public_path__ + \"static/media/down-arrow.c9c98d5d.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"g\", {\n  id: \"Page-1\"\n}, /*#__PURE__*/React.createElement(\"g\", {\n  id: \"Desktop-(Card)\",\n  transform: \"translate(-444.000000, -289.000000)\"\n}, /*#__PURE__*/React.createElement(\"g\", {\n  id: \"Group-6\",\n  transform: \"translate(428.000000, 154.000000)\"\n}, /*#__PURE__*/React.createElement(\"g\", {\n  id: \"Group\",\n  transform: \"translate(16.000000, 134.000000)\"\n}, /*#__PURE__*/React.createElement(\"g\", {\n  id: \"down-arrow\",\n  transform: \"translate(6.500000, 8.000000) scale(1, -1) translate(-6.500000, -8.000000) translate(0.000000, 1.000000)\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M12.2275497,7.76096702 C12.1820052,7.65192943 12.0757255,7.58077755 11.957786,7.58077755 L8.75858504,7.58077755 L8.75858504,0.291577829 C8.75858504,0.130631897 8.62778141,0 8.4666239,0 L3.79538263,0 C3.63422512,0 3.50342149,0.130631897 3.50342149,0.291577829 L3.50342149,7.58080489 L0.291958509,7.58080489 C0.174019021,7.58080489 0.0677393658,7.65195676 0.0221948522,7.76042033 C-0.0227748808,7.86945792 0.00174908806,7.99484158 0.0852564863,8.07823934 L5.90969908,13.9142788 C5.96457693,13.9690846 6.03875099,14 6.1164011,14 C6.19405121,14 6.26822527,13.9690846 6.32310313,13.9148528 L12.1644881,8.07881337 C12.2479955,7.99538827 12.2730942,7.87003194 12.2275497,7.76096702 Z\",\n  id: \"Path\"\n}))))));\n\nfunction SvgUpArrow(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: \"13px\",\n    height: \"14px\",\n    viewBox: \"0 0 13 14\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title === undefined ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, \"down-arrow\") : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgUpArrow);\nexport default __webpack_public_path__ + \"static/media/up-arrow.927fb299.svg\";\nexport { ForwardRef as ReactComponent };","import DeleteIcon from \"@material-ui/icons/Delete\";\r\nimport React, { useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Link, useParams } from \"react-router-dom\";\r\nimport { deletePost, fetchSinglePost } from \"../actions/postActions\";\r\nimport { ReactComponent as DownArrow } from \"../images/down-arrow.svg\";\r\nimport { ReactComponent as UpArrow } from \"../images/up-arrow.svg\";\r\nconst Post = ({ post }) => {\r\n  const [deleteButton, setDelete] = useState(false);\r\n  const [, setActive] = useState(true);\r\n  const params = useParams();\r\n  const dispatch = useDispatch();\r\n  const postStore = useSelector((state) => {\r\n    return state.posts.allIds;\r\n  });\r\n  const currentUser = useSelector((state) => state.currentUser._id);\r\n  const postStatus = useSelector((state) => state.listings.status);\r\n  const handleDelete = () => {\r\n    setDelete(!deleteButton);\r\n  };\r\n  const confirmedDelete = (postId) => {\r\n    dispatch(deletePost(postId, params.sort === \"post\" ? null : params));\r\n    setActive(false);\r\n  };\r\n  if (!postStore[0]) {\r\n    return <div></div>;\r\n  }\r\n  return (\r\n    <>\r\n      <div key={post._id} className=\"card-container\">\r\n        <div\r\n          className={`card-content-container ${\r\n            postStatus === \"loading\" ? \"content-loading-mask\" : \"\"\r\n          }`}\r\n        >\r\n          <p className={\"card-author\"}>u/{post.author.username}</p>\r\n          <h4 className=\"card-title\">\r\n            <Link\r\n              onClick={() => {\r\n                dispatch(fetchSinglePost(post._id));\r\n              }}\r\n              to={{\r\n                pathname: `/post/${post._id}`,\r\n                state: {\r\n                  modal: true,\r\n                },\r\n              }}\r\n            >\r\n              {post.title}\r\n            </Link>\r\n          </h4>\r\n          <div className=\"vote-container\">\r\n            <li>\r\n              <UpArrow\r\n                className={post.voteState === 1 ? `home-vote-color` : ``}\r\n                alt=\"\"\r\n              />\r\n            </li>\r\n            <li>{post.voteTotal}</li>\r\n            <li>\r\n              <DownArrow\r\n                className={post.voteState === -1 ? `home-vote-color` : ``}\r\n                alt=\"\"\r\n              />\r\n            </li>\r\n          </div>\r\n        </div>\r\n        {currentUser === post.author._id ? (\r\n          <div className=\"edit-del-container\">\r\n            <div className=\"edit-del-content\">\r\n              {deleteButton ? (\r\n                <div className=\"delete-confirm-container\">\r\n                  <div>\r\n                    <p className=\"delete-confirm\">Delete?</p>\r\n                  </div>\r\n                  <li\r\n                    onClick={() => confirmedDelete(post._id)}\r\n                    className=\"delete-button-yes\"\r\n                  >\r\n                    Yes\r\n                  </li>\r\n                  <li className=\"delete-button-slash\">/</li>\r\n                  <li className=\"delete-button-yes\">No</li>\r\n                </div>\r\n              ) : null}\r\n              <button onClick={handleDelete} className=\"delete-button\">\r\n                <DeleteIcon className=\"del-svg\" />\r\n              </button>\r\n            </div>\r\n          </div>\r\n        ) : null}\r\n      </div>\r\n    </>\r\n  );\r\n};\r\nexport default Post;\r\n","import React, { useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { login } from \"../actions/userActions\";\r\nconst Login = (props) => {\r\n  const [username, setUsername] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const dispatch = useDispatch();\r\n  const user = useSelector((state) => {\r\n    return state.login.isLoggedIn;\r\n  });\r\n  const error = useSelector((state) => {\r\n    return state.login.err;\r\n  });\r\n  const handleLogin = (e) => {\r\n    if (e.key === \"Enter\" || e.type === \"click\") {\r\n      dispatch(login(username, password)).then((x) => {\r\n        if (x === \"login\") {\r\n          window.location.reload();\r\n        }\r\n      });\r\n    }\r\n  };\r\n  if (user) {\r\n  }\r\n  return (\r\n    <div className=\"login-modal-wrapper\">\r\n      <div className=\"login-card-modal\">\r\n        <div className=\"login-modal-title-exit-container\">\r\n          <p className=\"login-modal-title\">Login</p>\r\n          <button onClick={props.close} className=\"login-cancel-button\">\r\n            X\r\n          </button>\r\n        </div>\r\n        <div className=\"login-input-container\">\r\n          <input\r\n            onChange={(e) => {\r\n              setUsername(e.target.value);\r\n            }}\r\n            className=\"login-input\"\r\n            placeholder=\"username\"\r\n            type=\"text\"\r\n          />\r\n          <input\r\n            onKeyDown={handleLogin}\r\n            onChange={(e) => {\r\n              setPassword(e.target.value);\r\n            }}\r\n            className=\"login-input\"\r\n            placeholder=\"password\"\r\n            type=\"password\"\r\n          />{\" \"}\r\n          <p className={`signup-error`}>{error}</p>\r\n          <button onClick={handleLogin} className=\"login-button\">\r\n            Log in\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\nexport default Login;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport { signup, signupRequest } from \"../actions/userActions\";\r\nimport { CLEAR_ERROR } from \"../types\";\r\nimport Login from \"./Login\";\r\nconst Signup = (props) => {\r\n  const [username, setUsername] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [passwordConfirm, setPasswordConfirm] = useState(\"\");\r\n  const dispatch = useDispatch();\r\n  const user = useSelector((state) => {\r\n    return state.login.isLoggedIn;\r\n  });\r\n  const error = useSelector((state) => {\r\n    return state.signup.err;\r\n  });\r\n  const passwordError = useSelector((state) => {\r\n    return state.signup.passwordError;\r\n  });\r\n  const handleSignup = () => {\r\n    dispatch(signup(username, password, passwordConfirm)).then((res) => {\r\n      if (res === \"signup\") {\r\n        <Redirect to={Login}></Redirect>;\r\n      }\r\n    });\r\n  };\r\n  const handleError = () => {\r\n    dispatch({ type: CLEAR_ERROR });\r\n  };\r\n  if (user) {\r\n    window.location.reload();\r\n  }\r\n  useEffect(() => {\r\n    dispatch(signupRequest());\r\n  }, [dispatch]);\r\n  return (\r\n    <div className=\"login-modal-wrapper\">\r\n      <div className=\"login-card-modal\">\r\n        <div className=\"login-modal-title-exit-container\">\r\n          <p className=\"login-modal-title\">Sign up</p>\r\n          <button onClick={props.close} className=\"login-cancel-button\">\r\n            X\r\n          </button>\r\n        </div>\r\n        <div className=\"login-input-container\">\r\n          <input\r\n            onChange={(e) => {\r\n              setUsername(e.target.value);\r\n            }}\r\n            onClick={handleError}\r\n            className=\"login-input\"\r\n            placeholder=\"username\"\r\n            type=\"text\"\r\n          />\r\n          <p className={`signup-error`}>{error}</p>\r\n          <input\r\n            onChange={(e) => {\r\n              setPassword(e.target.value);\r\n            }}\r\n            className=\"login-input\"\r\n            placeholder=\"password\"\r\n            type=\"password\"\r\n          />\r\n          <p className={`signup-error`}>{passwordError}</p>\r\n          <input\r\n            onChange={(e) => {\r\n              setPasswordConfirm(e.target.value);\r\n            }}\r\n            className=\"login-input\"\r\n            placeholder=\"Confirm your password\"\r\n            type=\"password\"\r\n          />\r\n          <button onClick={handleSignup} className=\"login-button\">\r\n            Sign up\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\nexport default Signup;\r\n","import React, { useCallback, useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Link, useParams } from \"react-router-dom\";\r\nimport {\r\n  fetchPosts,\r\n  newPostSubmissionType,\r\n  nextPage,\r\n  submitPostAttempt,\r\n} from \"../actions/postActions\";\r\nimport imagePost from \"../images/image-placeholder.svg\";\r\nimport linkPost from \"../images/link-post.svg\";\r\nimport defaultPic from \"../images/reddit-default.svg\";\r\nimport Post from \"./Post\";\r\nimport Signup from \"./Signup\";\r\nfunction Home(props) {\r\n  const dispatch = useDispatch();\r\n  const allPosts = useSelector((state) => {\r\n    return state.posts.byId;\r\n  });\r\n  const loggedIn = useSelector((state) => state.login.isLoggedIn);\r\n  const postStatus = useSelector((state) => state.posts.status);\r\n  const params = useParams();\r\n  const listingOrder = useSelector((state) => state.listings.listingOrder);\r\n  const sortOrder = useSelector((state) => state.listings.sortOrder);\r\n  const currentIds = listingOrder[sortOrder];\r\n  let queryParams = props.history.location.search;\r\n  const offSetId = useSelector((state) => {\r\n    return state.posts.offset;\r\n  });\r\n  let after = new URLSearchParams(queryParams).get(\"after\");\r\n  let before = new URLSearchParams(queryParams).get(\"before\");\r\n  let query = (after && \"after\") || (before && \"before\");\r\n  let id = after || before;\r\n  let postsToDisplay;\r\n  if (currentIds) {\r\n    postsToDisplay = currentIds.map((id) => {\r\n      return allPosts[id];\r\n    });\r\n  }\r\n  const bottomRef = useCallback(\r\n    (node) => {\r\n      const options = {\r\n        threshold: [0],\r\n      };\r\n      let shouldFetch = true;\r\n      var observer = new IntersectionObserver(function (entries, observer) {\r\n        if (entries[0].intersectionRatio > 0 && shouldFetch && offSetId) {\r\n          observer.disconnect();\r\n          dispatch(nextPage(offSetId, params)).then((status) => {\r\n            shouldFetch = false;\r\n            if (status === \"completed\") {\r\n              observer.observe(node);\r\n            }\r\n          });\r\n        }\r\n      }, options);\r\n      if (node) {\r\n        observer.observe(node);\r\n      } else {\r\n        observer.disconnect();\r\n      }\r\n    },\r\n    [offSetId]\r\n  );\r\n  useEffect(() => {\r\n    dispatch(fetchPosts(query, id, params.sort === \"post\" ? null : params));\r\n  }, []);\r\n  let listing = listingOrder[sortOrder];\r\n  const handlePostType = (type) => {\r\n    if (!loggedIn) {\r\n      props.handleShowLogin();\r\n    }\r\n    dispatch(newPostSubmissionType(type));\r\n    dispatch(submitPostAttempt());\r\n  };\r\n  if (!listing) {\r\n    return <div></div>;\r\n  }\r\n  return (\r\n    <>\r\n      <div className=\"home-wrapper\">\r\n        {props.showSignup ? <Signup /> : null}\r\n        <div className=\"new-post-container\">\r\n          <Link to=\"\">\r\n            <img className=\"new-post-profile-image\" src={defaultPic} alt=\"\" />\r\n          </Link>\r\n          <Link\r\n            onClick={() => handlePostType(\"post\")}\r\n            to={loggedIn ? \"/new-post\" : \"\"}\r\n            className=\"new-post-input-container\"\r\n          >\r\n            <input\r\n              placeholder=\"Create Post\"\r\n              className=\"new-post-input\"\r\n              type=\"text\"\r\n            />\r\n          </Link>\r\n          <Link\r\n            onClick={() => handlePostType(\"media\")}\r\n            to={loggedIn ? \"/new-post?media=true\" : \"\"}\r\n          >\r\n            <img className=\"post-option\" src={imagePost} alt=\"\" />\r\n          </Link>\r\n          <Link\r\n            onClick={() => handlePostType(\"link\")}\r\n            to={loggedIn ? \"/new-post?link=true\" : \"\"}\r\n          >\r\n            <img className=\"post-option\" src={linkPost} alt=\"\" />\r\n          </Link>\r\n        </div>\r\n        <div className=\"categories-container\">\r\n          <Link\r\n            to=\"/hot\"\r\n            onClick={() =>\r\n              dispatch(fetchPosts(query, id, { sort: \"hot\" }, \"click\"))\r\n            }\r\n          >\r\n            Hot\r\n          </Link>\r\n          <Link\r\n            to=\"/new\"\r\n            onClick={() =>\r\n              dispatch(fetchPosts(query, id, { sort: \"new\" }, \"click\"))\r\n            }\r\n          >\r\n            New\r\n          </Link>\r\n          <Link\r\n            to=\"/top\"\r\n            onClick={() =>\r\n              dispatch(fetchPosts(query, id, { sort: \"top\" }, \"click\"))\r\n            }\r\n          >\r\n            Top\r\n          </Link>\r\n        </div>\r\n        <div className={\"posts-container\"}>\r\n          {postsToDisplay.map((post) => {\r\n            if (post) {\r\n              return (\r\n                <Post\r\n                  pastParams={props.match}\r\n                  history={props}\r\n                  key={post._id}\r\n                  post={post}\r\n                />\r\n              );\r\n            }\r\n          })}\r\n          <div className=\"page-set-container\"></div>\r\n        </div>\r\n      </div>\r\n      <div className=\"loading-container\">\r\n        <div\r\n          className={postStatus === \"loading\" ? \"lds-dual-ring\" : \"inactive\"}\r\n        ></div>\r\n      </div>\r\n      <span ref={bottomRef}></span>\r\n    </>\r\n  );\r\n}\r\nexport default Home;\r\n","export default __webpack_public_path__ + \"static/media/magnifying-glass.4af3fe67.svg\";","export default __webpack_public_path__ + \"static/media/hamburger.19fb64e1.svg\";","export default __webpack_public_path__ + \"static/media/Triangle.145cb339.svg\";","import React, { useEffect, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Link, withRouter } from \"react-router-dom\";\r\nimport { fetchPosts } from \"../actions/postActions\";\r\nimport { logOut } from \"../actions/userActions\";\r\nimport hamburger from \"../images/hamburger.svg\";\r\nimport searchicon from \"../images/magnifying-glass.svg\";\r\nimport defaultPic from \"../images/reddit-default.svg\";\r\nimport triangle from \"../images/Triangle.svg\";\r\nfunction Navbar(props) {\r\n  const [dropdown, setDropDown] = useState(false);\r\n  const [searchInput, setSearchInput] = useState(\"\");\r\n  const [authDropDown, setAuthDropDown] = useState(false);\r\n  const [searchContent, setSearchContent] = useState([]);\r\n  const [searchActive, setSearchActive] = useState(false);\r\n  const currentUser = useSelector((state) => {\r\n    return state.currentUser;\r\n  });\r\n  const loggedIn = useSelector((state) => {\r\n    return state.login.isLoggedIn;\r\n  });\r\n  const currentModal = useSelector((state) => {\r\n    return state.currentModal;\r\n  });\r\n  const dispatch = useDispatch();\r\n  const allIds = useSelector((state) => {\r\n    return state.posts.allIds;\r\n  });\r\n  const post = useSelector((state) => {\r\n    return state.posts.byId;\r\n  });\r\n  let flattened = allIds.map((x) => {\r\n    return post[x];\r\n  });\r\n  const handleDropDown = () => {\r\n    setDropDown(!dropdown);\r\n  };\r\n  let value;\r\n  const handleSearchContent = async (e) => {\r\n    setSearchInput(e.target.value);\r\n    value = e.target.value;\r\n    let trimmed = await value.trimStart();\r\n    let filtered = await flattened.filter((post) => {\r\n      const regex = new RegExp(`^` + trimmed, \"gi\");\r\n      return regex.test(post.title);\r\n    });\r\n    setSearchContent(filtered);\r\n  };\r\n  const handleCloseSearch = () => {\r\n    setSearchActive(!searchActive);\r\n  };\r\n  const handleLogout = () => {\r\n    dispatch(logOut()).then((data) => {\r\n      if (data.status === 200) {\r\n        window.location.reload();\r\n      }\r\n    });\r\n  };\r\n  let re = /^\\s+(?=[a-z0-9])|^[a-z0-9]/g;\r\n  const closeSearch = () => {\r\n    if (searchActive) {\r\n      setSearchActive(false);\r\n    }\r\n  };\r\n  const handleLogoClick = () => {\r\n    document.body.style.overflow = \"\";\r\n    if (currentModal.post.newPost) {\r\n    }\r\n    if (props.match.path === \"/\") {\r\n      dispatch(fetchPosts());\r\n    }\r\n  };\r\n  useEffect(() => {\r\n    document.title = \"Readit\";\r\n    document.body.addEventListener(\"click\", closeSearch);\r\n    return () => {\r\n      document.body.removeEventListener(\"click\", closeSearch);\r\n    };\r\n  }, [closeSearch]);\r\n  return (\r\n    <>\r\n      <div className=\"navbar-wrapper\">\r\n        <div className=\"navbar-container\">\r\n          <div className=\"navbar-content\">\r\n            <li>\r\n              <Link\r\n                to={{ pathname: \"/\" }}\r\n                replace={props.history.location.pathname === \"/\" ? true : false}\r\n                onClick={handleLogoClick}\r\n                className=\"logo\"\r\n              >\r\n                readit\r\n              </Link>\r\n            </li>\r\n            <div className={\"search-bar-container\"}>\r\n              <input\r\n                onClick={handleCloseSearch}\r\n                onChange={(e) => handleSearchContent(e)}\r\n                className=\"search-bar\"\r\n                placeholder=\"Search\"\r\n                type=\"text\"\r\n              />\r\n              <span className=\"search-icon\">\r\n                <img src={searchicon} alt=\"\" />\r\n              </span>\r\n              <div\r\n                onClick={(e) => handleCloseSearch(e)}\r\n                className=\"search-dropdown-container\"\r\n              >\r\n                {re.test(searchInput)\r\n                  ? searchContent.map((post) => {\r\n                      return (\r\n                        <>\r\n                          {\" \"}\r\n                          <div\r\n                            className={`search-dropdown-content ${\r\n                              !searchActive ? `hide-search` : null\r\n                            } `}\r\n                            key={post._id}\r\n                          >\r\n                            <Link\r\n                              className={`search-content-item`}\r\n                              to={`/post/${post._id}`}\r\n                            >\r\n                              {post.title}\r\n                            </Link>\r\n                          </div>\r\n                        </>\r\n                      );\r\n                    })\r\n                  : null}\r\n              </div>\r\n            </div>\r\n            {!localStorage.getItem(\"accessToken\") && !loggedIn ? (\r\n              <>\r\n                <div className=\"auth-button-container-navbar\">\r\n                  <button onClick={props.handleShowLogin}>log in</button>\r\n                  <button onClick={props.handleShowSignup}>sign up</button>\r\n                </div>\r\n                <div className=\"hamburger-container\">\r\n                  <div className=\"hamburger-button-container\">\r\n                    <input\r\n                      type=\"checkbox\"\r\n                      id=\"trigger\"\r\n                      className={\"burger-input\"}\r\n                    />\r\n                    <label htmlFor=\"trigger\" className={\"burger-label\"}>\r\n                      <div className={\"main-trigger-icon-container\"}>\r\n                        <span className={\"main-trigger-icon\"}></span>\r\n                      </div>\r\n                    </label>\r\n                    <div className=\"hamburger-item-container\">\r\n                      <li className=\"hamburger-item\">\r\n                        {\" \"}\r\n                        <button\r\n                          className=\"hamburger-item-button\"\r\n                          onClick={props.handleShowLogin}\r\n                        >\r\n                          log in\r\n                        </button>\r\n                      </li>\r\n                      <li className=\"hamburger-item\">\r\n                        <button\r\n                          className=\"hamburger-item-button\"\r\n                          onClick={props.handleShowSignup}\r\n                        >\r\n                          sign up\r\n                        </button>\r\n                      </li>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </>\r\n            ) : (\r\n              <div className=\"profile-wrapper\">\r\n                <button\r\n                  onClick={() => handleDropDown()}\r\n                  className=\"navbar-profile-container\"\r\n                >\r\n                  <div className=\"navbar-logo-text\">\r\n                    <img\r\n                      className=\"default-profile-image\"\r\n                      style={{ backgroundColor: \"rgba(0, 0, 0, 0.1)\" }}\r\n                      src={defaultPic}\r\n                      alt=\"\"\r\n                    />\r\n                    <p className=\"navbar-profile-username\">\r\n                      {currentUser.username}\r\n                    </p>\r\n                  </div>\r\n                  <img\r\n                    className=\"navbar-profile-triangle\"\r\n                    src={triangle}\r\n                    alt=\"\"\r\n                  />\r\n                </button>\r\n                {dropdown ? (\r\n                  <div className=\"navbar-dropdown-container\">\r\n                    <ul className=\"navbar-dropdown\">\r\n                      <li>\r\n                        <button\r\n                          onClick={handleLogout}\r\n                          className=\"navbar-dropdown-options\"\r\n                        >\r\n                          Logout\r\n                        </button>\r\n                      </li>\r\n                      <li></li>\r\n                      <li></li>\r\n                    </ul>\r\n                  </div>\r\n                ) : null}\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div></div>\r\n    </>\r\n  );\r\n}\r\nexport default withRouter(Navbar);\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { useHistory, useLocation } from \"react-router-dom\";\r\nimport { changePostSubmissionType, submitPost } from \"../actions/postActions\";\r\n\r\nconst NewPost = () => {\r\n  const useQuery = () => {\r\n    return new URLSearchParams(useLocation().search);\r\n  };\r\n  let query = useQuery();\r\n  let newQuery = query.get(\"media\");\r\n  let newQuery2 = query.get(\"link\");\r\n  let submissionType = useSelector((state) => {\r\n    return state.changeNewSubmissionType.submissionType;\r\n  });\r\n  const history = useHistory();\r\n  const dispatch = useDispatch();\r\n  const [title, setTitle] = useState(\"\");\r\n  const [text, setText] = useState(\"\");\r\n  const [imagedata, setImage] = useState(\"\");\r\n  const submitCheck = useSelector((state) => {\r\n    return state.posts.submitted;\r\n  });\r\n  const reRouteId = useSelector((state) => {\r\n    return state.posts.reRouteId;\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (newQuery) {\r\n      submissionType = \"media\";\r\n    } else if (newQuery2) {\r\n      submissionType = \"link\";\r\n    }\r\n    if (submitCheck) {\r\n      history.push(`/post/${reRouteId}`);\r\n    }\r\n  }, [submitCheck]);\r\n\r\n  const uploadForm = (e) => {\r\n    e.preventDefault();\r\n    const data = new FormData();\r\n    data.append(\"title\", title);\r\n    data.append(\"content\", text);\r\n    data.append(\"file\", imagedata);\r\n\r\n    dispatch(submitPost(data));\r\n  };\r\n\r\n  const handleFormType = () => {\r\n    window.history.replaceState(\"page2\", \"Title\", \"/new-post\");\r\n\r\n    dispatch(changePostSubmissionType(\"post\"));\r\n  };\r\n  const handleImageType = () => {\r\n    dispatch(changePostSubmissionType(\"media\"));\r\n    window.history.replaceState(\"page2\", \"Title\", \"/new-post\");\r\n  };\r\n  const handleLinkType = () => {\r\n    dispatch(changePostSubmissionType(\"link\"));\r\n    window.history.replaceState(\"page2\", \"Title\", \"/new-post\");\r\n  };\r\n  return (\r\n    <div className=\"newpost-wrapper\">\r\n      <div className=\"newpost-container\">\r\n        <p className=\"newpost-title\">Create a post</p>\r\n        <div className=\"newpost-template\">\r\n          <div className=\"newpost-options\">\r\n            <button\r\n              className={\r\n                submissionType === \"post\"\r\n                  ? `submit-type-button ${`selectedType`}`\r\n                  : `submit-type-button`\r\n              }\r\n              onClick={handleFormType}\r\n            >\r\n              Post\r\n            </button>\r\n            <button\r\n              className={\r\n                submissionType === \"media\"\r\n                  ? `submit-type-button ${`selectedType`}`\r\n                  : `submit-type-button`\r\n              }\r\n              onClick={handleImageType}\r\n            >\r\n              Images {\"&\"} Video\r\n            </button>\r\n            <button\r\n              className={\r\n                submissionType === \"link\"\r\n                  ? `submit-type-button ${`selectedType`}`\r\n                  : `submit-type-button`\r\n              }\r\n              onClick={handleLinkType}\r\n            >\r\n              Link\r\n            </button>\r\n          </div>\r\n          <form action=\"\">\r\n            <div className=\"newpost-title-container\">\r\n              <input\r\n                onChange={(e) => {\r\n                  setTitle(e.target.value);\r\n                }}\r\n                placeholder=\"Title\"\r\n                className=\"newpost-title\"\r\n                type=\"text\"\r\n              />\r\n            </div>\r\n\r\n            <div className=\"newpost-entry-container\">\r\n              {submissionType === \"media\" ? (\r\n                <div className=\"upload-input-container\">\r\n                  <input\r\n                    onChange={(e) => {\r\n                      setImage(e.target.files[0]);\r\n                    }}\r\n                    className=\"upload-input\"\r\n                    type=\"file\"\r\n                    name=\"\"\r\n                    id=\"file-input\"\r\n                  />\r\n                </div>\r\n              ) : (\r\n                <textarea\r\n                  onChange={(e) => {\r\n                    setText(e.target.value);\r\n                  }}\r\n                  placeholder=\"Text(optional)\"\r\n                  className=\"newpost-entry\"\r\n                  name=\"\"\r\n                  id=\"\"\r\n                  cols=\"30\"\r\n                  rows=\"10\"\r\n                ></textarea>\r\n              )}\r\n              <div className=\"submission-button-container\">\r\n                <button\r\n                  type=\"submit\"\r\n                  onClick={(e) => uploadForm(e)}\r\n                  className=\"submission-buttons\"\r\n                >\r\n                  Post\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NewPost;\r\n","import axios from \"axios\";\r\nimport {\r\n  NEW_COMMENT_REQUEST,\r\n  NEW_COMMENT_SUCCESS,\r\n  NEW_REPLY_REQUEST,\r\n  NEW_REPLY_SUCCESS,\r\n  VOTE_CAST,\r\n} from \"../types\";\r\n\r\nexport function newCommentRequest() {\r\n  return {\r\n    type: NEW_COMMENT_REQUEST,\r\n  };\r\n}\r\nfunction newCommentSuccess(savedComment, postId, parentId) {\r\n  return (dispatch, getState) => {\r\n    dispatch({\r\n      type: NEW_COMMENT_SUCCESS,\r\n      savedComment,\r\n      postId,\r\n      parentId,\r\n    });\r\n  };\r\n}\r\nexport function newComment(content, postId) {\r\n  return (dispatch, getState) => {\r\n    dispatch(newCommentRequest());\r\n    return axios({\r\n      url: \"/api/comment/new\",\r\n      method: \"POST\",\r\n      data: {\r\n        content,\r\n        postId,\r\n      },\r\n      withCredentials: true,\r\n    }).then((res) => {\r\n      dispatch(newCommentSuccess(res.data, postId));\r\n    });\r\n  };\r\n}\r\nexport function newReplyRequest() {\r\n  return {\r\n    type: NEW_REPLY_REQUEST,\r\n    test: {},\r\n  };\r\n}\r\nexport function test(test) {\r\n  return (dispatch, getState) => {\r\n    dispatch(test.push(\"sdfsdf\"));\r\n  };\r\n}\r\nexport function changeCommentPoint(point, postId, commentId) {\r\n  return (dispatch, getState) => {\r\n    const currentCommentId = commentId;\r\n    const currentComment = getState().comments.byId[currentCommentId];\r\n    const currentVoteState = currentComment.voteState;\r\n    dispatch({\r\n      type: VOTE_CAST,\r\n      point,\r\n      commentId,\r\n      currentVoteState,\r\n    });\r\n    if (point === 1) {\r\n      axios({\r\n        url: \"/api/comment/vote-up\",\r\n        method: \"PUT\",\r\n        data: {\r\n          postId,\r\n          commentId,\r\n        },\r\n        withCredentials: true,\r\n      });\r\n    } else if (point === -1) {\r\n      axios({\r\n        url: \"/api/comment/vote-down\",\r\n        method: \"PUT\",\r\n        data: {\r\n          postId,\r\n          commentId,\r\n        },\r\n        withCredentials: true,\r\n      });\r\n    }\r\n  };\r\n}\r\nexport function newReply(content, postId, commentId) {\r\n  return (dispatch, getState) =>\r\n    axios({\r\n      url: `/api/comments/${commentId}/replies`,\r\n      method: \"POST\",\r\n      data: {\r\n        content,\r\n        postId,\r\n      },\r\n      withCredentials: true,\r\n    }).then((res) => {\r\n      dispatch({\r\n        type: NEW_REPLY_SUCCESS,\r\n        reply: res.data,\r\n        postId,\r\n        commentId,\r\n      });\r\n    });\r\n}\r\n","export default __webpack_public_path__ + \"static/media/down-arrow.c9c98d5d.svg\";","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"g\", null, /*#__PURE__*/React.createElement(\"g\", null, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M392.533,238.937c-9.426,0-17.067,7.641-17.067,17.067V426.67c0,9.426-7.641,17.067-17.067,17.067H51.2 c-9.426,0-17.067-7.641-17.067-17.067V85.337c0-9.426,7.641-17.067,17.067-17.067H256c9.426,0,17.067-7.641,17.067-17.067 S265.426,34.137,256,34.137H51.2C22.923,34.137,0,57.06,0,85.337V426.67c0,28.277,22.923,51.2,51.2,51.2h307.2 c28.277,0,51.2-22.923,51.2-51.2V256.003C409.6,246.578,401.959,238.937,392.533,238.937z\"\n})));\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"g\", null, /*#__PURE__*/React.createElement(\"g\", null, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M458.742,19.142c-12.254-12.256-28.875-19.14-46.206-19.138c-17.341-0.05-33.979,6.846-46.199,19.149L141.534,243.937 c-1.865,1.879-3.272,4.163-4.113,6.673l-34.133,102.4c-2.979,8.943,1.856,18.607,10.799,21.585 c1.735,0.578,3.552,0.873,5.38,0.875c1.832-0.003,3.653-0.297,5.393-0.87l102.4-34.133c2.515-0.84,4.8-2.254,6.673-4.13 l224.802-224.802C484.25,86.023,484.253,44.657,458.742,19.142z\"\n})));\n\nvar _ref4 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref5 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref6 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref7 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref8 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref9 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref10 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref11 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref12 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref13 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref14 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref15 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref16 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref17 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref18 = /*#__PURE__*/React.createElement(\"g\", null);\n\nfunction SvgEdit(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 477.873 477.873\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2, _ref3, _ref4, _ref5, _ref6, _ref7, _ref8, _ref9, _ref10, _ref11, _ref12, _ref13, _ref14, _ref15, _ref16, _ref17, _ref18);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgEdit);\nexport default __webpack_public_path__ + \"static/media/edit.4e81c026.svg\";\nexport { ForwardRef as ReactComponent };","export default __webpack_public_path__ + \"static/media/up-arrow.927fb299.svg\";","import React, { useEffect, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport {\r\n  changeCommentPoint,\r\n  newReply,\r\n  newReplyRequest,\r\n} from \"../actions/commentActions\";\r\nimport downvote from \"../images/down-arrow.svg\";\r\nimport upvote from \"../images/up-arrow.svg\";\r\nconst Comment = ({ comment, handleShowLogin }) => {\r\n  const allComments = useSelector((state) => {\r\n    return state.comments.byId;\r\n  });\r\n  const loggedIn = useSelector((state) => state.login.isLoggedIn);\r\n\r\n  const dispatch = useDispatch();\r\n  const params = useParams();\r\n  const [replyText, setReplyText] = useState(\"\");\r\n  const [replyToggle, setReplyToggle] = useState(false);\r\n  const voteUp = () => {\r\n    if (loggedIn) {\r\n      dispatch(changeCommentPoint(1, params.id, comment._id));\r\n    } else {\r\n      handleShowLogin();\r\n    }\r\n  };\r\n  const voteDown = () => {\r\n    if (loggedIn) {\r\n      dispatch(changeCommentPoint(-1, params.id, comment._id));\r\n    } else {\r\n      handleShowLogin();\r\n    }\r\n  };\r\n  const handleReplyToggle = () => {\r\n    setReplyToggle(!replyToggle);\r\n    dispatch(newReplyRequest());\r\n  };\r\n\r\n  const handleReply = () => {\r\n    let commentId = comment._id;\r\n    dispatch(newReply(replyText, params.id, commentId));\r\n    setReplyToggle(false);\r\n    setReplyText(\"\");\r\n  };\r\n\r\n  useEffect(() => {}, []);\r\n  if (!comment) {\r\n    return <div></div>;\r\n  }\r\n  const nestedComments = (comment.comments || []).map((comment) => {\r\n    return <Comment key={comment} comment={allComments[comment]} />;\r\n  });\r\n  return (\r\n    <div style={{ marginLeft: \"15px\", marginTop: \"10px\" }}>\r\n      <div className=\"comment-vote-title-container\">\r\n        <div className=\"comment-vote-container\">\r\n          <div className=\"comment-vote-button-container\">\r\n            <img\r\n              className={\r\n                comment.voteState === 1\r\n                  ? \"comment-vote-button-color\"\r\n                  : \"comment-vote-button\"\r\n              }\r\n              src={upvote}\r\n              onClick={voteUp}\r\n              alt=\"\"\r\n            />\r\n            <span>{comment.voteTotal}</span>\r\n            <img\r\n              className={\r\n                comment.voteState === -1\r\n                  ? \"comment-vote-button-color\"\r\n                  : \"comment-vote-button\"\r\n              }\r\n              src={downvote}\r\n              onClick={voteDown}\r\n            />\r\n          </div>\r\n        </div>\r\n        <div className=\"comment-container\">\r\n          <p className=\"comment-author\">{comment.authorName}</p>\r\n          <div className=\"parent-comment\">{comment.content}</div>\r\n          <div className=\"reply-button-container\">\r\n            {loggedIn ? (\r\n              <button onClick={handleReplyToggle} className=\"reply-button\">\r\n                Reply\r\n              </button>\r\n            ) : null}\r\n            {replyToggle ? (\r\n              <div className=\"new-comment-container\">\r\n                <textarea\r\n                  value={replyText}\r\n                  onChange={(e) => {\r\n                    setReplyText(e.target.value);\r\n                  }}\r\n                  placeholder=\"What are your thoughts?\"\r\n                  className=\"new-comment reply-textarea\"\r\n                  rows=\"6\"\r\n                ></textarea>\r\n                <div className=\"submit-comment-container\">\r\n                  <button\r\n                    onClick={handleReply}\r\n                    className=\"submit-comment-button\"\r\n                  >\r\n                    Reply\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            ) : null}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"nested-comments\">{nestedComments}</div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Comment;\r\n","import React, { useState } from \"react\";\r\nimport { connect, useDispatch, useSelector } from \"react-redux\";\r\nimport { useHistory, useParams } from \"react-router-dom\";\r\nimport { newComment } from \"../actions/commentActions\";\r\nimport { changePoint, editPost } from \"../actions/postActions\";\r\nimport downvote from \"../images/down-arrow.svg\";\r\nimport { ReactComponent as Edit } from \"../images/edit.svg\";\r\nimport upvote from \"../images/up-arrow.svg\";\r\nimport Comment from \"./Comment\";\r\nconst PostModal = (props) => {\r\n  const params = useParams();\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n  const [commentText, setCommentText] = useState(\"\");\r\n  const [edit, setEdit] = useState(false);\r\n  const [editText, setEditText] = useState(\"\");\r\n  const currentUser = useSelector((state) => state.currentUser._id);\r\n  const comments = useSelector((state) => {\r\n    return state.comments.byId;\r\n  });\r\n  const loggedIn = useSelector((state) => state.login.isLoggedIn);\r\n  let currentPost = props.post;\r\n  const back = (e) => {\r\n    e.stopPropagation();\r\n  };\r\n  const handleReroute = () => {\r\n    history.push(\"/\");\r\n  };\r\n  const handleSubmitComment = () => {\r\n    dispatch(newComment(commentText, props.post._id));\r\n    setCommentText(\"\");\r\n  };\r\n  const handleUpvote = () => {\r\n    if (loggedIn) {\r\n      dispatch(changePoint(1, params.id));\r\n    } else {\r\n      props.handleShowLogin();\r\n    }\r\n  };\r\n  const handleDownVote = () => {\r\n    if (loggedIn) {\r\n      dispatch(changePoint(-1, params.id));\r\n    } else {\r\n      props.handleShowLogin();\r\n    }\r\n  };\r\n  const handleEdit = () => {\r\n    setEdit(true);\r\n  };\r\n  const handleCancelEdit = () => {\r\n    setEdit(false);\r\n  };\r\n  const saveEdit = (id) => {\r\n    dispatch(editPost(id, editText));\r\n    setEdit(false);\r\n  };\r\n  if (!currentPost) {\r\n    return <div></div>;\r\n  }\r\n  const date = new Date(currentPost.createdAt);\r\n  const formatDate = new Intl.DateTimeFormat(\"en-US\", {}).format(date);\r\n  return (\r\n    <div onClick={handleReroute} className=\"modal-wrapper\">\r\n      <input type=\"checkbox\" id=\"trigger\" className={\"burger-input\"} />\r\n      <label htmlFor=\"trigger\" className={\"close-label\"}>\r\n        <div onClick={handleReroute} className={\"main-close-icon-container\"}>\r\n          <span className={\"main-close-icon\"}></span>\r\n        </div>\r\n      </label>\r\n      <div onClick={back} className=\"card-modal\">\r\n        {currentPost.author ? (\r\n          <>\r\n            <p className=\"card-modal-author\">\r\n              {\" \"}\r\n              u/{currentPost.author.username}\r\n            </p>\r\n            <p>{formatDate}</p>\r\n            <h4 className=\"card-modal-title\">{currentPost.title}</h4>\r\n            {currentUser === currentPost.author._id ? (\r\n              <div className=\"edit-container\">\r\n                <p\r\n                  className={`card-modal-content ${edit ? \"inactive\" : null} `}\r\n                >\r\n                  {currentPost.content}\r\n                </p>\r\n                <textarea\r\n                  onChange={(e) => {\r\n                    setEditText(e.target.value);\r\n                  }}\r\n                  className={edit ? \"edit-text-area\" : \"inactive\"}\r\n                  value={editText}\r\n                ></textarea>\r\n                <div className={edit ? `edit-button-container` : `inactive`}>\r\n                  <button\r\n                    onClick={() => saveEdit(currentPost._id)}\r\n                    className=\"edit-submit-button\"\r\n                  >\r\n                    Save\r\n                  </button>\r\n                  <button\r\n                    onClick={handleCancelEdit}\r\n                    className=\"edit-cancel-button\"\r\n                  >\r\n                    Cancel\r\n                  </button>\r\n                </div>\r\n                <button\r\n                  className={`edit-button ${edit ? \"inactive\" : null}`}\r\n                  onClick={handleEdit}\r\n                >\r\n                  <Edit />\r\n                </button>\r\n              </div>\r\n            ) : null}\r\n            <div className=\"post-image-container\">\r\n              <img className=\"post-image\" src={props.post.image} alt=\"\" />\r\n            </div>\r\n            {currentUser ? (\r\n              <div className=\"new-comment-container\">\r\n                <textarea\r\n                  className=\"new-comment\"\r\n                  name=\"\"\r\n                  id=\"\"\r\n                  placeholder=\"What are your thoughts?\"\r\n                  rows=\"6\"\r\n                  value={commentText}\r\n                  onChange={(e) => setCommentText(e.target.value)}\r\n                ></textarea>\r\n                <span className=\"submit-comment-container\">\r\n                  <button\r\n                    onClick={() => {\r\n                      handleSubmitComment();\r\n                    }}\r\n                    className=\"submit-comment-button\"\r\n                  >\r\n                    Comment\r\n                  </button>\r\n                </span>\r\n              </div>\r\n            ) : (\r\n              <div className=\"no-user-comment-container\">\r\n                <p className=\"no-user-comment\">\r\n                  Log in or sign up to leave a comment\r\n                </p>\r\n                <div className=\"auth-button-container\">\r\n                  <button onClick={props.handleShowLogin}>log in</button>\r\n                  <button onClick={props.handleShowSignup}>sign up</button>\r\n                </div>\r\n              </div>\r\n            )}\r\n            <div className=\"card-modal-vote-container\">\r\n              <li onClick={handleUpvote}>\r\n                <img\r\n                  className={\r\n                    currentPost.voteState === 1\r\n                      ? `vote-button-color`\r\n                      : `vote-button`\r\n                  }\r\n                  src={upvote}\r\n                  alt=\"\"\r\n                />\r\n              </li>\r\n              <li>{currentPost.voteTotal}</li>\r\n              <li onClick={handleDownVote}>\r\n                <img\r\n                  className={\r\n                    currentPost.voteState === -1\r\n                      ? `vote-button-color`\r\n                      : `vote-button`\r\n                  }\r\n                  src={downvote}\r\n                  alt=\"\"\r\n                />\r\n              </li>\r\n            </div>\r\n            <h4 className=\"comment-section-header\">Comments</h4>\r\n            {props.post.comments.length > 0 &&\r\n              props.post.comments.map((comment) => {\r\n                return (\r\n                  <Comment\r\n                    handleShowLogin={props.handleShowLogin}\r\n                    key={comment}\r\n                    comment={comments[comment]}\r\n                  />\r\n                );\r\n              })}\r\n          </>\r\n        ) : null}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\nfunction mapStateToProps(state, ownProps) {\r\n  let id = ownProps.match.params.id;\r\n  let post;\r\n  post = state.posts.byId[id];\r\n  return {\r\n    post: post,\r\n  };\r\n}\r\nexport default connect(mapStateToProps)(PostModal);\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { connect, useDispatch, useSelector } from \"react-redux\";\r\nimport { Redirect, Route, Switch } from \"react-router-dom\";\r\nimport { nextPage } from \"./actions/postActions\";\r\nimport { clearLoginModal, loggedIn } from \"./actions/userActions\";\r\nimport Home from \"./components/Home\";\r\nimport Login from \"./components/Login\";\r\nimport Navbar from \"./components/Navbar\";\r\nimport NewPost from \"./components/NewPost\";\r\nimport PostModal from \"./components/PostModal\";\r\nimport Signup from \"./components/Signup\";\r\nimport \"./styles/myApp.scss\";\r\nfunction App(props) {\r\n  const [showLogin, setLogin] = useState(false);\r\n  const [showSignup, setShowSignup] = useState(false);\r\n\r\n  const loggedInStatus = useSelector((state) => state.login.isLoggedIn);\r\n  const signedUpStatus = useSelector((state) => state.signup.isSignedUp);\r\n  const dispatch = useDispatch();\r\n  useEffect(() => {\r\n    dispatch(loggedIn());\r\n  }, [dispatch]);\r\n  useEffect(() => {\r\n    if (loggedInStatus) {\r\n      setLogin(false);\r\n    }\r\n    if (signedUpStatus && !loggedInStatus) {\r\n      setShowSignup(false);\r\n      setLogin(true);\r\n    }\r\n  }, [loggedInStatus, signedUpStatus]);\r\n  const handleShowLogin = () => {\r\n    setLogin(!showLogin);\r\n  };\r\n  const handleShowSignup = () => {\r\n    setShowSignup(!showSignup);\r\n  };\r\n  const closeModal = () => {\r\n    dispatch(clearLoginModal());\r\n    setLogin(false);\r\n    setShowSignup(false);\r\n  };\r\n  const handleShowNextPage = (lastId, sort) => {\r\n    dispatch(nextPage(lastId, sort));\r\n  };\r\n  return (\r\n    <div id=\"scroll-wrapper\" className={\"app-wrapper\"}>\r\n      {showLogin ? <Login close={closeModal} /> : null}\r\n      {showSignup ? <Signup close={closeModal} /> : null}\r\n      <Navbar\r\n        handleShowLogin={handleShowLogin}\r\n        handleShowSignup={handleShowSignup}\r\n      />\r\n      <Route\r\n        exact\r\n        path=\"/post/:id\"\r\n        render={(props) => {\r\n          return (\r\n            <PostModal\r\n              handleShowLogin={handleShowLogin}\r\n              handleShowSignup={handleShowSignup}\r\n              {...props}\r\n            />\r\n          );\r\n        }}\r\n      />\r\n      <Switch>\r\n        <Route\r\n          exact\r\n          path=\"/new-post\"\r\n          render={(props) => {\r\n            return <NewPost {...props} />;\r\n          }}\r\n        >\r\n          {!loggedInStatus ? <Redirect to=\"/\" /> : null}\r\n        </Route>\r\n        <Route\r\n          path={[\"/:sort\", \"/\"]}\r\n          render={(props2) => {\r\n            return (\r\n              <Home\r\n                handleShowLogin={handleShowLogin}\r\n                handleShowSignup={handleShowSignup}\r\n                handleShowNextPage={handleShowNextPage}\r\n                {...props2}\r\n                test={props.posts}\r\n              />\r\n            );\r\n          }}\r\n          showLogin={showLogin}\r\n          showSignup={showSignup}\r\n        />\r\n      </Switch>\r\n    </div>\r\n  );\r\n}\r\nfunction mapStateToProps(state, ownProps) {\r\n  let loggedInStatus = state.login.isLoggedIn;\r\n  return {\r\n    loggedIn: loggedInStatus,\r\n  };\r\n}\r\nexport default connect(mapStateToProps)(App);\r\n","import { combineReducers } from \"redux\";\r\nimport {\r\n  CLEAR_ERROR,\r\n  CLEAR_LOGIN_MODAL,\r\n  CURRENT_USER,\r\n  DELETE_POST,\r\n  EDIT_POST,\r\n  LOGIN_ERROR,\r\n  LOGIN_REQUEST,\r\n  LOGIN_SUCCESS,\r\n  LOG_OUT,\r\n  NEW_COMMENT_SUCCESS,\r\n  NEW_POST_REQUEST,\r\n  NEW_POST_SUCCESS,\r\n  NEW_REPLY_REQUEST,\r\n  NEW_REPLY_SUCCESS,\r\n  NEXT_PAGE,\r\n  POST_CREATION_CHANGE_SUBMISSION_TYPE,\r\n  PREV_PAGE,\r\n  RECEIVE_POSTS,\r\n  RECEIVE_SINGLE_POSTS,\r\n  REFRESH_USER,\r\n  REQUEST_POSTS,\r\n  REQUEST_USER_INFO,\r\n  SET_POST_MODAL,\r\n  SIGNUP_ERROR,\r\n  SIGNUP_REQUEST,\r\n  SIGNUP_SUCCESS,\r\n  SORT_POSTS,\r\n  SPLICED_POST,\r\n  UNAUTHORIZED_ERROR,\r\n  VOTE_CAST,\r\n} from \"../types\";\r\nfunction combineArrays(arr1, arr2) {\r\n  let combined = arr1.concat(arr2);\r\n  let set = new Set(combined);\r\n  return [...set];\r\n}\r\nfunction addComment(state, action) {\r\n  return {\r\n    ...state,\r\n    byId: {\r\n      ...state.byId,\r\n      [action.postId]: {\r\n        ...state.byId[action.postId],\r\n        comments: [\r\n          ...state.byId[action.postId].comments,\r\n          action.savedComment._id,\r\n        ],\r\n      },\r\n    },\r\n  };\r\n}\r\nfunction changePostPoint(state, action) {\r\n  const { postId } = action;\r\n  const { point } = action;\r\n  const { currentVoteState } = action;\r\n  const post = state.byId[postId];\r\n  if (action.commentId) {\r\n    return state;\r\n  } else {\r\n    if (currentVoteState === 1 && point === 1) {\r\n      return {\r\n        ...state,\r\n        byId: {\r\n          ...state.byId,\r\n          [postId]: {\r\n            ...post,\r\n            voteState: 0,\r\n            voteTotal: state.byId[postId].voteTotal - 1,\r\n          },\r\n        },\r\n      };\r\n    }\r\n    if (currentVoteState === 0 && point === 1) {\r\n      return {\r\n        ...state,\r\n        byId: {\r\n          ...state.byId,\r\n          [postId]: {\r\n            ...post,\r\n            voteState: 1,\r\n            voteTotal: state.byId[postId].voteTotal + 1,\r\n          },\r\n        },\r\n      };\r\n    }\r\n    if (currentVoteState === 1 && point === -1) {\r\n      return {\r\n        ...state,\r\n        byId: {\r\n          ...state.byId,\r\n          [postId]: {\r\n            ...post,\r\n            voteState: -1,\r\n            voteTotal: state.byId[postId].voteTotal - 2,\r\n          },\r\n        },\r\n      };\r\n    }\r\n    if (currentVoteState === 0 && point === -1) {\r\n      return {\r\n        ...state,\r\n        byId: {\r\n          ...state.byId,\r\n          [postId]: {\r\n            ...post,\r\n            voteState: -1,\r\n            voteTotal: state.byId[postId].voteTotal - 1,\r\n          },\r\n        },\r\n      };\r\n    }\r\n    if (currentVoteState === -1 && point === -1) {\r\n      return {\r\n        ...state,\r\n        byId: {\r\n          ...state.byId,\r\n          [postId]: {\r\n            ...post,\r\n            voteState: 0,\r\n            voteTotal: state.byId[postId].voteTotal + 1,\r\n          },\r\n        },\r\n      };\r\n    }\r\n    if (currentVoteState === -1 && point === 1) {\r\n      return {\r\n        ...state,\r\n        byId: {\r\n          ...state.byId,\r\n          [postId]: {\r\n            ...post,\r\n            voteState: 1,\r\n            voteTotal: state.byId[postId].voteTotal + 2,\r\n          },\r\n        },\r\n      };\r\n    }\r\n  }\r\n}\r\nfunction handlePostSubmission(state, action) {\r\n  const { post, id } = action;\r\n  return {\r\n    ...state,\r\n    byId: {\r\n      ...state.byId,\r\n      [id]: post,\r\n    },\r\n    allIds: [...state.allIds, id],\r\n    submitting: false,\r\n    createdPosts: {\r\n      ...state.createdPosts,\r\n      [id]: post,\r\n    },\r\n    submitted: true,\r\n    reRouteId: id,\r\n  };\r\n}\r\nfunction editPostReduce(state, action) {\r\n  const { postId, content } = action;\r\n  const post = state.byId[postId];\r\n  return {\r\n    ...state,\r\n    byId: {\r\n      ...state.byId,\r\n      [postId]: {\r\n        ...post,\r\n        content: content,\r\n      },\r\n    },\r\n  };\r\n}\r\nfunction handlePreviousPage(state, action) {\r\n  let allIds = state.allIds;\r\n  let incomingIds = action.normalizedData.result;\r\n  let set = new Set(incomingIds.concat(allIds));\r\n  return {\r\n    ...state,\r\n    isFetching: false,\r\n    byId: {\r\n      ...state.byId,\r\n      ...action.normalizedData.entities.posts,\r\n    },\r\n    status: \"succeeded\",\r\n    allIds: [...set],\r\n  };\r\n}\r\nfunction handleNextPage(state, action) {\r\n  let allIds = state.allIds;\r\n  let incomingIds = action.normalizedData.result;\r\n  let set = new Set(allIds.concat(incomingIds));\r\n  return {\r\n    ...state,\r\n    isFetching: false,\r\n    byId: {\r\n      ...state.byId,\r\n      ...action.normalizedData.entities.posts,\r\n    },\r\n    offset: action.offset,\r\n    status: \"succeeded\",\r\n    allIds: [...set],\r\n  };\r\n}\r\nfunction setListings(state, action, prev) {\r\n  return {\r\n    ...state,\r\n    status: \"completed\",\r\n    sortOrder: action.sort,\r\n    listingOrder: {\r\n      ...state.listingOrder,\r\n      [action.sort]: combineArrays(\r\n        state.listingOrder[action.sort] ? state.listingOrder[action.sort] : [],\r\n        action.normalizedData.result\r\n      ),\r\n    },\r\n  };\r\n}\r\nfunction listings(\r\n  state = {\r\n    sortOrder: \"default\",\r\n    listingOrder: {},\r\n    status: \"idle\",\r\n  },\r\n  action\r\n) {\r\n  switch (action.type) {\r\n    case SORT_POSTS:\r\n      return setListings(state, action);\r\n    case REQUEST_POSTS:\r\n      return action.e\r\n        ? Object.assign({}, state, {\r\n            status: \"loading\",\r\n          })\r\n        : state;\r\n    case DELETE_POST:\r\n      const filteredPosts = state.listingOrder[state.sortOrder].filter((id) => {\r\n        return id !== action.postId;\r\n      });\r\n      return {\r\n        ...state,\r\n        listingOrder: {\r\n          ...state.listingOrder,\r\n          [state.sortOrder]: [...filteredPosts],\r\n        },\r\n      };\r\n    case PREV_PAGE:\r\n      return setListings(state, action, \"prev\");\r\n    case NEXT_PAGE:\r\n      return setListings(state, action);\r\n    case RECEIVE_POSTS:\r\n      return setListings(state, action);\r\n    default:\r\n      return state;\r\n  }\r\n}\r\nfunction receievePosts(state, action) {\r\n  let allIds = state.allIds;\r\n  let incomingIds = action.normalizedData.result;\r\n  let set = new Set(allIds.concat(incomingIds));\r\n  return {\r\n    ...state,\r\n    isFetching: false,\r\n    byId: {\r\n      ...state.byId,\r\n      ...action.normalizedData.entities.posts,\r\n    },\r\n    offset: action.offset,\r\n    status: \"completed\",\r\n    allIds: [...set],\r\n  };\r\n}\r\nfunction posts(\r\n  state = {\r\n    isFetching: false,\r\n    byId: {},\r\n    allIds: [],\r\n    offset: null,\r\n    submitted: false,\r\n    err: null,\r\n    createdPosts: {},\r\n    submitting: false,\r\n    reRouteId: null,\r\n    status: \"idle\",\r\n    firstId: \"\",\r\n    lastId: \"\",\r\n  },\r\n  action\r\n) {\r\n  switch (action.type) {\r\n    case SORT_POSTS:\r\n      return Object.assign({}, state, {\r\n        status: \"idle\",\r\n        offset: action.offset,\r\n      });\r\n    case PREV_PAGE:\r\n      return handlePreviousPage(state, action);\r\n    case NEXT_PAGE:\r\n      return handleNextPage(state, action);\r\n    case REQUEST_POSTS:\r\n      return Object.assign({}, state, {\r\n        isFetching: true,\r\n        status: \"loading\",\r\n      });\r\n    case SPLICED_POST:\r\n      return Object.assign({}, state, {\r\n        byId: action.newObj,\r\n        allIds: action.splicedArray,\r\n        createdPosts: {},\r\n      });\r\n    case RECEIVE_SINGLE_POSTS:\r\n      return receievePosts(state, action);\r\n    case RECEIVE_POSTS:\r\n      return receievePosts(state, action);\r\n    case VOTE_CAST:\r\n      return changePostPoint(state, action);\r\n    case DELETE_POST:\r\n      const allIds = state.allIds;\r\n      const filteredPosts = allIds.filter((id) => {\r\n        return id !== action.postId;\r\n      });\r\n      return Object.assign({}, state, {\r\n        allIds: filteredPosts,\r\n      });\r\n    case NEW_COMMENT_SUCCESS:\r\n      return addComment(state, action);\r\n    case NEW_POST_REQUEST:\r\n      return Object.assign({}, state, {\r\n        submitted: false,\r\n        submitting: true,\r\n        reRouteId: \"\",\r\n      });\r\n    case EDIT_POST:\r\n      return editPostReduce(state, action);\r\n    case NEW_POST_SUCCESS:\r\n      return handlePostSubmission(state, action);\r\n    default:\r\n      return state;\r\n  }\r\n}\r\nfunction setPostModal(state, action) {\r\n  const { post } = action;\r\n  return {\r\n    ...state,\r\n    post,\r\n  };\r\n}\r\nfunction currentModal(\r\n  state = {\r\n    post: {},\r\n  },\r\n  action\r\n) {\r\n  switch (action.type) {\r\n    case SET_POST_MODAL:\r\n      return setPostModal(state, action);\r\n    case NEW_POST_SUCCESS:\r\n      return Object.assign({}, state, {\r\n        post: action.post,\r\n      });\r\n    default:\r\n      return state;\r\n  }\r\n}\r\nfunction addCommentEntry(state, action) {\r\n  const { savedComment } = action;\r\n  return {\r\n    ...state,\r\n    byId: {\r\n      ...state.byId,\r\n      [action.savedComment._id]: {\r\n        ...state.byId[savedComment._id],\r\n        ...action.savedComment,\r\n      },\r\n    },\r\n  };\r\n}\r\nfunction changeCommentPoint(state, action) {\r\n  if (action.commentId) {\r\n    const { commentId } = action;\r\n    const { point } = action;\r\n    const { currentVoteState } = action;\r\n    const comment = state.byId[commentId];\r\n    if (currentVoteState === 1 && point === 1) {\r\n      return {\r\n        ...state,\r\n        byId: {\r\n          ...state.byId,\r\n          [commentId]: {\r\n            ...comment,\r\n            voteState: 0,\r\n            voteTotal: state.byId[commentId].voteTotal - 1,\r\n          },\r\n        },\r\n      };\r\n    }\r\n    if (currentVoteState === 0 && point === 1) {\r\n      return {\r\n        ...state,\r\n        byId: {\r\n          ...state.byId,\r\n          [commentId]: {\r\n            ...comment,\r\n            voteState: 1,\r\n            voteTotal: state.byId[commentId].voteTotal + 1,\r\n          },\r\n        },\r\n      };\r\n    }\r\n    if (currentVoteState === 1 && point === -1) {\r\n      return {\r\n        ...state,\r\n        byId: {\r\n          ...state.byId,\r\n          [commentId]: {\r\n            ...comment,\r\n            voteState: -1,\r\n            voteTotal: state.byId[commentId].voteTotal - 2,\r\n          },\r\n        },\r\n      };\r\n    }\r\n    if (currentVoteState === 0 && point === -1) {\r\n      return {\r\n        ...state,\r\n        byId: {\r\n          ...state.byId,\r\n          [commentId]: {\r\n            ...comment,\r\n            voteState: -1,\r\n            voteTotal: state.byId[commentId].voteTotal - 1,\r\n          },\r\n        },\r\n      };\r\n    }\r\n    if (currentVoteState === -1 && point === -1) {\r\n      return {\r\n        ...state,\r\n        byId: {\r\n          ...state.byId,\r\n          [commentId]: {\r\n            ...comment,\r\n            voteState: 0,\r\n            voteTotal: state.byId[commentId].voteTotal + 1,\r\n          },\r\n        },\r\n      };\r\n    }\r\n    if (currentVoteState === -1 && point === 1) {\r\n      return {\r\n        ...state,\r\n        byId: {\r\n          ...state.byId,\r\n          [commentId]: {\r\n            ...comment,\r\n            voteState: 1,\r\n            voteTotal: state.byId[commentId].voteTotal + 2,\r\n          },\r\n        },\r\n      };\r\n    }\r\n  } else {\r\n    return state;\r\n  }\r\n}\r\nconst newReply = (state, action) => {\r\n  return {\r\n    ...state,\r\n    byId: {\r\n      ...state.byId,\r\n      [action.commentId]: {\r\n        ...state.byId[action.commentId],\r\n        comments: [...state.byId[action.commentId].comments, action.reply._id],\r\n      },\r\n      [action.reply._id]: action.reply,\r\n    },\r\n  };\r\n};\r\nfunction comments(\r\n  state = {\r\n    byId: {},\r\n    allId: [],\r\n  },\r\n  action\r\n) {\r\n  switch (action.type) {\r\n    case RECEIVE_SINGLE_POSTS: {\r\n      return Object.assign({}, state, {\r\n        byId: {\r\n          ...state.byId,\r\n          ...action.normalizedData.entities.comments,\r\n        },\r\n      });\r\n    }\r\n    case RECEIVE_POSTS: {\r\n      return Object.assign({}, state, {\r\n        byId: {\r\n          ...state.byId,\r\n          ...action.normalizedData.entities.comments,\r\n        },\r\n      });\r\n    }\r\n    case NEW_REPLY_SUCCESS:\r\n      return newReply(state, action);\r\n    case VOTE_CAST:\r\n      return changeCommentPoint(state, action);\r\n    case NEW_COMMENT_SUCCESS:\r\n      return addCommentEntry(state, action);\r\n    case NEW_REPLY_REQUEST:\r\n      return Object.assign({}, state, {});\r\n    default:\r\n      return state;\r\n  }\r\n}\r\nfunction changeNewSubmissionType(\r\n  state = {\r\n    submissionType: \"\",\r\n  },\r\n  action\r\n) {\r\n  switch (action.type) {\r\n    case POST_CREATION_CHANGE_SUBMISSION_TYPE:\r\n      return Object.assign({}, state, {\r\n        submissionType: action.postType,\r\n      });\r\n    default:\r\n      return state;\r\n  }\r\n}\r\nfunction signup(\r\n  state = {\r\n    isSigningUp: false,\r\n    isSignedUp: false,\r\n    err: null,\r\n    passwordError: null,\r\n  },\r\n  action\r\n) {\r\n  const { passwordError } = action;\r\n  switch (action.type) {\r\n    case SIGNUP_REQUEST:\r\n      return Object.assign({}, state, {\r\n        err: null,\r\n        passwordError: null,\r\n      });\r\n    case SIGNUP_SUCCESS:\r\n      return Object.assign({}, state, {\r\n        isSignedUp: true,\r\n        isSigningUp: false,\r\n        err: null,\r\n        passwordError: null,\r\n      });\r\n    case CLEAR_ERROR:\r\n      return Object.assign({}, state, {\r\n        err: null,\r\n      });\r\n    case SIGNUP_ERROR:\r\n      return Object.assign({}, state, {\r\n        err: action.error,\r\n        passwordError,\r\n      });\r\n    default:\r\n      return state;\r\n  }\r\n}\r\nfunction login(\r\n  state = {\r\n    isLoggingIn: false,\r\n    isLoggedIn: false,\r\n    err: null,\r\n  },\r\n  action\r\n) {\r\n  switch (action.type) {\r\n    case REQUEST_USER_INFO:\r\n      return Object.assign({}, state, {\r\n        isLoggedIn: true,\r\n      });\r\n    case UNAUTHORIZED_ERROR:\r\n      return Object.assign({}, state, {\r\n        err: \"Username or Password do not match\",\r\n      });\r\n    case CLEAR_LOGIN_MODAL:\r\n      return Object.assign({}, state, {\r\n        err: null,\r\n      });\r\n    case LOGIN_REQUEST:\r\n      return Object.assign({}, state, {\r\n        isLoggingIn: true,\r\n        isLoggedIn: false,\r\n      });\r\n    case LOGIN_SUCCESS:\r\n      return Object.assign({}, state, {\r\n        isLoggingIn: false,\r\n        isLoggedIn: true,\r\n      });\r\n    case LOG_OUT:\r\n      return Object.assign({}, state, {\r\n        isLoggingIn: false,\r\n        isLoggedIn: false,\r\n      });\r\n    case LOGIN_ERROR:\r\n      return Object.assign({}, state, {\r\n        isLoggingIn: false,\r\n        isLoggedIn: false,\r\n      });\r\n    default:\r\n      return state;\r\n  }\r\n}\r\nfunction currentUser(\r\n  state = {\r\n    username: \"\",\r\n    _id: \"\",\r\n    err: null,\r\n  },\r\n  action\r\n) {\r\n  switch (action.type) {\r\n    case LOG_OUT:\r\n      return Object.assign({}, state, {\r\n        username: null,\r\n        _id: null,\r\n      });\r\n    case REFRESH_USER:\r\n      return Object.assign({}, state, {\r\n        username: action.userInfo.username,\r\n        _id: action.userInfo._id,\r\n      });\r\n    case LOGIN_SUCCESS:\r\n      return Object.assign({}, state, {\r\n        username: action.username,\r\n        _id: action.id,\r\n      });\r\n    case CURRENT_USER:\r\n      return Object.assign({}, state, {\r\n        isLoggedIn: true,\r\n        username: action.username,\r\n        _id: action.user,\r\n      });\r\n    default:\r\n      return state;\r\n  }\r\n}\r\nconst rootReducer = combineReducers({\r\n  comments,\r\n  currentModal,\r\n  changeNewSubmissionType,\r\n  posts,\r\n  login,\r\n  signup,\r\n  currentUser,\r\n  listings,\r\n});\r\nexport default rootReducer;\r\n","import { createBrowserHistory } from \"history\";\r\nimport React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { Provider } from \"react-redux\";\r\nimport { Router } from \"react-router\";\r\nimport { Route } from \"react-router-dom\";\r\nimport App from \"./App\";\r\nimport configureStore from \"./store/store\";\r\nconst store = configureStore();\r\nconst history = createBrowserHistory();\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Provider store={store}>\r\n      <Router history={history}>\r\n        <Route component={App} />\r\n      </Router>\r\n    </Provider>\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n);\r\n","import { applyMiddleware, createStore } from \"redux\";\r\nimport { composeWithDevTools } from \"redux-devtools-extension\";\r\nimport thunkMiddleware from \"redux-thunk\";\r\nimport { loadState } from \"../localStorage\";\r\nimport rootReducer from \"../reducers/reducer\";\r\nexport default function configureStore(preloadedState) {\r\n  const persistedState = loadState();\r\n  const composeEnhancers = composeWithDevTools({ trace: true });\r\n  return createStore(\r\n    rootReducer,\r\n    persistedState,\r\n    composeEnhancers(applyMiddleware(thunkMiddleware))\r\n  );\r\n}\r\n","export const loadState = () => {\r\n  try {\r\n    const serializedState = localStorage.getItem(\"state\");\r\n    if (serializedState === null) {\r\n      return undefined;\r\n    }\r\n    return JSON.parse(serializedState);\r\n  } catch (err) {\r\n    return undefined;\r\n  }\r\n};\r\nexport const saveState = (state) => {\r\n  try {\r\n    const serializedState = JSON.stringify(state);\r\n    localStorage.setItem(\"state\", serializedState);\r\n  } catch {}\r\n};\r\n"],"sourceRoot":""}