{"version":3,"sources":["types.js","schemas.js","actions/postActions.js","actions/userActions.js","images/image-placeholder.svg","images/link-post.svg","images/reddit-default.svg","images/delete.svg","webpack:///./src/images/down-arrow.svg?0968","webpack:///./src/images/up-arrow.svg?3f43","components/Post.jsx","components/Login.jsx","components/Signup.jsx","components/Home.jsx","images/magnifying-glass.svg","images/Triangle.svg","images/hamburger.svg","components/Navbar.jsx","components/NewPost.jsx","actions/commentActions.js","images/down-arrow.svg","images/edit.svg","images/up-arrow.svg","components/Comment.jsx","components/PostModal.jsx","App.js","reducers/reducer.js","localStorage.js","index.js","store/store.js"],"names":["REQUEST_POSTS","RECEIVE_POSTS","RECEIVE_SINGLE_POSTS","LOGIN_REQUEST","LOGIN_SUCCESS","LOGIN_ERROR","SIGNUP_REQUEST","SIGNUP_SUCCESS","SIGNUP_ERROR","CURRENT_USER","POST_CREATION_CHANGE_SUBMISSION_TYPE","NEW_POST_SUCCESS","NEW_POST_REQUEST","NEW_COMMENT_SUCCESS","NEW_REPLY_REQUEST","NEW_REPLY_SUCCESS","VOTE_CAST","NEXT_PAGE","PREV_PAGE","DELETE_POST","EDIT_POST","LOG_OUT","CLEAR_ERROR","SET_POST_MODAL","SPLICED_POST","REFRESH_USER","SET_POST","UNAUTHORIZED_ERROR","SORT_POSTS","CLEAR_LOGIN_MODAL","comment","schema","Entity","idAttribute","comments","Array","define","post","requestPosts","type","splicePost","id","dispatch","getState","newObj","allIds","posts","allPosts","byId","arrayOfPosts","map","splicedArray","filter","postId","newPost","_id","receivePosts","data","sort","arrayOfNewIds","createdPosts","Object","keys","newPostSubmissionType","postType","changePostSubmissionType","currentValue","changeNewSubmissionType","submissionType","changePoint","point","currentPostId","currentVoteState","voteState","axios","url","method","withCredentials","submitPostAttempt","submitPost","form","then","res","status","submitPostSuccess","prevPage","count","currentPosts","arrayOfCurrentPosts","normalizedData","normalize","idsofNewData","result","newPostsArray","entities","newPosts","nextPage","fetchPosts","params","lastId","undefined","firstId","fetchSinglePost","temp","receiveSinglePost","login","username","password","Promise","resolve","loginSuccess","jwt_token","token","localStorage","setItem","catch","loggedIn","getItem","user","error","userInfo","err","loginError","signup","passwordConfirm","passwordError","response","interceptors","request","use","config","accessToken","headers","_extends","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","_ref2","d","points","_ref3","_ref4","_ref5","_ref6","_ref7","_ref8","_ref9","_ref10","_ref11","_ref12","_ref13","_ref14","_ref15","_ref16","_ref17","SvgDelete","_ref","svgRef","title","titleId","props","x","y","viewBox","xmlSpace","ref","ForwardRef","transform","SvgDownArrow","width","height","SvgUpArrow","Post","pastParams","firstPost","useState","deleteButton","setDelete","active","setActive","useDispatch","postStore","useSelector","state","currentUser","postStatus","confirmedDelete","deletePost","className","author","to","pathname","modal","homePosts","alt","voteTotal","onClick","Login","setUsername","setPassword","isLoggedIn","close","onChange","e","value","placeholder","window","location","reload","Signup","setPasswordConfirm","useEffect","connect","ownProps","indexofFirst","indexOfLast","sortedByHot","sortedByTop","sortedByNew","sortedByDefault","queryParams","search","after","URLSearchParams","get","before","listings","listingOrder","hot","sortOrder","default","top","new","test","flattened","match","slice","isExact","query","push","sortedDefault","sortedHot","sortedTop","sortedNew","useParams","history","document","body","style","overflow","filteredPosts","handleSort","sortType","sortBy","showSignup","src","defaultPic","handleShowLogin","imagePost","linkPost","page","handlePrevPage","handleShowNextPage","withRouter","useHistory","useLocation","dropdown","setDropDown","searchInput","setSearchInput","authDropDown","setAuthDropDown","searchContent","setSearchContent","searchActive","setSearchActive","currentModal","handleDropDown","handleSearchContent","a","trimStart","trimmed","RegExp","filtered","handleCloseSearch","closeSearch","addEventListener","removeEventListener","replace","path","searchicon","backgroundColor","triangle","removeItem","handleShowSignup","hamburger","NewPost","newQuery","newQuery2","setTitle","text","setText","imagedata","setImage","submitCheck","submitted","reRouteId","replaceState","action","files","name","cols","rows","preventDefault","FormData","append","uploadForm","newCommentSuccess","savedComment","console","log","changeCommentPoint","commentId","currentCommentId","_ref18","SvgEdit","Comment","allComments","allId","replyText","setReplyText","replyToggle","setReplyToggle","nestedComments","marginLeft","marginTop","upvote","downvote","authorName","content","newReply","commentText","setCommentText","edit","setEdit","editText","setEditText","currentPost","handleSubmitComment","submittedComment","saveEdit","includes","date","Date","createdAt","formatDate","Intl","DateTimeFormat","format","goBack","stopPropagation","image","showLogin","setLogin","setShowSignup","urlAfter","setUrlAfter","urlBefore","setUrlBefore","loggedInStatus","signedUpStatus","isSignedUp","closeModal","lastId2","scrollTo","firstId2","exact","render","props2","addComment","parentId","changePostPoint","handlePostSubmission","submitting","editPostReduce","handlePreviousPage","idsOfNewPosts","idsOfCurrentPosts","currentPostsArray","temp2","concat","finalArrayOfIds","isFetching","handleNextPage","idsofCurrentPosts","setListings","nextPageListing","currentPostsSorted","currentPostsDefault","prevPageListing","receievePosts","index","splice","setPostModal","commentIds","addCommentEntry","rootReducer","combineReducers","newid","pageNumber","currentPage","first_id","last_id","isLoggingIn","isSigningUp","saveState","serializedState","JSON","stringify","store","preloadedState","persistedState","parse","loadState","composeEnhancers","composeWithDevTools","trace","createStore","applyMiddleware","thunkMiddleware","configureStore","subscribe","createBrowserHistory","ReactDOM","StrictMode","component","App","getElementById"],"mappings":"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","file":"static/js/main.63268d2e.chunk.js","sourcesContent":["export const REQUEST_POSTS = \"REQUEST_POSTS\";\r\nexport const RECEIVE_POSTS = \"RECEIVE_POSTS\";\r\nexport const REQUEST_SINGLE_POST = \"REQUEST_SINGLE_POST\";\r\nexport const RECEIVE_SINGLE_POSTS = \"RECEIVE_SINGLE_POSTS\";\r\nexport const LOGIN_REQUEST = \"LOGIN_REQUEST\";\r\nexport const LOGIN_SUCCESS = \"LOGIN_SUCCESS\";\r\nexport const LOGIN_ERROR = \"LOGIN_ERROR\";\r\nexport const SIGNUP_REQUEST = \"SIGNUP_REQUEST\";\r\nexport const SIGNUP_SUCCESS = \"SIGNUP_SUCCESS\";\r\nexport const SIGNUP_ERROR = \"SIGNUP_ERROR\";\r\nexport const CURRENT_USER = \"CURRENT_USER\";\r\nexport const POST_CREATION_CHANGE_SUBMISSION_TYPE =\r\n  \"POST_CREATION_CHANGE_SUBMISSION_TYPE\";\r\nexport const NEW_POST_SUCCESS = \"NEW_POST_SUCCESS\";\r\nexport const NEW_POST_REQUEST = \"NEW_POST_REQUEST\";\r\nexport const RESET_POST = \"RESET_POST\";\r\nexport const NEW_COMMENT_REQUEST = \"NEW_COMMENT_REQUEST\";\r\nexport const NEW_COMMENT_SUCCESS = \"NEW_COMMENT_SUCCESS\";\r\nexport const CHANGE_TO_MEDIA = \"CHANGE_TO_MEDIA\";\r\nexport const NEW_REPLY_REQUEST = \"NEW_REPLY_REQUEST\";\r\nexport const NEW_REPLY_SUCCESS = \"NEW_REPLY_SUCCESS\";\r\nexport const VOTE_CAST = \"VOTE_CAST\";\r\nexport const NEXT_PAGE = \"NEXT_PAGE\";\r\nexport const PREV_PAGE = \"PREV_PAGE\";\r\nexport const DELETE_POST = \"DELETE_POST\";\r\nexport const EDIT_POST = \"EDIT_POST\";\r\nexport const LOG_OUT = \"LOG_OUT\";\r\nexport const CLEAR_ERROR = \"CLEAR_ERROR\";\r\nexport const LOGIN_FAILURE = \"LOGIN_FAILURE\";\r\nexport const SET_POST_MODAL = \"SET_POST_MODAL\";\r\nexport const SPLICED_POST = \"SPLICED_POST\";\r\nexport const REFRESH_USER = \"REFRESH_USER\";\r\nexport const SET_POST = \"SET_POST\";\r\nexport const UNAUTHORIZED_ERROR = \"UNAUTHORIZED_ERROR\";\r\nexport const SORT_POSTS = \"SORT_POSTS\";\r\nexport const GET_SINGLE_POST = \"GET_SINGLE_POST\";\r\nexport const CLEAR_LOGIN_MODAL = \"CLEAR_LOGIN_MODAL\";\r\n","import { normalize, schema } from \"normalizr\";\r\n\r\nexport const comment = new schema.Entity(\r\n  \"comments\",\r\n  {},\r\n  { idAttribute: \"_id\" }\r\n);\r\n\r\nexport const comments = new schema.Array(comment);\r\ncomment.define({ comments });\r\nexport const post = new schema.Entity(\r\n  \"posts\",\r\n  {\r\n    comments: [comment],\r\n  },\r\n  { idAttribute: \"_id\" }\r\n);\r\n","import {\r\n  RECEIVE_POSTS,\r\n  REQUEST_POSTS,\r\n  REQUEST_SINGLE_POST,\r\n  RECEIVE_SINGLE_POSTS,\r\n  POST_CREATION_CHANGE_SUBMISSION_TYPE,\r\n  NEW_POST_SUCCESS,\r\n  NEW_POST_REQUEST,\r\n  RESET_POST,\r\n  CHANGE_TO_MEDIA,\r\n  VOTE_CAST,\r\n  NEXT_PAGE,\r\n  PREV_PAGE,\r\n  DELETE_POST,\r\n  EDIT_POST,\r\n  SET_POST_MODAL,\r\n  SPLICED_POST,\r\n  SET_POST,\r\n  SORT_POSTS,\r\n} from \"../types\";\r\nimport { normalize } from \"normalizr\";\r\nimport { post } from \"../schemas\";\r\nimport axios from \"axios\";\r\n\r\nfunction requestPosts() {\r\n  return {\r\n    type: REQUEST_POSTS,\r\n  };\r\n}\r\nexport function splicePost(id) {\r\n  return (dispatch, getState) => {\r\n    let newObj = {};\r\n    const allIds = getState().posts.allIds;\r\n    const allPosts = getState().posts.byId;\r\n    const arrayOfPosts = allIds.map((post) => {\r\n      return allPosts[post];\r\n    });\r\n    let splicedArray = allIds.filter((postId) => {\r\n      if (id !== postId) {\r\n        return postId;\r\n      }\r\n    });\r\n    let splicedPosts = arrayOfPosts.filter((post) => {\r\n      if (!post.newPost && post._id !== id) {\r\n        return post;\r\n      }\r\n    });\r\n    splicedPosts.map((post) => {\r\n      newObj[post._id] = post;\r\n    });\r\n\r\n    dispatch({ type: SPLICED_POST, newObj, splicedArray });\r\n  };\r\n}\r\nfunction receivePosts(data, sort) {\r\n  return (dispatch, getState) => {\r\n    let arrayOfNewIds = getState().posts.createdPosts;\r\n    arrayOfNewIds = Object.keys(arrayOfNewIds);\r\n    const currentPostIds = getState().posts.allIds;\r\n\r\n    dispatch({\r\n      type: RECEIVE_POSTS,\r\n      data,\r\n      arrayOfNewIds,\r\n      sort,\r\n    });\r\n  };\r\n}\r\n\r\nfunction submitPostSuccess(post) {\r\n  let id = post._id;\r\n  post[\"newPost\"] = true;\r\n  return (dispatch, getState) => {\r\n    dispatch({ type: NEW_POST_SUCCESS, post, id });\r\n  };\r\n}\r\n\r\nexport function newPostSubmissionType(postType) {\r\n  return (dispatch, getState) => {\r\n    dispatch({ type: POST_CREATION_CHANGE_SUBMISSION_TYPE, postType });\r\n  };\r\n}\r\nexport function changePostSubmissionType(postType) {\r\n  return (dispatch, getState) => {\r\n    let currentValue = getState().changeNewSubmissionType.submissionType;\r\n\r\n    if (postType === currentValue) {\r\n      return;\r\n    } else {\r\n      dispatch({\r\n        type: POST_CREATION_CHANGE_SUBMISSION_TYPE,\r\n        postType,\r\n      });\r\n    }\r\n  };\r\n}\r\n\r\nexport function changePoint(point, postId) {\r\n  return (dispatch, getState) => {\r\n    let currentPostId = postId;\r\n    let currentPost = getState().posts.byId[currentPostId];\r\n    let currentVoteState = currentPost.voteState;\r\n    dispatch({\r\n      type: VOTE_CAST,\r\n      postId,\r\n      point,\r\n      currentVoteState,\r\n    });\r\n    if (point === 1) {\r\n      return axios({\r\n        url: `/api/posts/vote-up/${currentPostId}`,\r\n        method: \"PUT\",\r\n        withCredentials: true,\r\n      });\r\n    }\r\n    if (point === -1) {\r\n      return axios({\r\n        url: `/api/posts/vote-down/${currentPostId}`,\r\n        method: \"PUT\",\r\n        withCredentials: true,\r\n      });\r\n    }\r\n  };\r\n}\r\nexport function setPostModal(post) {\r\n  return {\r\n    type: SET_POST_MODAL,\r\n    post,\r\n  };\r\n}\r\nexport function submitPostAttempt() {\r\n  return {\r\n    type: NEW_POST_REQUEST,\r\n  };\r\n}\r\nexport function submitPost(form) {\r\n  return (dispatch) => {\r\n    return axios({\r\n      url: `/api/post/new/`,\r\n      method: \"POST\",\r\n      data: form,\r\n\r\n      withCredentials: true,\r\n    }).then((res) => {\r\n      if (res.status === 200) {\r\n        dispatch(submitPostSuccess(res.data));\r\n      }\r\n    });\r\n  };\r\n}\r\nfunction requestSinglePost() {\r\n  return {\r\n    type: REQUEST_SINGLE_POST,\r\n  };\r\n}\r\nexport function reset() {\r\n  return {\r\n    type: RESET_POST,\r\n  };\r\n}\r\nfunction receiveSinglePost(post) {\r\n  let temp = {};\r\n  let id = post._id;\r\n\r\n  temp[post._id] = post;\r\n  return {\r\n    type: RECEIVE_SINGLE_POSTS,\r\n    id,\r\n    temp,\r\n  };\r\n}\r\nexport function deletePost(postId) {\r\n  return (dispatch) => {\r\n    dispatch({ type: DELETE_POST, postId });\r\n    return axios({\r\n      url: `/api/delete/${postId}`,\r\n      method: \"DELETE\",\r\n      withCredentials: true,\r\n    });\r\n  };\r\n}\r\nexport function editPost(postId, content) {\r\n  return (dispatch, getState) => {\r\n    dispatch({ type: EDIT_POST, postId, content });\r\n    return axios({\r\n      url: `/api/edit/${postId}`,\r\n      method: \"PUT\",\r\n      withCredentials: true,\r\n      data: {\r\n        content: content,\r\n      },\r\n    });\r\n  };\r\n}\r\nexport function prevPage(count, id, sort) {\r\n  return (dispatch, getState) => {\r\n    let currentPosts = getState().posts.byId;\r\n    let currentPostsIds = getState().posts.allIds;\r\n\r\n    let arrayOfCurrentPosts = currentPostsIds.map((id) => {\r\n      return currentPosts[id];\r\n    });\r\n\r\n    dispatch(requestPosts());\r\n    if (sort) {\r\n      return axios({\r\n        url: `/api/posts/${sort}?page[size]=${count}&firstId=${id}`,\r\n        method: \"GET\",\r\n        withCredentials: true,\r\n      }).then((posts) => {\r\n        const normalizedData = normalize(posts.data, [post]);\r\n        const idsofNewData = normalizedData.result;\r\n        const newPostsArray = idsofNewData.map((id) => {\r\n          return normalizedData.entities.posts[id];\r\n        });\r\n        const newPosts = normalizedData.entities.posts;\r\n        dispatch({\r\n          type: PREV_PAGE,\r\n          idsofNewData,\r\n          sort,\r\n          newPosts,\r\n          newPostsArray,\r\n          currentPosts,\r\n          arrayOfCurrentPosts,\r\n        });\r\n      });\r\n    }\r\n    if (!sort) {\r\n      return axios({\r\n        url: `/api/posts?page[size]=${count}&firstId=${id}`,\r\n        method: \"GET\",\r\n        withCredentials: true,\r\n      }).then((posts) => {\r\n        const normalizedData = normalize(posts.data, [post]);\r\n        const idsofNewData = normalizedData.result;\r\n        const newPostsArray = idsofNewData.map((id) => {\r\n          return normalizedData.entities.posts[id];\r\n        });\r\n        const newPosts = normalizedData.entities.posts;\r\n        dispatch({\r\n          type: PREV_PAGE,\r\n          idsofNewData,\r\n          newPosts,\r\n          sort,\r\n\r\n          newPostsArray,\r\n          currentPosts,\r\n          arrayOfCurrentPosts,\r\n        });\r\n        return \"completed\";\r\n      });\r\n    }\r\n  };\r\n}\r\nexport function nextPage(count, id, sort) {\r\n  return (dispatch, getState) => {\r\n    let currentPosts = getState().posts.byId;\r\n    let currentPostsIds = getState().posts.allIds;\r\n\r\n    let arrayOfCurrentPosts = currentPostsIds.map((id) => {\r\n      return currentPosts[id];\r\n    });\r\n\r\n    dispatch(requestPosts());\r\n\r\n    if (sort) {\r\n      return axios({\r\n        url: `/api/posts/${sort}?page[size]=${count}&lastId=${id}`,\r\n        method: \"GET\",\r\n        withCredentials: true,\r\n      }).then((posts) => {\r\n        const normalizedData = normalize(posts.data, [post]);\r\n        const idsofNewData = normalizedData.result;\r\n        const newPostsArray = idsofNewData.map((id) => {\r\n          return normalizedData.entities.posts[id];\r\n        });\r\n        const newPosts = normalizedData.entities.posts;\r\n        dispatch({\r\n          type: NEXT_PAGE,\r\n          sort,\r\n          idsofNewData,\r\n          newPosts,\r\n          newPostsArray,\r\n          currentPosts,\r\n          arrayOfCurrentPosts,\r\n        });\r\n      });\r\n    }\r\n    if (!sort) {\r\n      return axios({\r\n        url: `/api/posts?page[size]=${count}&lastId=${id}`,\r\n        method: \"GET\",\r\n        withCredentials: true,\r\n      }).then((posts) => {\r\n        const normalizedData = normalize(posts.data, [post]);\r\n        const idsofNewData = normalizedData.result;\r\n        const newPostsArray = idsofNewData.map((id) => {\r\n          return normalizedData.entities.posts[id];\r\n        });\r\n        const newPosts = normalizedData.entities.posts;\r\n        dispatch({\r\n          type: NEXT_PAGE,\r\n          idsofNewData,\r\n          newPosts,\r\n          newPostsArray,\r\n          currentPosts,\r\n          arrayOfCurrentPosts,\r\n        });\r\n        return \"completed\";\r\n      });\r\n    }\r\n  };\r\n}\r\nexport function sortBy(sortType) {\r\n  return (dispatch, getState) => {\r\n    let currentPosts = getState().posts.byId;\r\n    let currentPostsIds = getState().posts.allIds;\r\n\r\n    let arrayOfCurrentPosts = currentPostsIds.map((id) => {\r\n      return currentPosts[id];\r\n    });\r\n    dispatch(requestPosts());\r\n\r\n    return axios({\r\n      url: `/api/posts/${sortType}`,\r\n      method: \"GET\",\r\n      withCredentials: true,\r\n    }).then((posts) => {\r\n      const normalizedData = normalize(posts.data, [post]);\r\n      const idsofNewData = normalizedData.result;\r\n\r\n      const newPostsArray = idsofNewData.map((id) => {\r\n        return normalizedData.entities.posts[id];\r\n      });\r\n      const newPosts = normalizedData.entities.posts;\r\n      dispatch({\r\n        type: SORT_POSTS,\r\n        idsofNewData,\r\n        newPosts,\r\n        sortType,\r\n        newPostsArray,\r\n        currentPosts,\r\n        arrayOfCurrentPosts,\r\n      });\r\n      if (posts.data.status === 200) {\r\n        return \"fetched\";\r\n      }\r\n    });\r\n  };\r\n}\r\n\r\nexport function setPostRange(before, after) {\r\n  return { type: SET_POST, before, after };\r\n}\r\nexport function fetchPosts(count, id, params) {\r\n  return (dispatch, getState) => {\r\n    const currentPosts = getState().posts.byId;\r\n\r\n    dispatch(requestPosts());\r\n    if (params) {\r\n      if (!count) {\r\n        return axios({\r\n          url: `/api/posts/${params}`,\r\n          method: \"GET\",\r\n          withCredentials: true,\r\n        }).then((posts) => {\r\n          const normalizedData = normalize(posts.data, [post]);\r\n\r\n          dispatch(receivePosts(normalizedData, params));\r\n        });\r\n      }\r\n      if (\"lastId\" in id) {\r\n        return axios({\r\n          url: `/api/posts/${params}?page[size]=${count}&lastId=${id.lastId}`,\r\n          method: \"GET\",\r\n          withCredentials: true,\r\n        }).then((posts) => {\r\n          const normalizedData = normalize(posts.data, [post]);\r\n\r\n          dispatch(receivePosts(normalizedData, params));\r\n        });\r\n      }\r\n      if (\"firstId\" in id) {\r\n        if (id === undefined) {\r\n          return;\r\n        }\r\n        return axios({\r\n          url: `/api/posts/${params}?page[size]=${count}&firstId=${id.firstId}`,\r\n          method: \"GET\",\r\n          withCredentials: true,\r\n        }).then((posts) => {\r\n          const normalizedData = normalize(posts.data, [post]);\r\n          dispatch(receivePosts(normalizedData, params));\r\n        });\r\n      }\r\n    }\r\n    if (!count && !params) {\r\n      return axios({\r\n        url: `/api/posts`,\r\n        method: \"GET\",\r\n        withCredentials: true,\r\n      }).then((posts) => {\r\n        const normalizedData = normalize(posts.data, [post]);\r\n\r\n        dispatch(receivePosts(normalizedData));\r\n      });\r\n    }\r\n    if (\"lastId\" in id) {\r\n      return axios({\r\n        url: `/api/posts/?page[size]=${count}&lastId=${id.lastId}`,\r\n        method: \"GET\",\r\n        withCredentials: true,\r\n      }).then((posts) => {\r\n        const normalizedData = normalize(posts.data, [post]);\r\n\r\n        dispatch(receivePosts(normalizedData));\r\n      });\r\n    }\r\n    if (\"firstId\" in id) {\r\n      if (id === undefined) {\r\n        return;\r\n      }\r\n      return axios({\r\n        url: `/api/posts?page[size]=${count}&firstId=${id.firstId}`,\r\n        method: \"GET\",\r\n        withCredentials: true,\r\n      }).then((posts) => {\r\n        const normalizedData = normalize(posts.data, [post]);\r\n        dispatch(receivePosts(normalizedData));\r\n      });\r\n    }\r\n  };\r\n}\r\nexport function fetchSinglePost(id) {\r\n  return (dispatch) => {\r\n    dispatch(requestSinglePost());\r\n    return axios({\r\n      url: `/api/post/${id}`,\r\n      method: \"GET\",\r\n      withCredentials: true,\r\n    }).then((post) => {\r\n      dispatch(receiveSinglePost(post.data));\r\n    });\r\n  };\r\n}\r\n","import axios from \"axios\";\r\nimport {\r\n  CURRENT_USER,\r\n  LOGIN_ERROR,\r\n  LOGIN_REQUEST,\r\n  LOGIN_SUCCESS,\r\n  LOG_OUT,\r\n  REFRESH_USER,\r\n  SIGNUP_ERROR,\r\n  SIGNUP_REQUEST,\r\n  SIGNUP_SUCCESS,\r\n  UNAUTHORIZED_ERROR,\r\n  CLEAR_LOGIN_MODAL,\r\n} from \"../types\";\r\n\r\naxios.interceptors.request.use((config) => {\r\n  const accessToken = localStorage.getItem(\"accessToken\");\r\n  if (accessToken) {\r\n    config.headers[\"Authorization\"] = `Bearer ${accessToken}`;\r\n  }\r\n  return config;\r\n});\r\n\r\nfunction loginRequest() {\r\n  return {\r\n    type: LOGIN_REQUEST,\r\n  };\r\n}\r\nfunction loginError(err) {\r\n  return (dispatch) => {\r\n    axios({\r\n      withCredentials: true,\r\n      method: \"POST\",\r\n\r\n      url: \"/api/logout\",\r\n    });\r\n    dispatch({ type: LOGIN_ERROR, err });\r\n  };\r\n}\r\nfunction loginSuccess(username, id) {\r\n  return (dispatch) => {\r\n    dispatch({\r\n      type: LOGIN_SUCCESS,\r\n      username,\r\n      id,\r\n    });\r\n    Promise.resolve(\"success\");\r\n  };\r\n}\r\nexport function logOut() {\r\n  return (dispatch) => {\r\n    dispatch({ type: LOG_OUT });\r\n    return axios({\r\n      url: \"/api/logout\",\r\n      withCredentials: true,\r\n      method: \"POST\",\r\n    }).then((res) => {\r\n      if (res.status === 200) {\r\n        localStorage.removeItem(\"accessToken\");\r\n        localStorage.removeItem(\"state\");\r\n        return \"success\";\r\n      }\r\n    });\r\n  };\r\n}\r\nfunction currentUser(user) {\r\n  return {\r\n    type: CURRENT_USER,\r\n    user,\r\n  };\r\n}\r\nfunction unauthorized(err) {\r\n  return {\r\n    type: UNAUTHORIZED_ERROR,\r\n  };\r\n}\r\nexport function login(username, password) {\r\n  return (dispatch) => {\r\n    dispatch(loginRequest());\r\n\r\n    return axios({\r\n      withCredentials: true,\r\n      method: \"POST\",\r\n      data: {\r\n        username: username,\r\n        password: password,\r\n      },\r\n\r\n      url: \"/api/login\",\r\n    })\r\n      .then((res) => {\r\n        if (res.status === 200) {\r\n          dispatch(loginSuccess(res.data.username, res.data._id));\r\n          let token = res.data.jwt_token;\r\n          return token;\r\n        }\r\n      })\r\n      .then((token) => {\r\n        localStorage.setItem(\"accessToken\", token);\r\n        return \"login\";\r\n      })\r\n      .catch(() => {\r\n        dispatch(unauthorized());\r\n      });\r\n  };\r\n}\r\nexport function clearLoginModal() {\r\n  return {\r\n    type: CLEAR_LOGIN_MODAL,\r\n  };\r\n}\r\nexport function loggedIn() {\r\n  return (dispatch, getState) => {\r\n    const token = localStorage.getItem(\"accessToken\");\r\n\r\n    if (!token) {\r\n      return;\r\n    }\r\n    return axios({\r\n      withCredentials: true,\r\n      method: \"GET\",\r\n      url: \"/api/logged-in\",\r\n    })\r\n      .then((res) => {\r\n        if (res.status === 200) {\r\n          dispatch(\r\n            currentUser({\r\n              username: res.data.username,\r\n              _id: res.data._id,\r\n            })\r\n          );\r\n        }\r\n\r\n        if (res.data.error === \"jwt expired\") {\r\n          axios({\r\n            url: \"/api/refresh\",\r\n            withCredentials: true,\r\n            method: \"POST\",\r\n          }).then((res) => {\r\n            if (res.status === 200) {\r\n              let token = res.data.jwt_token;\r\n              dispatch({ type: REFRESH_USER, userInfo: res.data });\r\n              localStorage.setItem(\"accessToken\", token);\r\n            }\r\n          });\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        if (err) {\r\n          dispatch(loginError());\r\n        }\r\n      });\r\n  };\r\n}\r\nexport function signupRequest() {\r\n  return {\r\n    type: SIGNUP_REQUEST,\r\n  };\r\n}\r\nfunction signupSuccess() {\r\n  return {\r\n    type: SIGNUP_SUCCESS,\r\n  };\r\n}\r\nexport function signup(username, password, passwordConfirm) {\r\n  return (dispatch) => {\r\n    dispatch({ type: SIGNUP_REQUEST });\r\n\r\n    return axios({\r\n      url: \"/api/signup\",\r\n      data: {\r\n        username,\r\n        password,\r\n        passwordConfirm,\r\n      },\r\n      method: \"POST\",\r\n    })\r\n      .then((res) => {\r\n        if (res.status === 200) {\r\n          dispatch(signupSuccess());\r\n          return \"signup\";\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        let error = err.response.data;\r\n        let passwordError;\r\n        if (password !== passwordConfirm) {\r\n          passwordError = \"Passwords do not match\";\r\n        }\r\n        dispatch({ type: SIGNUP_ERROR, error, passwordError });\r\n      });\r\n  };\r\n}\r\n","export default __webpack_public_path__ + \"static/media/image-placeholder.1c6a32aa.svg\";","export default __webpack_public_path__ + \"static/media/link-post.cdb86b79.svg\";","export default __webpack_public_path__ + \"static/media/reddit-default.f7d549ef.svg\";","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"g\", null, /*#__PURE__*/React.createElement(\"g\", null, /*#__PURE__*/React.createElement(\"g\", null, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M64,341.333C64,364.907,83.093,384,106.667,384h170.667C300.907,384,320,364.907,320,341.333v-256H64V341.333z\"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  points: \"266.667,21.333 245.333,0 138.667,0 117.333,21.333 42.667,21.333 42.667,64 341.333,64 341.333,21.333  \"\n}))));\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref4 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref5 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref6 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref7 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref8 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref9 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref10 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref11 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref12 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref13 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref14 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref15 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref16 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref17 = /*#__PURE__*/React.createElement(\"g\", null);\n\nfunction SvgDelete(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    id: \"Capa_1\",\n    x: \"0px\",\n    y: \"0px\",\n    viewBox: \"0 0 384 384\",\n    xmlSpace: \"preserve\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2, _ref3, _ref4, _ref5, _ref6, _ref7, _ref8, _ref9, _ref10, _ref11, _ref12, _ref13, _ref14, _ref15, _ref16, _ref17);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgDelete);\nexport default __webpack_public_path__ + \"static/media/delete.f33ba89f.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"g\", {\n  id: \"Page-1\"\n}, /*#__PURE__*/React.createElement(\"g\", {\n  id: \"Desktop-(Card)\",\n  transform: \"translate(-516.000000, -289.000000)\"\n}, /*#__PURE__*/React.createElement(\"g\", {\n  id: \"Group-6\",\n  transform: \"translate(428.000000, 154.000000)\"\n}, /*#__PURE__*/React.createElement(\"g\", {\n  id: \"Group\",\n  transform: \"translate(16.000000, 134.000000)\"\n}, /*#__PURE__*/React.createElement(\"g\", {\n  id: \"down-arrow-copy\",\n  transform: \"translate(72.000000, 1.000000)\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M12.2275497,7.76096702 C12.1820052,7.65192943 12.0757255,7.58077755 11.957786,7.58077755 L8.75858504,7.58077755 L8.75858504,0.291577829 C8.75858504,0.130631897 8.62778141,0 8.4666239,0 L3.79538263,0 C3.63422512,0 3.50342149,0.130631897 3.50342149,0.291577829 L3.50342149,7.58080489 L0.291958509,7.58080489 C0.174019021,7.58080489 0.0677393658,7.65195676 0.0221948522,7.76042033 C-0.0227748808,7.86945792 0.00174908806,7.99484158 0.0852564863,8.07823934 L5.90969908,13.9142788 C5.96457693,13.9690846 6.03875099,14 6.1164011,14 C6.19405121,14 6.26822527,13.9690846 6.32310313,13.9148528 L12.1644881,8.07881337 C12.2479955,7.99538827 12.2730942,7.87003194 12.2275497,7.76096702 Z\",\n  id: \"Path\"\n}))))));\n\nfunction SvgDownArrow(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: \"13px\",\n    height: \"14px\",\n    viewBox: \"0 0 13 14\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title === undefined ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, \"down-arrow copy\") : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgDownArrow);\nexport default __webpack_public_path__ + \"static/media/down-arrow.c9c98d5d.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"g\", {\n  id: \"Page-1\"\n}, /*#__PURE__*/React.createElement(\"g\", {\n  id: \"Desktop-(Card)\",\n  transform: \"translate(-444.000000, -289.000000)\"\n}, /*#__PURE__*/React.createElement(\"g\", {\n  id: \"Group-6\",\n  transform: \"translate(428.000000, 154.000000)\"\n}, /*#__PURE__*/React.createElement(\"g\", {\n  id: \"Group\",\n  transform: \"translate(16.000000, 134.000000)\"\n}, /*#__PURE__*/React.createElement(\"g\", {\n  id: \"down-arrow\",\n  transform: \"translate(6.500000, 8.000000) scale(1, -1) translate(-6.500000, -8.000000) translate(0.000000, 1.000000)\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M12.2275497,7.76096702 C12.1820052,7.65192943 12.0757255,7.58077755 11.957786,7.58077755 L8.75858504,7.58077755 L8.75858504,0.291577829 C8.75858504,0.130631897 8.62778141,0 8.4666239,0 L3.79538263,0 C3.63422512,0 3.50342149,0.130631897 3.50342149,0.291577829 L3.50342149,7.58080489 L0.291958509,7.58080489 C0.174019021,7.58080489 0.0677393658,7.65195676 0.0221948522,7.76042033 C-0.0227748808,7.86945792 0.00174908806,7.99484158 0.0852564863,8.07823934 L5.90969908,13.9142788 C5.96457693,13.9690846 6.03875099,14 6.1164011,14 C6.19405121,14 6.26822527,13.9690846 6.32310313,13.9148528 L12.1644881,8.07881337 C12.2479955,7.99538827 12.2730942,7.87003194 12.2275497,7.76096702 Z\",\n  id: \"Path\"\n}))))));\n\nfunction SvgUpArrow(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: \"13px\",\n    height: \"14px\",\n    viewBox: \"0 0 13 14\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title === undefined ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, \"down-arrow\") : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgUpArrow);\nexport default __webpack_public_path__ + \"static/media/up-arrow.927fb299.svg\";\nexport { ForwardRef as ReactComponent };","import React, { useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { deletePost } from \"../actions/postActions\";\r\nimport { ReactComponent as Trash } from \"../images/delete.svg\";\r\nimport { ReactComponent as DownArrow } from \"../images/down-arrow.svg\";\r\nimport { ReactComponent as UpArrow } from \"../images/up-arrow.svg\";\r\n\r\nconst Post = ({ post, pastParams, firstPost }) => {\r\n  const [deleteButton, setDelete] = useState(false);\r\n  const [active, setActive] = useState(true);\r\n  const dispatch = useDispatch();\r\n  const postStore = useSelector((state) => {\r\n    return state.posts.allIds;\r\n  });\r\n  const currentUser = useSelector((state) => state.currentUser._id);\r\n  const postStatus = useSelector((state) => state.posts.status);\r\n  const handleDelete = () => {\r\n    setDelete(!deleteButton);\r\n  };\r\n  const confirmedDelete = (postId) => {\r\n    dispatch(deletePost(postId));\r\n    setActive(false);\r\n  };\r\n  if (post === \"loading\") {\r\n    return (\r\n      <div className=\"card-container\">\r\n        <div className=\"card-content-container\"></div>\r\n      </div>\r\n    );\r\n  }\r\n  if (!postStore[0]) {\r\n    return <div></div>;\r\n  }\r\n  return (\r\n    <>\r\n      {active ? (\r\n        <div key={post._id} className=\"card-container\">\r\n          {postStatus === \"loading\" ? (\r\n            <div></div>\r\n          ) : (\r\n            <div className=\"card-content-container\">\r\n              <p className=\"card-author\">u/{post.author.username}</p>\r\n              <h4 className=\"card-title\">\r\n                <Link\r\n                  to={{\r\n                    pathname: `/post/${post._id}`,\r\n                    state: {\r\n                      modal: true,\r\n                      homePosts: {\r\n                        params: pastParams.params,\r\n                        firstPost: firstPost._id,\r\n                      },\r\n                    },\r\n                  }}\r\n                >\r\n                  {post.title}\r\n                </Link>\r\n              </h4>\r\n              <div className=\"vote-container\">\r\n                <li>\r\n                  <UpArrow\r\n                    className={post.voteState === 1 ? `home-vote-color` : ``}\r\n                    alt=\"\"\r\n                  />\r\n                </li>\r\n                <li>{post.voteTotal}</li>\r\n\r\n                <li>\r\n                  <DownArrow\r\n                    className={post.voteState === -1 ? `home-vote-color` : ``}\r\n                    alt=\"\"\r\n                  />\r\n                </li>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {currentUser === post.author._id ? (\r\n            <div className=\"edit-del-container\">\r\n              <div className=\"edit-del-content\">\r\n                {deleteButton ? (\r\n                  <div className=\"delete-confirm-container\">\r\n                    <div>\r\n                      <p className=\"delete-confirm\">Delete?</p>\r\n                    </div>\r\n                    <li\r\n                      onClick={() => confirmedDelete(post._id)}\r\n                      className=\"delete-button-yes\"\r\n                    >\r\n                      Yes\r\n                    </li>\r\n                    <li className=\"delete-button-slash\">/</li>\r\n                    <li className=\"delete-button-yes\">No</li>\r\n                  </div>\r\n                ) : null}\r\n                <button onClick={handleDelete} className=\"delete-button\">\r\n                  <Trash className=\"del-svg\" />\r\n                </button>\r\n              </div>\r\n            </div>\r\n          ) : null}\r\n        </div>\r\n      ) : null}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Post;\r\n","import React, { useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { login } from \"../actions/userActions\";\r\nconst Login = (props) => {\r\n  const [username, setUsername] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const dispatch = useDispatch();\r\n  const user = useSelector((state) => {\r\n    return state.login.isLoggedIn;\r\n  });\r\n  const error = useSelector((state) => {\r\n    return state.login.err;\r\n  });\r\n  const handleLogin = () => {\r\n    dispatch(login(username, password)).then((x) => {\r\n      if (x === \"login\") {\r\n        window.location.reload();\r\n      }\r\n    });\r\n  };\r\n\r\n  if (user) {\r\n  }\r\n  return (\r\n    <div className=\"login-modal-wrapper\">\r\n      <div className=\"login-card-modal\">\r\n        <div className=\"login-modal-title-exit-container\">\r\n          <p className=\"login-modal-title\">Login</p>\r\n          <button onClick={props.close} className=\"login-cancel-button\">\r\n            X\r\n          </button>\r\n        </div>\r\n        <div className=\"login-input-container\">\r\n          <input\r\n            onChange={(e) => {\r\n              setUsername(e.target.value);\r\n            }}\r\n            className=\"login-input\"\r\n            placeholder=\"username\"\r\n            type=\"text\"\r\n          />\r\n          <input\r\n            onChange={(e) => {\r\n              setPassword(e.target.value);\r\n            }}\r\n            className=\"login-input\"\r\n            placeholder=\"password\"\r\n            type=\"password\"\r\n          />{\" \"}\r\n          <p className={`signup-error`}>{error}</p>\r\n          <button onClick={handleLogin} className=\"login-button\">\r\n            Log in\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { signup, signupRequest } from \"../actions/userActions\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { CLEAR_ERROR, SIGNUP_REQUEST } from \"../types\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport Login from \"./Login\";\r\nconst Signup = (props) => {\r\n  const [username, setUsername] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [passwordConfirm, setPasswordConfirm] = useState(\"\");\r\n  const [editActive, setEditActive] = useState(false);\r\n  const dispatch = useDispatch();\r\n  const user = useSelector((state) => {\r\n    return state.login.isLoggedIn;\r\n  });\r\n  const error = useSelector((state) => {\r\n    return state.signup.err;\r\n  });\r\n  const passwordError = useSelector((state) => {\r\n    return state.signup.passwordError;\r\n  });\r\n  const handleSignup = () => {\r\n    dispatch(signup(username, password, passwordConfirm)).then((res) => {\r\n      if (res === \"signup\") {\r\n        <Redirect to={Login}></Redirect>;\r\n      }\r\n    });\r\n  };\r\n  const handleError = () => {\r\n    dispatch({ type: CLEAR_ERROR });\r\n  };\r\n  if (user) {\r\n    window.location.reload();\r\n  }\r\n  useEffect(() => {\r\n    dispatch(signupRequest());\r\n  }, []);\r\n  return (\r\n    <div className=\"modal-wrapper\">\r\n      <div className=\"card-modal\">\r\n        <div className=\"login-modal-title-exit-container\">\r\n          <p className=\"login-modal-title\">Sign up</p>\r\n          <button onClick={props.close} className=\"login-cancel-button\">\r\n            X\r\n          </button>\r\n        </div>\r\n        <div className=\"login-input-container\">\r\n          <input\r\n            onChange={(e) => {\r\n              setUsername(e.target.value);\r\n            }}\r\n            onClick={handleError}\r\n            className=\"login-input\"\r\n            placeholder=\"username\"\r\n            type=\"text\"\r\n          />\r\n          <p className={`signup-error`}>{error}</p>\r\n          <input\r\n            onChange={(e) => {\r\n              setPassword(e.target.value);\r\n            }}\r\n            className=\"login-input\"\r\n            placeholder=\"password\"\r\n            type=\"password\"\r\n          />\r\n          <p className={`signup-error`}>{passwordError}</p>\r\n          <input\r\n            onChange={(e) => {\r\n              setPasswordConfirm(e.target.value);\r\n            }}\r\n            className=\"login-input\"\r\n            placeholder=\"Confirm your password\"\r\n            type=\"password\"\r\n          />\r\n\r\n          <button onClick={handleSignup} className=\"login-button\">\r\n            Sign up\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Signup;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { connect, useDispatch, useSelector } from \"react-redux\";\r\nimport { Link, useParams } from \"react-router-dom\";\r\nimport {\r\n  fetchPosts,\r\n  newPostSubmissionType,\r\n  sortBy,\r\n  submitPostAttempt,\r\n} from \"../actions/postActions\";\r\nimport imagePost from \"../images/image-placeholder.svg\";\r\nimport linkPost from \"../images/link-post.svg\";\r\nimport defaultPic from \"../images/reddit-default.svg\";\r\nimport Post from \"./Post\";\r\nimport Signup from \"./Signup\";\r\n\r\nconst Home = (props) => {\r\n  const dispatch = useDispatch();\r\n  const [firstIdPost, setFirstId] = useState(\"\");\r\n  const [lastIdPost, setLastId] = useState(\"\");\r\n  const allIds = useSelector((state) => {\r\n    return state.posts.allIds;\r\n  });\r\n  const post = useSelector((state) => {\r\n    return state.posts.byId;\r\n  });\r\n  let flattened = allIds.map((x) => {\r\n    return post[x];\r\n  });\r\n  const loggedIn = useSelector((state) => state.login.isLoggedIn);\r\n  const postStatus = useSelector((state) => state.posts.status);\r\n  const params = useParams();\r\n  const listingOrder = useSelector((state) => state.listings.listingOrder.hot);\r\n  let queryParams = props.history.location.search;\r\n  let count = new URLSearchParams(queryParams).get(\"count\");\r\n  let after = new URLSearchParams(queryParams).get(\"after\");\r\n  let before = new URLSearchParams(queryParams).get(\"before\");\r\n\r\n  useEffect(() => {\r\n    let temp = [];\r\n    document.body.style.overflow = \"\";\r\n    for (let i = 0; i < 10; i++) {\r\n      temp.push(flattened[i]);\r\n    }\r\n    if (params.sort === \"post\") {\r\n      dispatch(fetchPosts());\r\n    } else {\r\n      if (params.sort) {\r\n        if (count && after) {\r\n          const lastId = { lastId: after };\r\n          dispatch(fetchPosts(count, lastId, params.sort));\r\n        }\r\n        if (!count && !after && !before && params.sort) {\r\n          dispatch(fetchPosts(null, null, params.sort));\r\n        }\r\n        if (count && before) {\r\n          const firstId = { firstId: before };\r\n          dispatch(fetchPosts(count, firstId, params.sort));\r\n        }\r\n      }\r\n\r\n      if (!params.sort) {\r\n        if (count && after) {\r\n          const lastId = { lastId: after };\r\n\r\n          dispatch(fetchPosts(count, lastId));\r\n        }\r\n\r\n        if (count && before) {\r\n          const firstId = { firstId: before };\r\n          dispatch(fetchPosts(count, firstId));\r\n        }\r\n\r\n        if (!count && !after && !before) {\r\n          dispatch(fetchPosts());\r\n        }\r\n      }\r\n    }\r\n  }, []);\r\n  if (postStatus === \"idle\") {\r\n    return <div></div>;\r\n  }\r\n  const handleTextPost = () => {\r\n    if (!loggedIn) {\r\n      props.handleShowLogin();\r\n    }\r\n    dispatch(newPostSubmissionType(\"post\"));\r\n    dispatch(submitPostAttempt());\r\n  };\r\n  const handleImagePost = () => {\r\n    if (!loggedIn) {\r\n      props.handleShowLogin();\r\n    }\r\n    dispatch(newPostSubmissionType(\"media\"));\r\n    dispatch(submitPostAttempt());\r\n  };\r\n  const handleLinkPost = () => {\r\n    if (!loggedIn) {\r\n      props.handleShowLogin();\r\n    }\r\n    dispatch(newPostSubmissionType(\"link\"));\r\n    dispatch(submitPostAttempt());\r\n  };\r\n\r\n  const handleSort = (sortType) => {\r\n    dispatch(sortBy(sortType)).then((res) => {});\r\n  };\r\n\r\n  let check;\r\n  let lastId;\r\n  let firstId;\r\n  let filteredPosts;\r\n  try {\r\n    filteredPosts = props.posts.filter((posts) => {\r\n      if (posts !== undefined) {\r\n        return posts;\r\n      }\r\n    });\r\n    firstId = props.posts[0]._id;\r\n    lastId = filteredPosts[filteredPosts.length - 1]._id;\r\n  } catch (err) {}\r\n\r\n  return (\r\n    <>\r\n      <div className=\"home-wrapper\">\r\n        {props.showSignup ? <Signup /> : null}\r\n        <div className=\"new-post-container\">\r\n          <Link to=\"\">\r\n            <img className=\"new-post-profile-image\" src={defaultPic} alt=\"\" />\r\n          </Link>\r\n          <Link\r\n            onClick={handleTextPost}\r\n            to={loggedIn ? \"/new-post\" : \"\"}\r\n            className=\"new-post-input-container\"\r\n          >\r\n            <input\r\n              placeholder=\"Create Post\"\r\n              className=\"new-post-input\"\r\n              type=\"text\"\r\n            />\r\n          </Link>\r\n          <Link\r\n            onClick={handleImagePost}\r\n            to={loggedIn ? \"/new-post?media=true\" : \"\"}\r\n          >\r\n            <img className=\"post-option\" src={imagePost} alt=\"\" />\r\n          </Link>\r\n          <Link\r\n            onClick={handleLinkPost}\r\n            to={loggedIn ? \"/new-post?link=true\" : \"\"}\r\n          >\r\n            <img className=\"post-option\" src={linkPost} alt=\"\" />\r\n          </Link>\r\n        </div>\r\n\r\n        <div className=\"categories-container\">\r\n          <Link to=\"/hot\" onClick={() => handleSort(\"hot\")}>\r\n            Hot\r\n          </Link>\r\n          <Link to=\"/new\" onClick={() => handleSort(\"new\")}>\r\n            New\r\n          </Link>\r\n          <Link to=\"/top\" onClick={() => handleSort(\"top\")}>\r\n            Top\r\n          </Link>\r\n        </div>\r\n        {!props.posts || props.posts.length === 0 || !props.posts[0] ? (\r\n          <div></div>\r\n        ) : (\r\n          <>\r\n            <>\r\n              {props.posts.map((post) => {\r\n                if (post) {\r\n                  return (\r\n                    <Post\r\n                      firstPost={props.posts[0]}\r\n                      pastParams={props.match}\r\n                      history={props}\r\n                      key={post._id}\r\n                      post={post}\r\n                    />\r\n                  );\r\n                }\r\n              })}\r\n            </>\r\n            {post.length >= 10 ? (\r\n              <div className=\"page-set-container\">\r\n                {props.posts[0].page === 1 || !count ? null : (\r\n                  <Link\r\n                    to={{\r\n                      pathname: props.location.pathname,\r\n                      search: \"?\" + `count=10&before=${firstId}`,\r\n                    }}\r\n                    onClick={() => props.handlePrevPage(firstId, params.sort)}\r\n                  >\r\n                    Prev\r\n                  </Link>\r\n                )}\r\n                {props.posts[0].page === \"last\" ? null : (\r\n                  <Link\r\n                    to={{\r\n                      pathname: props.location.pathname,\r\n                      search: \"?\" + `count=10&after=${lastId}`,\r\n                    }}\r\n                    onClick={() =>\r\n                      props.handleShowNextPage(lastId, params.sort)\r\n                    }\r\n                  >\r\n                    Next\r\n                  </Link>\r\n                )}\r\n              </div>\r\n            ) : null}\r\n          </>\r\n        )}\r\n      </div>\r\n    </>\r\n  );\r\n};\r\nfunction mapStateToProps(state, ownProps) {\r\n  const allIds = state.posts.allIds;\r\n  const post = state.posts.byId;\r\n  let firstId;\r\n  let sortedByHot = [];\r\n  let sortedByTop = [];\r\n  let sortedByNew = [];\r\n  let sortedByDefault = [];\r\n  let lastId;\r\n  let queryParams = ownProps.location.search;\r\n  let after = new URLSearchParams(queryParams).get(\"after\");\r\n  let before = new URLSearchParams(queryParams).get(\"before\");\r\n  let indexofFirst;\r\n  let indexOfLast;\r\n\r\n  if (state.listings.listingOrder.hot && state.listings.sortOrder === \"hot\") {\r\n    firstId = before;\r\n    lastId = after;\r\n    sortedByHot = state.listings.listingOrder.hot;\r\n    indexofFirst = state.listings.listingOrder.hot.indexOf(firstId);\r\n    indexOfLast = state.listings.listingOrder.hot.indexOf(lastId);\r\n  }\r\n  if (\r\n    state.listings.listingOrder.default &&\r\n    state.listings.sortOrder === \"default\"\r\n  ) {\r\n    firstId = before;\r\n    lastId = after;\r\n    sortedByDefault = state.listings.listingOrder.default;\r\n    indexofFirst = state.listings.listingOrder.default.indexOf(firstId);\r\n    indexOfLast = state.listings.listingOrder.default.indexOf(lastId);\r\n  }\r\n  if (state.listings.listingOrder.top && state.listings.sortOrder === \"top\") {\r\n    firstId = before;\r\n    lastId = after;\r\n    sortedByTop = state.listings.listingOrder.top;\r\n    indexofFirst = state.listings.listingOrder.top.indexOf(firstId);\r\n    indexOfLast = state.listings.listingOrder.top.indexOf(lastId);\r\n  }\r\n  if (state.listings.listingOrder.new && state.listings.sortOrder === \"new\") {\r\n    firstId = before;\r\n    lastId = after;\r\n    sortedByNew = state.listings.listingOrder.new;\r\n    indexofFirst = state.listings.listingOrder.new.indexOf(firstId);\r\n    indexOfLast = state.listings.listingOrder.new.indexOf(lastId);\r\n  }\r\n  let flattened = allIds.map((x) => {\r\n    return post[x];\r\n  });\r\n\r\n  let currentPosts = state.posts.byId;\r\n\r\n  let test;\r\n  if (\r\n    ownProps.match.params.sort === \"default\" &&\r\n    state.listings.listingOrder.default\r\n  ) {\r\n    if (!after && !before) {\r\n      sortedByDefault = sortedByDefault.slice(0, 10);\r\n      sortedByDefault = sortedByDefault.map((id) => {\r\n        return state.posts.byId[id];\r\n      });\r\n      return {\r\n        posts: sortedByDefault,\r\n      };\r\n    }\r\n    if (after) {\r\n      sortedByDefault = sortedByDefault.slice(\r\n        indexOfLast + 1,\r\n        indexOfLast + 11\r\n      );\r\n      sortedByDefault = sortedByDefault.map((id) => {\r\n        return state.posts.byId[id];\r\n      });\r\n      return {\r\n        posts: sortedByDefault,\r\n      };\r\n    }\r\n    if (before && sortedByDefault.length >= 10) {\r\n      sortedByDefault = sortedByDefault.slice(indexofFirst - 10, indexofFirst);\r\n\r\n      sortedByDefault = sortedByDefault.map((id) => {\r\n        return state.posts.byId[id];\r\n      });\r\n\r\n      return {\r\n        posts: sortedByDefault,\r\n      };\r\n    }\r\n    if (before && sortedByDefault.length <= 10) {\r\n      sortedByDefault = sortedByDefault.map((id) => {\r\n        return state.posts.byId[id];\r\n      });\r\n      return {\r\n        posts: sortedByDefault,\r\n      };\r\n    }\r\n  }\r\n  if (ownProps.match.params.sort === \"hot\" && state.listings.listingOrder.hot) {\r\n    if (!after && !before) {\r\n      sortedByHot = sortedByHot.slice(0, 10);\r\n      sortedByHot = sortedByHot.map((id) => {\r\n        return state.posts.byId[id];\r\n      });\r\n      return {\r\n        posts: sortedByHot,\r\n      };\r\n    }\r\n    if (after) {\r\n      sortedByHot = sortedByHot.slice(indexOfLast + 1, indexOfLast + 11);\r\n      sortedByHot = sortedByHot.map((id) => {\r\n        return state.posts.byId[id];\r\n      });\r\n      return {\r\n        posts: sortedByHot,\r\n      };\r\n    }\r\n    if (before && sortedByHot.length >= 10) {\r\n      sortedByHot = sortedByHot.slice(indexofFirst - 10, indexofFirst);\r\n\r\n      sortedByHot = sortedByHot.map((id) => {\r\n        return state.posts.byId[id];\r\n      });\r\n\r\n      return {\r\n        posts: sortedByHot,\r\n      };\r\n    }\r\n    if (before && sortedByHot.length <= 10) {\r\n      sortedByHot = sortedByHot.map((id) => {\r\n        return state.posts.byId[id];\r\n      });\r\n      return {\r\n        posts: sortedByHot,\r\n      };\r\n    }\r\n  }\r\n  if (ownProps.match.params.sort === \"top\" && state.listings.listingOrder.top) {\r\n    if (!after && !before) {\r\n      sortedByTop = sortedByTop.slice(0, 10);\r\n      sortedByTop = sortedByTop.map((id) => {\r\n        return state.posts.byId[id];\r\n      });\r\n      return {\r\n        posts: sortedByTop,\r\n      };\r\n    }\r\n    if (after && sortedByTop.length > 10) {\r\n      sortedByTop = sortedByTop.slice(indexOfLast + 1, indexOfLast + 11);\r\n      sortedByTop = sortedByTop.map((id) => {\r\n        return state.posts.byId[id];\r\n      });\r\n      return {\r\n        posts: sortedByTop,\r\n      };\r\n    }\r\n\r\n    if (after && sortedByTop.length <= 10) {\r\n      sortedByTop = sortedByTop.map((id) => {\r\n        return state.posts.byId[id];\r\n      });\r\n\r\n      return {\r\n        posts: sortedByTop,\r\n      };\r\n    }\r\n    if (before && sortedByTop.length > 10) {\r\n      sortedByTop = sortedByTop.slice(indexofFirst - 10, indexofFirst);\r\n\r\n      sortedByTop = sortedByTop.map((id) => {\r\n        return state.posts.byId[id];\r\n      });\r\n\r\n      return {\r\n        posts: sortedByTop,\r\n      };\r\n    }\r\n    if (before && sortedByTop.length <= 10) {\r\n      sortedByTop = sortedByTop.map((id) => {\r\n        return state.posts.byId[id];\r\n      });\r\n      return {\r\n        posts: sortedByTop,\r\n      };\r\n    }\r\n  }\r\n  if (ownProps.match.params.sort === \"new\" && state.listings.listingOrder.new) {\r\n    if (!after && !before) {\r\n      sortedByNew = sortedByNew.slice(0, 10);\r\n      sortedByNew = sortedByNew.map((id) => {\r\n        return state.posts.byId[id];\r\n      });\r\n\r\n      return {\r\n        posts: sortedByNew,\r\n      };\r\n    }\r\n    if (after && sortedByNew.length > 10) {\r\n      sortedByNew = sortedByNew.slice(indexOfLast + 1, indexOfLast + 11);\r\n      sortedByNew = sortedByNew.map((id) => {\r\n        return state.posts.byId[id];\r\n      });\r\n      return {\r\n        posts: sortedByNew,\r\n      };\r\n    }\r\n\r\n    if (after && sortedByNew.length <= 10) {\r\n      sortedByNew = sortedByNew.map((id) => {\r\n        return state.posts.byId[id];\r\n      });\r\n\r\n      return {\r\n        posts: sortedByNew,\r\n      };\r\n    }\r\n    if (before && sortedByNew.length > 10) {\r\n      sortedByNew = sortedByNew.slice(indexofFirst - 10, indexofFirst);\r\n\r\n      sortedByNew = sortedByNew.map((id) => {\r\n        return state.posts.byId[id];\r\n      });\r\n\r\n      return {\r\n        posts: sortedByNew,\r\n      };\r\n    }\r\n    if (before && sortedByNew.length <= 10) {\r\n      sortedByNew = sortedByNew.map((id) => {\r\n        return state.posts.byId[id];\r\n      });\r\n      return {\r\n        posts: sortedByNew,\r\n      };\r\n    }\r\n  }\r\n  if (\r\n    ownProps.match.isExact &&\r\n    !ownProps.match.params.sort &&\r\n    state.listings.listingOrder.default\r\n  ) {\r\n    let sortedByDefault = state.listings.listingOrder.default.map((id) => {\r\n      return state.posts.byId[id];\r\n    });\r\n    if (after) {\r\n      indexOfLast = allIds.indexOf(after);\r\n\r\n      test = sortedByDefault.slice(indexOfLast + 1, indexOfLast + 11);\r\n      return {\r\n        allIds: allIds,\r\n        allPosts: flattened,\r\n        firstId: firstId && firstId._id,\r\n        lastId: lastId && lastId._id,\r\n        query: ownProps.location.search,\r\n        posts: test,\r\n      };\r\n    }\r\n    if (before) {\r\n      indexofFirst = allIds.indexOf(before);\r\n      test = sortedByDefault.slice(indexofFirst - 10, indexofFirst);\r\n      return {\r\n        allIds: allIds,\r\n        allPosts: flattened,\r\n        firstId: firstId && firstId._id,\r\n        lastId: lastId && lastId._id,\r\n        query: ownProps.location.search,\r\n        posts: test,\r\n      };\r\n    }\r\n    if (!ownProps.after && !ownProps.before) {\r\n      let temp = [];\r\n      for (let i = 0; i < sortedByDefault.length; i++) {\r\n        temp.push(sortedByDefault[i]);\r\n      }\r\n      return {\r\n        allPosts: flattened,\r\n        allIds: allIds,\r\n        firstId: firstId && firstId._id,\r\n        lastId: lastId && lastId._id,\r\n        posts: temp,\r\n      };\r\n    }\r\n  }\r\n  let sortedDefault = state.listings.listingOrder.default\r\n    ? state.listings.listingOrder.default.map((id) => {\r\n        return state.posts.byId[id];\r\n      })\r\n    : [];\r\n  let sortedHot = state.listings.listingOrder.hot\r\n    ? state.listings.listingOrder.hot.map((id) => {\r\n        return state.posts.byId[id];\r\n      })\r\n    : [];\r\n  let sortedTop = state.listings.listingOrder.top\r\n    ? state.listings.listingOrder.top.map((id) => {\r\n        return state.posts.byId[id];\r\n      })\r\n    : [];\r\n  let sortedNew = state.listings.listingOrder.new\r\n    ? state.listings.listingOrder.new.map((id) => {\r\n        return state.posts.byId[id];\r\n      })\r\n    : [];\r\n\r\n  if (ownProps.location.state) {\r\n    if (\r\n      !ownProps.match.isExact &&\r\n      !ownProps.location.state.homePosts.params.sort\r\n    ) {\r\n      indexofFirst = sortedByDefault.indexOf(\r\n        ownProps.location.state.homePosts.firstPost\r\n      );\r\n      test = sortedDefault.slice(indexofFirst, indexofFirst + 10);\r\n\r\n      return {\r\n        posts: test,\r\n      };\r\n    }\r\n    if (\r\n      !ownProps.match.isExact &&\r\n      ownProps.location.state.homePosts.params.sort === \"hot\"\r\n    ) {\r\n      indexofFirst = sortedByHot.indexOf(\r\n        ownProps.location.state.homePosts.firstPost\r\n      );\r\n      test = sortedHot.slice(indexofFirst, indexofFirst + 10);\r\n\r\n      return {\r\n        posts: test,\r\n      };\r\n    }\r\n    if (\r\n      !ownProps.match.isExact &&\r\n      ownProps.location.state.homePosts.params.sort === \"new\"\r\n    ) {\r\n      indexofFirst = sortedByNew.indexOf(\r\n        ownProps.location.state.homePosts.firstPost\r\n      );\r\n      test = sortedNew.slice(indexofFirst, indexofFirst + 10);\r\n\r\n      return {\r\n        posts: test,\r\n      };\r\n    }\r\n    if (\r\n      !ownProps.match.isExact &&\r\n      ownProps.location.state.homePosts.params.sort === \"top\"\r\n    ) {\r\n      indexofFirst = sortedByTop.indexOf(\r\n        ownProps.location.state.homePosts.firstPost\r\n      );\r\n      test = sortedTop.slice(indexofFirst, indexofFirst + 10);\r\n\r\n      return {\r\n        posts: test,\r\n      };\r\n    }\r\n  }\r\n}\r\nexport default connect(mapStateToProps)(Home);\r\n","export default __webpack_public_path__ + \"static/media/magnifying-glass.4af3fe67.svg\";","export default __webpack_public_path__ + \"static/media/Triangle.145cb339.svg\";","export default __webpack_public_path__ + \"static/media/hamburger.19fb64e1.svg\";","import React, { useState } from \"react\";\r\nimport {\r\n  useHistory,\r\n  Link,\r\n  useParams,\r\n  withRouter,\r\n  useLocation,\r\n} from \"react-router-dom\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport searchicon from \"../images/magnifying-glass.svg\";\r\nimport defaultPic from \"../images/reddit-default.svg\";\r\nimport triangle from \"../images/Triangle.svg\";\r\nimport { useEffect } from \"react\";\r\nimport { logOut } from \"../actions/userActions\";\r\nimport { fetchPosts, splicePost } from \"../actions/postActions\";\r\nimport hamburger from \"../images/hamburger.svg\";\r\nconst Navbar = (props) => {\r\n  const history = useHistory();\r\n  const params = useParams();\r\n  const location = useLocation();\r\n  const [dropdown, setDropDown] = useState(false);\r\n  const [searchInput, setSearchInput] = useState(\"\");\r\n  const [authDropDown, setAuthDropDown] = useState(false);\r\n  const [searchContent, setSearchContent] = useState([]);\r\n  const [searchActive, setSearchActive] = useState(false);\r\n  const currentUser = useSelector((state) => {\r\n    return state.currentUser;\r\n  });\r\n  const currentModal = useSelector((state) => {\r\n    return state.currentModal;\r\n  });\r\n  const dispatch = useDispatch();\r\n  const allIds = useSelector((state) => {\r\n    return state.posts.allIds;\r\n  });\r\n  const post = useSelector((state) => {\r\n    return state.posts.byId;\r\n  });\r\n  let flattened = allIds.map((x) => {\r\n    return post[x];\r\n  });\r\n  const handleDropDown = () => {\r\n    setDropDown(!dropdown);\r\n  };\r\n  let value;\r\n  const handleSearchContent = async (e) => {\r\n    setSearchInput(e.target.value);\r\n    value = e.target.value;\r\n    let trimmed = await value.trimStart();\r\n    let filtered = await flattened.filter((post) => {\r\n      const regex = new RegExp(`^` + trimmed, \"gi\");\r\n\r\n      if (regex.test(post.title)) {\r\n        return post.title;\r\n      }\r\n    });\r\n\r\n    setSearchContent(filtered);\r\n  };\r\n\r\n  const handleCloseSearch = () => {\r\n    setSearchActive(!searchActive);\r\n  };\r\n  const handleLogout = () => {\r\n    dispatch(logOut()).then((test) => {\r\n      if (test === \"success\") {\r\n        window.location.reload();\r\n      }\r\n    });\r\n  };\r\n  let re = /^\\s+(?=[a-z0-9])|^[a-z0-9]/g;\r\n  const closeSearch = () => {\r\n    if (searchActive) {\r\n      setSearchActive(false);\r\n    }\r\n  };\r\n  const handleLogoClick = () => {\r\n    document.body.style.overflow = \"\";\r\n\r\n    if (currentModal.post.newPost) {\r\n      dispatch(splicePost(currentModal.post._id));\r\n    }\r\n    if (props.match.path === \"/\") {\r\n      dispatch(fetchPosts());\r\n    }\r\n  };\r\n  useEffect(() => {\r\n    document.title = \"Readit\";\r\n    document.body.addEventListener(\"click\", closeSearch);\r\n\r\n    return () => {\r\n      document.body.removeEventListener(\"click\", closeSearch);\r\n    };\r\n  }, [closeSearch]);\r\n  return (\r\n    <>\r\n      <div className=\"wrapper\">\r\n        <div className=\"navbar-container\">\r\n          <div className=\"navbar-content\">\r\n            <li>\r\n              <Link\r\n                to={{ pathname: \"/\" }}\r\n                replace={props.history.location.pathname === \"/\" ? true : false}\r\n                onClick={handleLogoClick}\r\n                className=\"logo\"\r\n              >\r\n                readit\r\n              </Link>\r\n            </li>\r\n\r\n            <div className={\"search-bar-container\"}>\r\n              <input\r\n                onClick={handleCloseSearch}\r\n                onChange={(e) => handleSearchContent(e)}\r\n                className=\"search-bar\"\r\n                placeholder=\"Search\"\r\n                type=\"text\"\r\n              />\r\n\r\n              <span className=\"search-icon\">\r\n                <img src={searchicon} alt=\"\" />\r\n              </span>\r\n\r\n              <div\r\n                onClick={(e) => handleCloseSearch(e)}\r\n                className=\"search-dropdown-container\"\r\n              >\r\n                {re.test(searchInput)\r\n                  ? searchContent.map((post) => {\r\n                      return (\r\n                        <>\r\n                          {\" \"}\r\n                          <div\r\n                            className={`search-dropdown-content ${\r\n                              !searchActive ? `hide-search` : null\r\n                            } `}\r\n                            key={post._id}\r\n                          >\r\n                            <Link\r\n                              className={`search-content-item`}\r\n                              to={`/post/${post._id}`}\r\n                            >\r\n                              {post.title}\r\n                            </Link>\r\n                          </div>\r\n                        </>\r\n                      );\r\n                    })\r\n                  : null}\r\n              </div>\r\n            </div>\r\n\r\n            {!currentUser.username ? (\r\n              <>\r\n                <div className=\"auth-button-container-navbar\">\r\n                  <button onClick={props.handleShowLogin}>log in</button>\r\n\r\n                  <button onClick={props.handleShowSignup}>sign up</button>\r\n                </div>\r\n                <div className=\"hamburger-container\">\r\n                  <button\r\n                    onClick={handleDropDown}\r\n                    className=\"hamburger-icon-button\"\r\n                  >\r\n                    <img\r\n                      onClick={() => {\r\n                        setAuthDropDown(!authDropDown);\r\n                      }}\r\n                      className=\"hamburger-icon\"\r\n                      src={hamburger}\r\n                      alt=\"\"\r\n                    />\r\n                  </button>\r\n                  <div\r\n                    className={\r\n                      authDropDown ? \"hamburger-item-container\" : \"inactive\"\r\n                    }\r\n                  >\r\n                    <li className=\"hamburger-item\">\r\n                      {\" \"}\r\n                      <button\r\n                        className=\"hamburger-item-button\"\r\n                        onClick={props.handleShowLogin}\r\n                      >\r\n                        log in\r\n                      </button>\r\n                    </li>\r\n                    <li className=\"hamburger-item\">\r\n                      <button\r\n                        className=\"hamburger-item-button\"\r\n                        onClick={props.handleShowSignup}\r\n                      >\r\n                        sign up\r\n                      </button>\r\n                    </li>\r\n                  </div>\r\n                </div>\r\n              </>\r\n            ) : (\r\n              <div className=\"profile-wrapper\">\r\n                <button\r\n                  onClick={() => handleDropDown()}\r\n                  className=\"navbar-profile-container\"\r\n                >\r\n                  <div className=\"navbar-logo-text\">\r\n                    <img\r\n                      className=\"default-profile-image\"\r\n                      style={{ backgroundColor: \"rgba(0, 0, 0, 0.1)\" }}\r\n                      src={defaultPic}\r\n                      alt=\"\"\r\n                    />\r\n\r\n                    <p className=\"navbar-profile-username\">\r\n                      {currentUser.username}\r\n                    </p>\r\n                  </div>\r\n                  <img\r\n                    className=\"navbar-profile-triangle\"\r\n                    src={triangle}\r\n                    alt=\"\"\r\n                  />\r\n                </button>\r\n                {dropdown ? (\r\n                  <div className=\"navbar-dropdown-container\">\r\n                    <ul className=\"navbar-dropdown\">\r\n                      <li>\r\n                        <button\r\n                          onClick={handleLogout}\r\n                          className=\"navbar-dropdown-options\"\r\n                        >\r\n                          Logout\r\n                        </button>\r\n                      </li>\r\n                      <li></li>\r\n                      <li></li>\r\n                    </ul>\r\n                  </div>\r\n                ) : null}\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div></div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default withRouter(Navbar);\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { Link, Route, useLocation, Switch, useHistory } from \"react-router-dom\";\r\nimport {\r\n  changePostSubmissionType,\r\n  newPostSubmissionType,\r\n  submitPost,\r\n  submitPostAttempt,\r\n} from \"../actions/postActions\";\r\nimport { useSelector, useDispatch, connect } from \"react-redux\";\r\nimport Axios from \"axios\";\r\nimport { SET_POST_MODAL } from \"../types\";\r\n\r\nconst NewPost = (props) => {\r\n  const useQuery = () => {\r\n    return new URLSearchParams(useLocation().search);\r\n  };\r\n  let query = useQuery();\r\n  let newQuery = query.get(\"media\");\r\n  let newQuery2 = query.get(\"link\");\r\n  let submissionType = useSelector((state) => {\r\n    return state.changeNewSubmissionType.submissionType;\r\n  });\r\n  const history = useHistory();\r\n  const dispatch = useDispatch();\r\n  const [currentType, setCurrentType] = useState(\"\");\r\n  const [title, setTitle] = useState(\"\");\r\n  const [text, setText] = useState(\"\");\r\n  const [imagedata, setImage] = useState(\"\");\r\n  const submitCheck = useSelector((state) => {\r\n    return state.posts.submitted;\r\n  });\r\n  const reRouteId = useSelector((state) => {\r\n    return state.posts.reRouteId;\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (newQuery) {\r\n      submissionType = \"media\";\r\n    } else if (newQuery2) {\r\n      submissionType = \"link\";\r\n    }\r\n    if (submitCheck) {\r\n      history.push(`/post/${reRouteId}`);\r\n    }\r\n  }, [submitCheck]);\r\n\r\n  const uploadForm = (e) => {\r\n    e.preventDefault();\r\n    const data = new FormData();\r\n    data.append(\"title\", title);\r\n    data.append(\"content\", text);\r\n    data.append(\"file\", imagedata);\r\n\r\n    dispatch(submitPost(data));\r\n  };\r\n\r\n  const mediaType = () => {};\r\n  const handleFormType = () => {\r\n    window.history.replaceState(\"page2\", \"Title\", \"/new-post\");\r\n\r\n    dispatch(changePostSubmissionType(\"post\"));\r\n  };\r\n  const handleImageType = () => {\r\n    dispatch(changePostSubmissionType(\"media\"));\r\n    window.history.replaceState(\"page2\", \"Title\", \"/new-post\");\r\n  };\r\n  const handleLinkType = () => {\r\n    dispatch(changePostSubmissionType(\"link\"));\r\n    window.history.replaceState(\"page2\", \"Title\", \"/new-post\");\r\n  };\r\n  return (\r\n    <div className=\"newpost-wrapper\">\r\n      <div className=\"newpost-container\">\r\n        <p className=\"newpost-title\">Create a post</p>\r\n        <div className=\"newpost-template\">\r\n          <div className=\"newpost-options\">\r\n            <button\r\n              className={\r\n                submissionType === \"post\"\r\n                  ? `submit-type-button ${`selectedType`}`\r\n                  : `submit-type-button`\r\n              }\r\n              onClick={handleFormType}\r\n            >\r\n              Post\r\n            </button>\r\n            <button\r\n              className={\r\n                submissionType === \"media\"\r\n                  ? `submit-type-button ${`selectedType`}`\r\n                  : `submit-type-button`\r\n              }\r\n              onClick={handleImageType}\r\n            >\r\n              Images {\"&\"} Video\r\n            </button>\r\n            <button\r\n              className={\r\n                submissionType === \"link\"\r\n                  ? `submit-type-button ${`selectedType`}`\r\n                  : `submit-type-button`\r\n              }\r\n              onClick={handleLinkType}\r\n            >\r\n              Link\r\n            </button>\r\n          </div>\r\n          <form action=\"\">\r\n            <div className=\"newpost-title-container\">\r\n              <input\r\n                onChange={(e) => {\r\n                  setTitle(e.target.value);\r\n                }}\r\n                placeholder=\"Title\"\r\n                className=\"newpost-title\"\r\n                type=\"text\"\r\n              />\r\n            </div>\r\n\r\n            <div className=\"newpost-entry-container\">\r\n              {submissionType === \"media\" ? (\r\n                <div className=\"upload-input-container\">\r\n                  <input\r\n                    onChange={(e) => {\r\n                      setImage(e.target.files[0]);\r\n                    }}\r\n                    className=\"upload-input\"\r\n                    type=\"file\"\r\n                    name=\"\"\r\n                    id=\"file-input\"\r\n                  />\r\n                </div>\r\n              ) : (\r\n                <textarea\r\n                  onChange={(e) => {\r\n                    setText(e.target.value);\r\n                  }}\r\n                  placeholder=\"Text(optional)\"\r\n                  className=\"newpost-entry\"\r\n                  name=\"\"\r\n                  id=\"\"\r\n                  cols=\"30\"\r\n                  rows=\"10\"\r\n                ></textarea>\r\n              )}\r\n              <div className=\"submission-button-container\">\r\n                <button\r\n                  type=\"submit\"\r\n                  onClick={(e) => uploadForm(e)}\r\n                  className=\"submission-buttons\"\r\n                >\r\n                  Post\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NewPost;\r\n","import {\r\n  NEW_COMMENT_SUCCESS,\r\n  NEW_COMMENT_REQUEST,\r\n  NEW_REPLY_SUCCESS,\r\n  NEW_REPLY_REQUEST,\r\n  VOTE_CAST,\r\n} from \"../types\";\r\nimport axios from \"axios\";\r\nexport function newCommentRequest() {\r\n  return {\r\n    type: NEW_COMMENT_REQUEST,\r\n  };\r\n}\r\n\r\nfunction newCommentSuccess(savedComment) {\r\n  return (dispatch, getState) => {\r\n    console.log(savedComment, \"<-----\");\r\n    let id = savedComment._id;\r\n    let postId = savedComment.postId;\r\n    dispatch({ type: NEW_COMMENT_SUCCESS, savedComment, id, postId });\r\n  };\r\n}\r\nexport function newComment(content, postId) {\r\n  return (dispatch, getState) => {\r\n    dispatch(newCommentRequest());\r\n    return axios({\r\n      url: \"/api/comment/new\",\r\n      method: \"POST\",\r\n      data: {\r\n        content: content,\r\n        postId: postId,\r\n      },\r\n      withCredentials: true,\r\n    }).then((res) => {\r\n      let submittedComment = res.data;\r\n\r\n      dispatch(newCommentSuccess(submittedComment));\r\n    });\r\n  };\r\n}\r\nexport function newReplyRequest() {\r\n  return {\r\n    type: NEW_REPLY_REQUEST,\r\n    test: {},\r\n  };\r\n}\r\nexport function test(test) {\r\n  return (dispatch, getState) => {\r\n    dispatch(test.push(\"sdfsdf\"));\r\n  };\r\n}\r\n\r\nexport function changeCommentPoint(point, postId, commentId) {\r\n  return (dispatch, getState) => {\r\n    let currentCommentId = commentId;\r\n    let currentComment = getState().comments.byId[currentCommentId];\r\n    let currentVoteState = currentComment.voteState;\r\n    dispatch({ type: VOTE_CAST, point, commentId, currentVoteState });\r\n    if (point === 1) {\r\n      axios({\r\n        url: `/api/comment/vote-up`,\r\n        method: \"PUT\",\r\n        data: {\r\n          postId: postId,\r\n          commentId: commentId,\r\n        },\r\n        withCredentials: true,\r\n      });\r\n    }\r\n    if (point === -1) {\r\n      axios({\r\n        url: `/api/comment/vote-down`,\r\n        method: \"PUT\",\r\n        data: {\r\n          postId: postId,\r\n          commentId: commentId,\r\n        },\r\n        withCredentials: true,\r\n      });\r\n    }\r\n  };\r\n}\r\nexport function newReply(content, postId, commentId) {\r\n  return (dispatch, getState) => {\r\n    return axios({\r\n      url: `/api/comments/${commentId}/replies`,\r\n      method: \"POST\",\r\n      data: {\r\n        content: content,\r\n        postId: postId,\r\n      },\r\n      withCredentials: true,\r\n    }).then((res) => {\r\n      dispatch(newCommentSuccess(res.data));\r\n    });\r\n  };\r\n}\r\n","export default __webpack_public_path__ + \"static/media/down-arrow.c9c98d5d.svg\";","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"g\", null, /*#__PURE__*/React.createElement(\"g\", null, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M392.533,238.937c-9.426,0-17.067,7.641-17.067,17.067V426.67c0,9.426-7.641,17.067-17.067,17.067H51.2 c-9.426,0-17.067-7.641-17.067-17.067V85.337c0-9.426,7.641-17.067,17.067-17.067H256c9.426,0,17.067-7.641,17.067-17.067 S265.426,34.137,256,34.137H51.2C22.923,34.137,0,57.06,0,85.337V426.67c0,28.277,22.923,51.2,51.2,51.2h307.2 c28.277,0,51.2-22.923,51.2-51.2V256.003C409.6,246.578,401.959,238.937,392.533,238.937z\"\n})));\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"g\", null, /*#__PURE__*/React.createElement(\"g\", null, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M458.742,19.142c-12.254-12.256-28.875-19.14-46.206-19.138c-17.341-0.05-33.979,6.846-46.199,19.149L141.534,243.937 c-1.865,1.879-3.272,4.163-4.113,6.673l-34.133,102.4c-2.979,8.943,1.856,18.607,10.799,21.585 c1.735,0.578,3.552,0.873,5.38,0.875c1.832-0.003,3.653-0.297,5.393-0.87l102.4-34.133c2.515-0.84,4.8-2.254,6.673-4.13 l224.802-224.802C484.25,86.023,484.253,44.657,458.742,19.142z\"\n})));\n\nvar _ref4 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref5 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref6 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref7 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref8 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref9 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref10 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref11 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref12 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref13 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref14 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref15 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref16 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref17 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref18 = /*#__PURE__*/React.createElement(\"g\", null);\n\nfunction SvgEdit(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 477.873 477.873\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2, _ref3, _ref4, _ref5, _ref6, _ref7, _ref8, _ref9, _ref10, _ref11, _ref12, _ref13, _ref14, _ref15, _ref16, _ref17, _ref18);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgEdit);\nexport default __webpack_public_path__ + \"static/media/edit.4e81c026.svg\";\nexport { ForwardRef as ReactComponent };","export default __webpack_public_path__ + \"static/media/up-arrow.927fb299.svg\";","import React, { useState, useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport {\r\n  newReplyRequest,\r\n  newReply,\r\n  newComment,\r\n  changeCommentPoint,\r\n} from \"../actions/commentActions\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport upvote from \"../images/up-arrow.svg\";\r\nimport downvote from \"../images/down-arrow.svg\";\r\nconst Comment = ({ comment, handleShowLogin }) => {\r\n  const allComments = useSelector((state) => {\r\n    return state.comments.byId;\r\n  });\r\n  const arrayOfId = useSelector((state) => {\r\n    return state.comments.allId;\r\n  });\r\n  const loggedIn = useSelector((state) => state.login.isLoggedIn);\r\n\r\n  const dispatch = useDispatch();\r\n  const params = useParams();\r\n  const [replyText, setReplyText] = useState(\"\");\r\n  const [replyToggle, setReplyToggle] = useState(false);\r\n  const [voteTotal, setVoteTotal] = useState(null);\r\n  const [comments, setComments] = useState();\r\n  const voteUp = () => {\r\n    if (loggedIn) {\r\n      dispatch(changeCommentPoint(1, params.id, comment._id));\r\n    } else {\r\n      handleShowLogin();\r\n    }\r\n  };\r\n  const voteDown = () => {\r\n    if (loggedIn) {\r\n      dispatch(changeCommentPoint(-1, params.id, comment._id));\r\n    } else {\r\n      handleShowLogin();\r\n    }\r\n  };\r\n  const handleReplyToggle = () => {\r\n    setReplyToggle(!replyToggle);\r\n    dispatch(newReplyRequest());\r\n  };\r\n\r\n  const handleReply = () => {\r\n    let postId = comment.postId;\r\n    let commentId = comment._id;\r\n    dispatch(newReply(replyText, params.id, commentId));\r\n    setReplyToggle(false);\r\n    setReplyText(\"\");\r\n  };\r\n  const handleUpvote = () => {\r\n    let data = comment;\r\n  };\r\n  useEffect(() => {}, []);\r\n  if (!comment) {\r\n    return <div></div>;\r\n  }\r\n  const nestedComments = (comment.comments || []).map((comment) => {\r\n    return (\r\n      <Comment key={comment._id} comment={allComments[comment]} type=\"child\" />\r\n    );\r\n  });\r\n\r\n  return (\r\n    <div style={{ marginLeft: \"15px\", marginTop: \"10px\" }}>\r\n      <div className=\"comment-vote-title-container\">\r\n        <div className=\"comment-vote-container\">\r\n          <div className=\"comment-vote-button-container\">\r\n            <img\r\n              className={\r\n                comment.voteState === 1\r\n                  ? \"comment-vote-button-color\"\r\n                  : \"comment-vote-button\"\r\n              }\r\n              src={upvote}\r\n              onClick={voteUp}\r\n              alt=\"\"\r\n            />\r\n            <span>{comment.voteTotal}</span>\r\n            <img\r\n              className={\r\n                comment.voteState === -1\r\n                  ? \"comment-vote-button-color\"\r\n                  : \"comment-vote-button\"\r\n              }\r\n              src={downvote}\r\n              onClick={voteDown}\r\n            />\r\n          </div>\r\n        </div>\r\n        <div className=\"comment-container\">\r\n          <p className=\"comment-author\">{comment.authorName}</p>\r\n          <div className=\"parent-comment\">{comment.content}</div>\r\n          <div className=\"reply-button-container\">\r\n            {loggedIn ? (\r\n              <button onClick={handleReplyToggle} className=\"reply-button\">\r\n                Reply\r\n              </button>\r\n            ) : null}\r\n            {replyToggle ? (\r\n              <div className=\"new-comment-container\">\r\n                <textarea\r\n                  value={replyText}\r\n                  onChange={(e) => {\r\n                    setReplyText(e.target.value);\r\n                  }}\r\n                  placeholder=\"What are your thoughts?\"\r\n                  className=\"new-comment reply-textarea\"\r\n                  rows=\"6\"\r\n                ></textarea>\r\n                <div className=\"submit-comment-container\">\r\n                  <button\r\n                    onClick={handleReply}\r\n                    className=\"submit-comment-button\"\r\n                  >\r\n                    Reply\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            ) : null}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"nested-comments\">{nestedComments}</div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Comment;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { connect, useDispatch, useSelector } from \"react-redux\";\r\nimport { useHistory, useParams } from \"react-router-dom\";\r\nimport { newComment } from \"../actions/commentActions\";\r\nimport {\r\n  changePoint,\r\n  editPost,\r\n  fetchSinglePost,\r\n  splicePost,\r\n} from \"../actions/postActions\";\r\nimport downvote from \"../images/down-arrow.svg\";\r\nimport { ReactComponent as Edit } from \"../images/edit.svg\";\r\nimport upvote from \"../images/up-arrow.svg\";\r\nimport Comment from \"./Comment\";\r\n\r\nconst PostModal = (props) => {\r\n  const params = useParams();\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n  const [commentText, setCommentText] = useState(\"\");\r\n  const [edit, setEdit] = useState(false);\r\n  const [editText, setEditText] = useState(\"\");\r\n\r\n  const currentUser = useSelector((state) => state.currentUser._id);\r\n  const allIds = useSelector((state) => {\r\n    return state.posts.allIds;\r\n  });\r\n  const comments = useSelector((state) => {\r\n    return {\r\n      test: state.comments.byId,\r\n    };\r\n  });\r\n\r\n  const loggedIn = useSelector((state) => state.login.isLoggedIn);\r\n\r\n  let currentPost = props.post;\r\n  const sortOrder = useSelector((state) => {\r\n    return state.listings.sortOrder;\r\n  });\r\n  const back = (e) => {\r\n    e.stopPropagation();\r\n  };\r\n  const handleReroute = () => {\r\n    if (currentPost.newPost) {\r\n      dispatch(splicePost(params.id));\r\n    }\r\n    if (currentPost.newPost || sortOrder === \"default\") {\r\n      history.push(\"/\");\r\n    } else {\r\n      history.goBack();\r\n\r\n      document.body.style.overflow = \"\";\r\n    }\r\n  };\r\n  const handleSubmitComment = () => {\r\n    dispatch(newComment(commentText, params.id));\r\n    setCommentText(\"\");\r\n  };\r\n  const handleUpvote = () => {\r\n    if (loggedIn) {\r\n      dispatch(changePoint(1, params.id));\r\n    } else {\r\n      props.handleShowLogin();\r\n    }\r\n  };\r\n  const handleDownVote = () => {\r\n    if (loggedIn) {\r\n      dispatch(changePoint(-1, params.id));\r\n    } else {\r\n      props.handleShowLogin();\r\n    }\r\n  };\r\n  const handleEdit = () => {\r\n    setEdit(true);\r\n  };\r\n\r\n  const handleCancelEdit = () => {\r\n    setEdit(false);\r\n  };\r\n  const saveEdit = (id) => {\r\n    dispatch(editPost(id, editText));\r\n    setEdit(false);\r\n  };\r\n  useEffect(() => {\r\n    if (!allIds.includes(params.id)) {\r\n      dispatch(fetchSinglePost(params.id));\r\n    }\r\n  }, []);\r\n\r\n  if (!currentPost) {\r\n    return <div></div>;\r\n  }\r\n  const date = new Date(currentPost.createdAt);\r\n  const formatDate = new Intl.DateTimeFormat(\"en-US\", {}).format(date);\r\n\r\n  return (\r\n    <div onClick={handleReroute} className=\"modal-wrapper\">\r\n      <div onClick={back} className=\"card-modal\">\r\n        {currentPost.author ? (\r\n          <>\r\n            <p className=\"card-modal-author\">\r\n              {\" \"}\r\n              u/{currentPost.author.username}\r\n            </p>\r\n            <p>{formatDate}</p>\r\n            <h4 className=\"card-modal-title\">{currentPost.title}</h4>\r\n            {currentUser === currentPost.author._id ? (\r\n              <div className=\"edit-container\">\r\n                <p\r\n                  className={`card-modal-content ${edit ? \"inactive\" : null} `}\r\n                >\r\n                  {currentPost.content}\r\n                </p>\r\n\r\n                <textarea\r\n                  onChange={(e) => {\r\n                    setEditText(e.target.value);\r\n                  }}\r\n                  className={edit ? \"edit-text-area\" : \"inactive\"}\r\n                  value={editText}\r\n                ></textarea>\r\n                <div className={edit ? `edit-button-container` : `inactive`}>\r\n                  <button\r\n                    onClick={() => saveEdit(currentPost._id)}\r\n                    className=\"edit-submit-button\"\r\n                  >\r\n                    Save\r\n                  </button>\r\n                  <button\r\n                    onClick={handleCancelEdit}\r\n                    className=\"edit-cancel-button\"\r\n                  >\r\n                    Cancel\r\n                  </button>\r\n                </div>\r\n                <button\r\n                  className={`edit-button ${edit ? \"inactive\" : null}`}\r\n                  onClick={handleEdit}\r\n                >\r\n                  <Edit />\r\n                </button>\r\n              </div>\r\n            ) : null}\r\n            <img className=\"post-image\" src={props.post.image} alt=\"\" />\r\n            {currentUser ? (\r\n              <div className=\"new-comment-container\">\r\n                <textarea\r\n                  className=\"new-comment\"\r\n                  name=\"\"\r\n                  id=\"\"\r\n                  placeholder=\"What are your thoughts?\"\r\n                  rows=\"6\"\r\n                  value={commentText}\r\n                  onChange={(e) => setCommentText(e.target.value)}\r\n                ></textarea>\r\n                <span className=\"submit-comment-container\">\r\n                  <button\r\n                    onClick={() => {\r\n                      handleSubmitComment();\r\n                    }}\r\n                    className=\"submit-comment-button\"\r\n                  >\r\n                    Comment\r\n                  </button>\r\n                </span>\r\n              </div>\r\n            ) : (\r\n              <div className=\"no-user-comment-container\">\r\n                <p className=\"no-user-comment\">\r\n                  Log in or sign up to leave a comment\r\n                </p>\r\n                <div className=\"auth-button-container\">\r\n                  <button onClick={props.handleShowLogin}>log in</button>\r\n\r\n                  <button onClick={props.handleShowSignup}>sign up</button>\r\n                </div>\r\n              </div>\r\n            )}\r\n            <div className=\"card-modal-vote-container\">\r\n              <li onClick={handleUpvote}>\r\n                <img\r\n                  className={\r\n                    currentPost.voteState === 1\r\n                      ? `vote-button-color`\r\n                      : `vote-button`\r\n                  }\r\n                  src={upvote}\r\n                  alt=\"\"\r\n                />\r\n              </li>\r\n              <li>{currentPost.voteTotal}</li>\r\n\r\n              <li onClick={handleDownVote}>\r\n                <img\r\n                  className={\r\n                    currentPost.voteState === -1\r\n                      ? `vote-button-color`\r\n                      : `vote-button`\r\n                  }\r\n                  src={downvote}\r\n                  alt=\"\"\r\n                />\r\n              </li>\r\n            </div>\r\n            <h4 className=\"comment-section-header\">Comments</h4>\r\n            {props.post.comments.map((a) => {\r\n              return (\r\n                <Comment\r\n                  handleShowLogin={props.handleShowLogin}\r\n                  key={a}\r\n                  comment={comments.test[a]}\r\n                />\r\n              );\r\n            })}\r\n          </>\r\n        ) : null}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nfunction mapStateToProps(state, ownProps) {\r\n  let id = ownProps.match.params.id;\r\n  let post;\r\n  post = state.posts.byId[id];\r\n  return {\r\n    post: post,\r\n  };\r\n}\r\nexport default connect(mapStateToProps)(PostModal);\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { connect, useDispatch, useSelector } from \"react-redux\";\r\nimport {\r\n  Redirect,\r\n  Route,\r\n  Switch,\r\n  useLocation,\r\n  useParams,\r\n} from \"react-router-dom\";\r\nimport { nextPage, prevPage } from \"./actions/postActions\";\r\nimport { clearLoginModal, loggedIn } from \"./actions/userActions\";\r\nimport Home from \"./components/Home\";\r\nimport Login from \"./components/Login\";\r\nimport Navbar from \"./components/Navbar\";\r\nimport NewPost from \"./components/NewPost\";\r\nimport PostModal from \"./components/PostModal\";\r\nimport Signup from \"./components/Signup\";\r\nimport \"./styles/myApp.scss\";\r\nfunction useQuery() {\r\n  return new URLSearchParams(useLocation().search);\r\n}\r\nfunction App(props) {\r\n  let queryParams = props.location.search;\r\n  let after = new URLSearchParams(queryParams).get(\"after\");\r\n  let before = new URLSearchParams(queryParams).get(\"before\");\r\n  const [showLogin, setLogin] = useState(false);\r\n  const [showSignup, setShowSignup] = useState(false);\r\n  const [urlAfter, setUrlAfter] = useState(\"\");\r\n  const [urlBefore, setUrlBefore] = useState(\"\");\r\n  const loggedInStatus = useSelector((state) => state.login.isLoggedIn);\r\n  const signedUpStatus = useSelector((state) => state.signup.isSignedUp);\r\n  const dispatch = useDispatch();\r\n  const allIds = useSelector((state) => {\r\n    return state.posts.allIds;\r\n  });\r\n  const post = useSelector((state) => {\r\n    return state.posts.byId;\r\n  });\r\n  let flattened = allIds.map((x) => {\r\n    return post[x];\r\n  });\r\n\r\n  useEffect(() => {\r\n    dispatch(loggedIn());\r\n    if (loggedInStatus) {\r\n      setLogin(false);\r\n    }\r\n    if (!props.location.state) {\r\n      setUrlAfter(after);\r\n      setUrlBefore(before);\r\n    }\r\n\r\n    if (signedUpStatus && !loggedInStatus) {\r\n      setShowSignup(false);\r\n      setLogin(true);\r\n    }\r\n  }, [loggedInStatus, signedUpStatus]);\r\n\r\n  const handleShowLogin = () => {\r\n    setLogin(!showLogin);\r\n  };\r\n  const handleShowSignup = () => {\r\n    setShowSignup(!showSignup);\r\n  };\r\n  const closeModal = () => {\r\n    dispatch(clearLoginModal());\r\n    setLogin(false);\r\n    setShowSignup(false);\r\n  };\r\n\r\n  const handleShowNextPage = (lastId2, sort) => {\r\n    if (sort) {\r\n      dispatch(nextPage(10, lastId2, sort)).then((status) => {\r\n        if (status === \"completed\") {\r\n          window.scrollTo(0, 0);\r\n        }\r\n      });\r\n    }\r\n    if (!sort) {\r\n      dispatch(nextPage(10, lastId2)).then((status) => {\r\n        if (status === \"completed\") {\r\n          window.scrollTo(0, 0);\r\n        }\r\n      });\r\n    }\r\n  };\r\n  const handlePrevPage = (firstId2, sort) => {\r\n    if (sort) {\r\n      dispatch(prevPage(10, firstId2, sort)).then((status) => {\r\n        if (status === \"completed\") {\r\n          window.scrollTo(0, 0);\r\n        }\r\n      });\r\n    }\r\n    if (!sort) {\r\n      dispatch(prevPage(10, firstId2)).then((status) => {\r\n        if (status === \"completed\") {\r\n          window.scrollTo(0, 0);\r\n        }\r\n      });\r\n    }\r\n  };\r\n  return (\r\n    <div className={\"app-wrapper\"}>\r\n      {showLogin ? <Login close={closeModal} /> : null}\r\n      {showSignup ? <Signup close={closeModal} /> : null}\r\n      <Navbar\r\n        handleShowLogin={handleShowLogin}\r\n        handleShowSignup={handleShowSignup}\r\n      />\r\n\r\n      <Route\r\n        exact\r\n        path=\"/post/:id\"\r\n        render={(props) => {\r\n          return (\r\n            <PostModal\r\n              handleShowLogin={handleShowLogin}\r\n              handleShowSignup={handleShowSignup}\r\n              {...props}\r\n            />\r\n          );\r\n        }}\r\n      />\r\n\r\n      <Switch>\r\n        <Route\r\n          exact\r\n          path=\"/new-post\"\r\n          render={(props) => {\r\n            return <NewPost {...props} />;\r\n          }}\r\n        >\r\n          {!loggedInStatus ? <Redirect to=\"/\" /> : null}\r\n        </Route>\r\n\r\n        <Route\r\n          path=\"/:sort?\"\r\n          render={(props2) => {\r\n            return (\r\n              <Home\r\n                handleShowLogin={handleShowLogin}\r\n                handleShowSignup={handleShowSignup}\r\n                handleShowNextPage={handleShowNextPage}\r\n                handlePrevPage={handlePrevPage}\r\n                after={urlAfter}\r\n                before={urlBefore}\r\n                {...props2}\r\n                test={props.posts}\r\n              />\r\n            );\r\n          }}\r\n          showLogin={showLogin}\r\n          showSignup={showSignup}\r\n        />\r\n      </Switch>\r\n    </div>\r\n  );\r\n}\r\nfunction mapStateToProps(state, ownProps) {\r\n  let loggedInStatus = state.login.isLoggedIn;\r\n  return {\r\n    loggedIn: loggedInStatus,\r\n  };\r\n}\r\nexport default connect(mapStateToProps)(App);\r\n","import { combineReducers } from \"redux\";\r\nimport {\r\n  CLEAR_ERROR,\r\n  CURRENT_USER,\r\n  DELETE_POST,\r\n  EDIT_POST,\r\n  LOGIN_ERROR,\r\n  LOGIN_REQUEST,\r\n  LOGIN_SUCCESS,\r\n  LOG_OUT,\r\n  NEW_COMMENT_SUCCESS,\r\n  NEW_POST_REQUEST,\r\n  NEW_POST_SUCCESS,\r\n  NEW_REPLY_REQUEST,\r\n  NEW_REPLY_SUCCESS,\r\n  NEXT_PAGE,\r\n  POST_CREATION_CHANGE_SUBMISSION_TYPE,\r\n  PREV_PAGE,\r\n  RECEIVE_POSTS,\r\n  RECEIVE_SINGLE_POSTS,\r\n  REFRESH_USER,\r\n  REQUEST_POSTS,\r\n  SET_POST,\r\n  SET_POST_MODAL,\r\n  SIGNUP_ERROR,\r\n  SIGNUP_REQUEST,\r\n  SIGNUP_SUCCESS,\r\n  CLEAR_LOGIN_MODAL,\r\n  SORT_POSTS,\r\n  SPLICED_POST,\r\n  UNAUTHORIZED_ERROR,\r\n  VOTE_CAST,\r\n} from \"../types\";\r\nfunction addComment(state, action) {\r\n  const { id, savedComment, postId } = action;\r\n  const comment = { ...savedComment };\r\n  if (comment.parentId) {\r\n    return {\r\n      ...state,\r\n    };\r\n  }\r\n  const post = state.byId[postId];\r\n  return {\r\n    ...state,\r\n    byId: {\r\n      ...state.byId,\r\n      [postId]: {\r\n        ...post,\r\n        comments: [id, ...state.byId[postId].comments],\r\n      },\r\n    },\r\n  };\r\n}\r\nfunction changePostPoint(state, action) {\r\n  const { postId } = action;\r\n  const { point } = action;\r\n  const { currentVoteState } = action;\r\n\r\n  const post = state.byId[postId];\r\n  if (action.commentId) {\r\n    return state;\r\n  } else {\r\n    if (currentVoteState === 1 && point === 1) {\r\n      return {\r\n        ...state,\r\n        byId: {\r\n          ...state.byId,\r\n          [postId]: {\r\n            ...post,\r\n            voteState: 0,\r\n            voteTotal: state.byId[postId].voteTotal - 1,\r\n          },\r\n        },\r\n      };\r\n    }\r\n    if (currentVoteState === 0 && point === 1) {\r\n      return {\r\n        ...state,\r\n        byId: {\r\n          ...state.byId,\r\n          [postId]: {\r\n            ...post,\r\n            voteState: 1,\r\n            voteTotal: state.byId[postId].voteTotal + 1,\r\n          },\r\n        },\r\n      };\r\n    }\r\n    if (currentVoteState === 1 && point === -1) {\r\n      return {\r\n        ...state,\r\n        byId: {\r\n          ...state.byId,\r\n          [postId]: {\r\n            ...post,\r\n            voteState: -1,\r\n            voteTotal: state.byId[postId].voteTotal - 2,\r\n          },\r\n        },\r\n      };\r\n    }\r\n    if (currentVoteState === 0 && point === -1) {\r\n      return {\r\n        ...state,\r\n        byId: {\r\n          ...state.byId,\r\n          [postId]: {\r\n            ...post,\r\n            voteState: -1,\r\n            voteTotal: state.byId[postId].voteTotal - 1,\r\n          },\r\n        },\r\n      };\r\n    }\r\n    if (currentVoteState === -1 && point === -1) {\r\n      return {\r\n        ...state,\r\n        byId: {\r\n          ...state.byId,\r\n          [postId]: {\r\n            ...post,\r\n            voteState: 0,\r\n            voteTotal: state.byId[postId].voteTotal + 1,\r\n          },\r\n        },\r\n      };\r\n    }\r\n    if (currentVoteState === -1 && point === 1) {\r\n      return {\r\n        ...state,\r\n        byId: {\r\n          ...state.byId,\r\n          [postId]: {\r\n            ...post,\r\n            voteState: 1,\r\n            voteTotal: state.byId[postId].voteTotal + 2,\r\n          },\r\n        },\r\n      };\r\n    }\r\n  }\r\n}\r\n\r\nfunction handlePostSubmission(state, action) {\r\n  const { post, id } = action;\r\n  return {\r\n    ...state,\r\n    byId: {\r\n      ...state.byId,\r\n      [id]: post,\r\n    },\r\n    allIds: [...state.allIds, id],\r\n    submitting: false,\r\n    createdPosts: {\r\n      ...state.createdPosts,\r\n      [id]: post,\r\n    },\r\n\r\n    submitted: true,\r\n    reRouteId: id,\r\n  };\r\n}\r\n\r\nfunction editPostReduce(state, action) {\r\n  const { postId, content } = action;\r\n  const post = state.byId[postId];\r\n  return {\r\n    ...state,\r\n    byId: {\r\n      ...state.byId,\r\n      [postId]: {\r\n        ...post,\r\n        content: content,\r\n      },\r\n    },\r\n  };\r\n}\r\nfunction handlePreviousPage(state, action) {\r\n  let newPosts = action.newPosts;\r\n  let currentPosts = action.currentPosts;\r\n  let idsOfNewPosts = action.idsofNewData;\r\n  let idsOfCurrentPosts = Object.keys(action.currentPosts);\r\n  let newPostsArray = action.newPostsArray;\r\n  let currentPostsArray = action.arrayOfCurrentPosts;\r\n  let temp = {};\r\n  let temp2 = [];\r\n\r\n  for (let i = 0; i < newPostsArray.length; i++) {\r\n    if (idsOfCurrentPosts.includes(idsOfNewPosts[i])) {\r\n      currentPosts[idsOfNewPosts[i]] = newPostsArray[i];\r\n    } else {\r\n      temp2.push(newPostsArray[i]);\r\n    }\r\n  }\r\n  currentPostsArray = idsOfCurrentPosts.map((id) => {\r\n    return currentPosts[id];\r\n  });\r\n\r\n  currentPostsArray = currentPostsArray.concat(temp2);\r\n\r\n  for (let i = 0; i < currentPostsArray.length; i++) {\r\n    temp[currentPostsArray[i]._id] = currentPostsArray[i];\r\n  }\r\n\r\n  const finalArrayOfIds = currentPostsArray.map((a) => {\r\n    return a._id;\r\n  });\r\n  return {\r\n    ...state,\r\n    isFetching: false,\r\n    byId: {\r\n      ...temp,\r\n    },\r\n    allIds: [...finalArrayOfIds],\r\n    status: \"succeeded\",\r\n    firstId: newPostsArray[0]._id,\r\n    lastId: newPostsArray[newPostsArray.length - 1]._id,\r\n  };\r\n}\r\nfunction handleNextPage(state, action) {\r\n  let newPosts = action.newPosts;\r\n  let currentPosts = action.currentPosts;\r\n  let idsOfNewPosts = action.idsofNewData;\r\n  let idsofCurrentPosts = Object.keys(action.currentPosts);\r\n  let newPostsArray = action.newPostsArray;\r\n  let currentPostsArray = action.arrayOfCurrentPosts;\r\n  let temp = {};\r\n  let temp2 = [];\r\n  let temp3 = [];\r\n  for (let i = 0; i < newPostsArray.length; i++) {\r\n    if (idsofCurrentPosts.includes(idsOfNewPosts[i])) {\r\n      currentPosts[idsOfNewPosts[i]] = newPostsArray[i];\r\n    } else {\r\n      temp2.push(newPostsArray[i]);\r\n    }\r\n  }\r\n  currentPostsArray = idsofCurrentPosts.map((id) => {\r\n    return currentPosts[id];\r\n  });\r\n  currentPostsArray = currentPostsArray.concat(temp2);\r\n\r\n  for (let i = 0; i < currentPostsArray.length; i++) {\r\n    temp[currentPostsArray[i]._id] = currentPostsArray[i];\r\n  }\r\n\r\n  const finalArrayOfIds = currentPostsArray.map((a) => {\r\n    return a._id;\r\n  });\r\n  return {\r\n    ...state,\r\n    isFetching: false,\r\n    byId: {\r\n      ...temp,\r\n    },\r\n    allIds: [...finalArrayOfIds],\r\n    status: \"succeeded\",\r\n    firstId: newPostsArray[0]._id,\r\n    lastId: newPostsArray[newPostsArray.length - 1]._id,\r\n  };\r\n}\r\n\r\nfunction handleSort(state, action) {\r\n  let newPosts = action.newPosts;\r\n  let currentPosts = action.currentPosts;\r\n  let idsOfNewPosts = action.idsofNewData;\r\n  let idsofCurrentPosts = Object.keys(action.currentPosts);\r\n  let newPostsArray = action.newPostsArray;\r\n  let currentPostsArray = action.arrayOfCurrentPosts;\r\n  let temp = {};\r\n  let temp2 = [];\r\n  let temp3 = [];\r\n  for (let i = 0; i < newPostsArray.length; i++) {\r\n    if (idsofCurrentPosts.includes(idsOfNewPosts[i])) {\r\n      currentPosts[idsOfNewPosts[i]] = newPostsArray[i];\r\n    } else {\r\n      temp2.push(newPostsArray[i]);\r\n    }\r\n  }\r\n  currentPostsArray = idsofCurrentPosts.map((id) => {\r\n    return currentPosts[id];\r\n  });\r\n  currentPostsArray = currentPostsArray.concat(temp2);\r\n\r\n  for (let i = 0; i < currentPostsArray.length; i++) {\r\n    temp[currentPostsArray[i]._id] = currentPostsArray[i];\r\n  }\r\n\r\n  const finalArrayOfIds = currentPostsArray.map((a) => {\r\n    return a._id;\r\n  });\r\n  return {\r\n    ...state,\r\n    isFetching: false,\r\n    byId: {\r\n      ...temp,\r\n    },\r\n    allIds: [...finalArrayOfIds],\r\n    status: \"succeeded\",\r\n    firstId: newPostsArray[0]._id,\r\n    lastId: newPostsArray[newPostsArray.length - 1]._id,\r\n  };\r\n}\r\nfunction setListings(state, action) {\r\n  if (action.sort) {\r\n    return {\r\n      ...state,\r\n      sortOrder: action.sort,\r\n      listingOrder: {\r\n        ...state.listingOrder,\r\n\r\n        [action.sort]: action.data.result,\r\n      },\r\n    };\r\n  }\r\n  if (!action.sort) {\r\n    return {\r\n      ...state,\r\n      sortOrder: \"default\",\r\n      listingOrder: {\r\n        ...state.listingOrder,\r\n\r\n        [\"default\"]: action.data.result,\r\n      },\r\n    };\r\n  }\r\n}\r\nfunction nextPageListing(state, action) {\r\n  let newPosts = action.newPosts;\r\n  let currentPosts = action.currentPosts;\r\n  let idsOfNewPosts = action.idsofNewData;\r\n  let idsofNewData = Object.keys(action.currentPosts);\r\n  let newPostsArray = action.newPostsArray;\r\n  let currentPostsArray = action.arrayOfCurrentPosts;\r\n  let temp = {};\r\n  let currentPostsSorted = state.listingOrder[action.sort]\r\n    ? [...state.listingOrder[action.sort]]\r\n    : null;\r\n  let currentPostsDefault = state.listingOrder.default\r\n    ? [...state.listingOrder.default]\r\n    : null;\r\n\r\n  if (action.sort) {\r\n    for (let i = 0; i < idsOfNewPosts.length; i++) {\r\n      if (state.listingOrder[action.sort].includes(idsOfNewPosts[i])) {\r\n        currentPosts[idsOfNewPosts[i]] = newPosts[idsOfNewPosts[i]];\r\n      } else {\r\n        currentPostsSorted.push(idsOfNewPosts[i]);\r\n      }\r\n    }\r\n    return {\r\n      ...state,\r\n      listingOrder: {\r\n        ...state.listingOrder,\r\n        [action.sort]: [...currentPostsSorted],\r\n      },\r\n    };\r\n  }\r\n  if (!action.sort) {\r\n    for (let i = 0; i < idsOfNewPosts.length; i++) {\r\n      if (state.listingOrder.default.includes(idsOfNewPosts[i])) {\r\n        currentPosts[idsOfNewPosts[i]] = newPosts[idsOfNewPosts[i]];\r\n      } else {\r\n        currentPostsDefault.push(idsOfNewPosts[i]);\r\n      }\r\n    }\r\n    return {\r\n      ...state,\r\n      listingOrder: {\r\n        ...state.listingOrder,\r\n        [\"default\"]: [...currentPostsDefault],\r\n      },\r\n    };\r\n  }\r\n}\r\n\r\nfunction prevPageListing(state, action) {\r\n  let newPosts = action.newPosts;\r\n  let currentPosts = action.currentPosts;\r\n  let idsOfNewPosts = action.idsofNewData;\r\n  let idsofNewData = Object.keys(action.currentPosts);\r\n  let newPostsArray = action.newPostsArray;\r\n  let currentPostsArray = action.arrayOfCurrentPosts;\r\n  let temp = [];\r\n  let currentPostsSorted = state.listingOrder[action.sort]\r\n    ? [...state.listingOrder[action.sort]]\r\n    : null;\r\n  let currentPostsDefault = state.listingOrder.default\r\n    ? [...state.listingOrder.default]\r\n    : null;\r\n\r\n  if (action.sort) {\r\n    for (let i = 0; i < idsOfNewPosts.length; i++) {\r\n      if (state.listingOrder[action.sort].includes(idsOfNewPosts[i])) {\r\n        currentPosts[idsOfNewPosts[i]] = newPosts[idsOfNewPosts[i]];\r\n      } else {\r\n        temp.push(idsOfNewPosts[i]);\r\n      }\r\n    }\r\n    currentPostsSorted = temp.concat(currentPostsSorted);\r\n    return {\r\n      ...state,\r\n      listingOrder: {\r\n        ...state.listingOrder,\r\n        [action.sort]: [...currentPostsSorted],\r\n      },\r\n    };\r\n  }\r\n  if (!action.sort) {\r\n    for (let i = 0; i < idsOfNewPosts.length; i++) {\r\n      if (state.listingOrder.default.includes(idsOfNewPosts[i])) {\r\n        currentPosts[idsOfNewPosts[i]] = newPosts[idsOfNewPosts[i]];\r\n      } else {\r\n        currentPostsDefault.push(idsOfNewPosts[i]);\r\n      }\r\n    }\r\n    return {\r\n      ...state,\r\n      listingOrder: {\r\n        ...state.listingOrder,\r\n        [\"default\"]: [...currentPostsDefault],\r\n      },\r\n    };\r\n  }\r\n}\r\nfunction listings(\r\n  state = {\r\n    sortOrder: \"\",\r\n    listingOrder: {},\r\n  },\r\n  action\r\n) {\r\n  switch (action.type) {\r\n    case SORT_POSTS:\r\n      return Object.assign({}, state, {\r\n        sortOrder: action.sortType,\r\n        listingOrder: {\r\n          ...state.listingOrder,\r\n          [action.sortType]: action.idsofNewData,\r\n        },\r\n      });\r\n    case PREV_PAGE:\r\n      return prevPageListing(state, action);\r\n    case NEXT_PAGE:\r\n      return nextPageListing(state, action);\r\n    case RECEIVE_POSTS:\r\n      return setListings(state, action);\r\n    default:\r\n      return state;\r\n  }\r\n}\r\nfunction receievePosts(state, action) {\r\n  let index = action.arrayOfNewIds.indexOf(state.allIds);\r\n  let temp = action.arrayOfNewIds;\r\n  if (action.arrayOfNewIds.includes(action.data.result)) {\r\n    temp.splice(index, 1);\r\n\r\n    return temp;\r\n  } else {\r\n    return action.data.result;\r\n  }\r\n}\r\nfunction posts(\r\n  state = {\r\n    isFetching: false,\r\n    byId: {},\r\n    allIds: [],\r\n    submitted: false,\r\n    err: null,\r\n    createdPosts: {},\r\n    submitting: false,\r\n    reRouteId: null,\r\n    status: \"idle\",\r\n    firstId: \"\",\r\n    lastId: \"\",\r\n  },\r\n  action\r\n) {\r\n  switch (action.type) {\r\n    case SORT_POSTS:\r\n      return handleSort(state, action);\r\n    case PREV_PAGE:\r\n      return handlePreviousPage(state, action);\r\n    case NEXT_PAGE:\r\n      return handleNextPage(state, action);\r\n    case REQUEST_POSTS:\r\n      return Object.assign({}, state, {\r\n        isFetching: true,\r\n        status: \"loading\",\r\n      });\r\n    case SPLICED_POST:\r\n      return Object.assign({}, state, {\r\n        byId: action.newObj,\r\n        allIds: action.splicedArray,\r\n        createdPosts: {},\r\n      });\r\n    case RECEIVE_SINGLE_POSTS:\r\n      return Object.assign({}, state, {\r\n        byId: { ...state.byId, ...action.temp },\r\n        allIds: [...state.allIds, action.id],\r\n      });\r\n    case RECEIVE_POSTS:\r\n      return {\r\n        ...state,\r\n        isFetching: false,\r\n        status: \"succeeded\",\r\n        byId: {\r\n          ...state.byId,\r\n          ...action.data.entities.posts,\r\n          ...state.createdPosts,\r\n        },\r\n        allIds: receievePosts(state, action),\r\n        firstId: action.data.result[0],\r\n        lastId: action.data.result[action.data.result.length - 1],\r\n      };\r\n    case VOTE_CAST:\r\n      return changePostPoint(state, action);\r\n    case DELETE_POST:\r\n      return Object.assign({}, state, {});\r\n    case NEW_COMMENT_SUCCESS:\r\n      return addComment(state, action);\r\n    case NEW_POST_REQUEST:\r\n      return Object.assign({}, state, {\r\n        submitted: false,\r\n        submitting: true,\r\n        reRouteId: \"\",\r\n      });\r\n    case EDIT_POST:\r\n      return editPostReduce(state, action);\r\n    case NEW_POST_SUCCESS:\r\n      return handlePostSubmission(state, action);\r\n    default:\r\n      return state;\r\n  }\r\n}\r\nfunction setPostModal(state, action) {\r\n  const { post } = action;\r\n\r\n  return {\r\n    ...state,\r\n    post,\r\n  };\r\n}\r\nfunction currentModal(\r\n  state = {\r\n    post: {},\r\n  },\r\n  action\r\n) {\r\n  switch (action.type) {\r\n    case SET_POST_MODAL:\r\n      return setPostModal(state, action);\r\n    case NEW_POST_SUCCESS:\r\n      return Object.assign({}, state, {\r\n        post: action.post,\r\n      });\r\n    default:\r\n      return state;\r\n  }\r\n}\r\nfunction commentIds(state, action) {\r\n  let comments = action.data.entities.comments;\r\n  let temp = [];\r\n  if (!comments) {\r\n    return [];\r\n  }\r\n  return Object.keys(comments);\r\n}\r\nfunction addCommentEntry(state, action) {\r\n  const { id, savedComment } = action;\r\n\r\n  const comment = { ...savedComment };\r\n\r\n  if (comment.parentId) {\r\n    const { parentId } = savedComment;\r\n    const newId = state.byId[parentId];\r\n\r\n    return {\r\n      ...state,\r\n      byId: {\r\n        [id]: comment,\r\n        ...state.byId,\r\n\r\n        [parentId]: {\r\n          ...state.byId[parentId],\r\n          comments: [id, ...state.byId[parentId].comments],\r\n        },\r\n      },\r\n\r\n      allId: [id, ...state.allId],\r\n    };\r\n  } else {\r\n    return {\r\n      ...state,\r\n      byId: {\r\n        ...state.byId,\r\n        [id]: comment,\r\n      },\r\n      allId: [id, ...state.allId],\r\n    };\r\n  }\r\n}\r\nfunction changeCommentPoint(state, action) {\r\n  if (action.commentId) {\r\n    const { commentId } = action;\r\n    const { point } = action;\r\n    const { currentVoteState } = action;\r\n    const comment = state.byId[commentId];\r\n    if (currentVoteState === 1 && point === 1) {\r\n      return {\r\n        ...state,\r\n        byId: {\r\n          ...state.byId,\r\n          [commentId]: {\r\n            ...comment,\r\n            voteState: 0,\r\n            voteTotal: state.byId[commentId].voteTotal - 1,\r\n          },\r\n        },\r\n      };\r\n    }\r\n    if (currentVoteState === 0 && point === 1) {\r\n      return {\r\n        ...state,\r\n        byId: {\r\n          ...state.byId,\r\n          [commentId]: {\r\n            ...comment,\r\n            voteState: 1,\r\n            voteTotal: state.byId[commentId].voteTotal + 1,\r\n          },\r\n        },\r\n      };\r\n    }\r\n    if (currentVoteState === 1 && point === -1) {\r\n      return {\r\n        ...state,\r\n        byId: {\r\n          ...state.byId,\r\n          [commentId]: {\r\n            ...comment,\r\n            voteState: -1,\r\n            voteTotal: state.byId[commentId].voteTotal - 2,\r\n          },\r\n        },\r\n      };\r\n    }\r\n    if (currentVoteState === 0 && point === -1) {\r\n      return {\r\n        ...state,\r\n        byId: {\r\n          ...state.byId,\r\n          [commentId]: {\r\n            ...comment,\r\n            voteState: -1,\r\n            voteTotal: state.byId[commentId].voteTotal - 1,\r\n          },\r\n        },\r\n      };\r\n    }\r\n    if (currentVoteState === -1 && point === -1) {\r\n      return {\r\n        ...state,\r\n        byId: {\r\n          ...state.byId,\r\n          [commentId]: {\r\n            ...comment,\r\n            voteState: 0,\r\n            voteTotal: state.byId[commentId].voteTotal + 1,\r\n          },\r\n        },\r\n      };\r\n    }\r\n    if (currentVoteState === -1 && point === 1) {\r\n      return {\r\n        ...state,\r\n        byId: {\r\n          ...state.byId,\r\n          [commentId]: {\r\n            ...comment,\r\n            voteState: 1,\r\n            voteTotal: state.byId[commentId].voteTotal + 2,\r\n          },\r\n        },\r\n      };\r\n    }\r\n  } else {\r\n    return state;\r\n  }\r\n}\r\nfunction onRecievePosts(state = {}, action) {}\r\nfunction comments(\r\n  state = {\r\n    byId: {},\r\n    allId: [],\r\n  },\r\n  action\r\n) {\r\n  switch (action.type) {\r\n    case RECEIVE_POSTS: {\r\n      return Object.assign({}, state, {\r\n        byId: action.data.entities.comments,\r\n        allId: commentIds(state, action),\r\n      });\r\n    }\r\n\r\n    case NEW_REPLY_SUCCESS:\r\n      return Object.assign({}, state, {\r\n        byId: { ...state.byId, ...action.temp },\r\n        allId: [...state.allId, action.newid],\r\n      });\r\n    case VOTE_CAST:\r\n      return changeCommentPoint(state, action);\r\n    case NEW_COMMENT_SUCCESS:\r\n      return addCommentEntry(state, action);\r\n    case NEW_REPLY_REQUEST:\r\n      return Object.assign({}, state, {});\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nfunction changeNewSubmissionType(\r\n  state = {\r\n    submissionType: \"\",\r\n  },\r\n  action\r\n) {\r\n  switch (action.type) {\r\n    case POST_CREATION_CHANGE_SUBMISSION_TYPE:\r\n      return Object.assign({}, state, {\r\n        submissionType: action.postType,\r\n      });\r\n    default:\r\n      return state;\r\n  }\r\n}\r\nfunction pageNumber(\r\n  state = {\r\n    currentPage: 0,\r\n    first_id: \"\",\r\n    last_id: \"\",\r\n  },\r\n  action\r\n) {\r\n  switch (action.type) {\r\n    case SET_POST:\r\n      return Object.assign({}, state, {\r\n        first_id: action.before,\r\n        last_id: action.after,\r\n      });\r\n    case NEXT_PAGE:\r\n      return Object.assign({}, state, {\r\n        currentPage: state.currentPage + 1,\r\n      });\r\n    case PREV_PAGE:\r\n      return Object.assign({}, state, {\r\n        currentPage: state.currentPage - 1,\r\n      });\r\n    default:\r\n      return state;\r\n  }\r\n}\r\nfunction signup(\r\n  state = {\r\n    isSigningUp: false,\r\n    isSignedUp: false,\r\n\r\n    err: null,\r\n    passwordError: null,\r\n  },\r\n  action\r\n) {\r\n  const { passwordError } = action;\r\n  switch (action.type) {\r\n    case SIGNUP_REQUEST:\r\n      return Object.assign({}, state, {\r\n        err: null,\r\n        passwordError: null,\r\n      });\r\n    case SIGNUP_SUCCESS:\r\n      return Object.assign({}, state, {\r\n        isSignedUp: true,\r\n        isSigningUp: false,\r\n        err: null,\r\n        passwordError: null,\r\n      });\r\n    case CLEAR_ERROR:\r\n      return Object.assign({}, state, {\r\n        err: null,\r\n      });\r\n    case SIGNUP_ERROR:\r\n      return Object.assign({}, state, {\r\n        err: action.error,\r\n        passwordError,\r\n      });\r\n    default:\r\n      return state;\r\n  }\r\n}\r\nfunction login(\r\n  state = {\r\n    isLoggingIn: false,\r\n    isLoggedIn: false,\r\n\r\n    err: null,\r\n  },\r\n  action\r\n) {\r\n  switch (action.type) {\r\n    case UNAUTHORIZED_ERROR:\r\n      return Object.assign({}, state, {\r\n        err: \"Username or Password do not match\",\r\n      });\r\n    case CLEAR_LOGIN_MODAL:\r\n      return Object.assign({}, state, {\r\n        err: null,\r\n      });\r\n    case LOGIN_REQUEST:\r\n      return Object.assign({}, state, {\r\n        isLoggingIn: true,\r\n        isLoggedIn: false,\r\n      });\r\n    case LOGIN_SUCCESS:\r\n      return Object.assign({}, state, {\r\n        isLoggingIn: false,\r\n        isLoggedIn: true,\r\n      });\r\n    case LOG_OUT:\r\n      return Object.assign({}, state, {\r\n        isLoggingIn: false,\r\n        isLoggingIn: false,\r\n      });\r\n    case LOGIN_ERROR:\r\n      return Object.assign({}, state, {\r\n        isLoggingIn: false,\r\n        isLoggedIn: false,\r\n      });\r\n    case CURRENT_USER:\r\n      return Object.assign({}, state, {\r\n        isLoggedIn: true,\r\n        currentUser: action.user,\r\n      });\r\n    default:\r\n      return state;\r\n  }\r\n}\r\nfunction currentUser(\r\n  state = {\r\n    username: \"\",\r\n    _id: \"\",\r\n\r\n    err: null,\r\n  },\r\n  action\r\n) {\r\n  switch (action.type) {\r\n    case LOG_OUT:\r\n      return Object.assign({}, state, {\r\n        username: \"\",\r\n        _id: \"\",\r\n      });\r\n    case REFRESH_USER:\r\n      return Object.assign({}, state, {\r\n        username: action.userInfo.username,\r\n        _id: action.userInfo._id,\r\n      });\r\n    case LOGIN_SUCCESS:\r\n      return Object.assign({}, state, {\r\n        username: action.username,\r\n        _id: action.id,\r\n      });\r\n    case CURRENT_USER:\r\n      return Object.assign({}, state, {\r\n        isLoggedIn: true,\r\n        username: action.user.username,\r\n        _id: action.user._id,\r\n      });\r\n    default:\r\n      return state;\r\n  }\r\n}\r\nconst rootReducer = combineReducers({\r\n  comments,\r\n  currentModal,\r\n  changeNewSubmissionType,\r\n  posts,\r\n  pageNumber,\r\n  login,\r\n  signup,\r\n  currentUser,\r\n  listings,\r\n});\r\n\r\nexport default rootReducer;\r\n","export const loadState = () => {\r\n  try {\r\n    const serializedState = localStorage.getItem(\"state\");\r\n    if (serializedState === null) {\r\n      return undefined;\r\n    }\r\n    return JSON.parse(serializedState);\r\n  } catch (err) {\r\n    return undefined;\r\n  }\r\n};\r\nexport const saveState = (state) => {\r\n  try {\r\n    const serializedState = JSON.stringify(state);\r\n    localStorage.setItem(\"state\", serializedState);\r\n  } catch {}\r\n};\r\n","import React, { useEffect } from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\n\r\nimport App from \"./App\";\r\nimport configureStore from \"./store/store\";\r\nimport { Provider } from \"react-redux\";\r\nimport { BrowserRouter, Route, Switch } from \"react-router-dom\";\r\nimport { createBrowserHistory } from \"history\";\r\nimport { saveState } from \"./localStorage\";\r\nimport { Router } from \"react-router\";\r\nconst store = configureStore();\r\n\r\nstore.subscribe(() => {\r\n  saveState(store.getState().currentUser);\r\n  saveState(store.getState().login);\r\n});\r\nconst history = createBrowserHistory();\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Provider store={store}>\r\n      <Router history={history}>\r\n        <Switch></Switch>\r\n        <Route component={App} />\r\n      </Router>\r\n    </Provider>\r\n  </React.StrictMode>,\r\n\r\n  document.getElementById(\"root\")\r\n);\r\n","import { createStore, applyMiddleware } from \"redux\";\r\nimport thunkMiddleware from \"redux-thunk\";\r\nimport { composeWithDevTools } from \"redux-devtools-extension\";\r\nimport rootReducer from \"../reducers/reducer\";\r\nimport { loadState } from \"../localStorage\";\r\nimport { alwaysReturnHelloMiddleware } from \"../middleware/middleware\";\r\nexport default function configureStore(preloadedState) {\r\n  const persistedState = loadState();\r\n  const composeEnhancers = composeWithDevTools({ trace: true });\r\n  return createStore(\r\n    rootReducer,\r\n    persistedState,\r\n    composeEnhancers(\r\n      applyMiddleware(thunkMiddleware)\r\n    )\r\n  );\r\n  \r\n}\r\n"],"sourceRoot":""}