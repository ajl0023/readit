{"version":3,"sources":["schemas.js","types.js","actions/postActions.js","actions/userActions.js","images/image-placeholder.svg","images/link-post.svg","images/reddit-default.svg","webpack:///./src/images/down-arrow.svg?0968","webpack:///./src/images/up-arrow.svg?3f43","components/Post.jsx","components/Login.jsx","components/Signup.jsx","components/Home.jsx","images/magnifying-glass.svg","images/hamburger.svg","images/Triangle.svg","components/Navbar.jsx","components/NewPost.jsx","actions/commentActions.js","images/down-arrow.svg","images/edit.svg","images/up-arrow.svg","components/Comment.jsx","components/PostModal.jsx","App.js","reducers/reducer.js","index.js","store/store.js","localStorage.js"],"names":["comment","schema","Entity","idAttribute","define","comments","post","REQUEST_POSTS","RECEIVE_POSTS","RECEIVE_SINGLE_POSTS","LOGIN_REQUEST","LOGIN_SUCCESS","LOGIN_ERROR","SIGNUP_REQUEST","SIGNUP_SUCCESS","SIGNUP_ERROR","CURRENT_USER","POST_CREATION_CHANGE_SUBMISSION_TYPE","NEW_POST_SUCCESS","NEW_POST_REQUEST","NEW_COMMENT_SUCCESS","NEW_REPLY_REQUEST","NEW_REPLY_SUCCESS","VOTE_CAST","NEXT_PAGE","PREV_PAGE","DELETE_POST","EDIT_POST","LOG_OUT","CLEAR_ERROR","SET_POST_MODAL","SPLICED_POST","REFRESH_USER","UNAUTHORIZED_ERROR","SORT_POSTS","CLEAR_LOGIN_MODAL","REQUEST_USER_INFO","requestPosts","e","type","changePostSubmissionType","postType","dispatch","getState","currentValue","changeNewSubmissionType","submissionType","changePoint","point","postId","currentPostId","currentVoteState","posts","byId","voteState","axios","url","method","withCredentials","submitPost","form","data","then","res","status","id","_id","submitPostSuccess","getNormalizeData","myData","params","normalize","fetchPosts","query","sort","normalizedData","offset","nextPage","Promise","resolve","retryCount","logOut","localStorage","removeItem","login","username","password","loginSuccess","jwt_token","token","setItem","catch","signup","passwordConfirm","err","passwordError","error","response","interceptors","request","use","config","accessToken","getItem","headers","originalRequest","_retry","reject","defaults","common","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","_ref2","transform","d","SvgDownArrow","_ref","svgRef","title","titleId","props","width","height","viewBox","ref","undefined","ForwardRef","SvgUpArrow","Post","useState","deleteButton","setDelete","setActive","useParams","useDispatch","postStore","useSelector","state","allIds","currentUser","postStatus","listings","confirmedDelete","deletePost","className","author","onClick","to","pathname","modal","alt","voteTotal","Login","setUsername","setPassword","isLoggedIn","handleLogin","x","window","location","reload","close","onChange","value","placeholder","onKeyDown","Signup","setPasswordConfirm","user","useEffect","Home","postsToDisplay","allPosts","loggedIn","listingOrder","sortOrder","currentIds","queryParams","history","search","offSetId","after","URLSearchParams","get","before","map","bottomRef","useCallback","node","shouldFetch","observer","IntersectionObserver","entries","intersectionRatio","disconnect","observe","threshold","listing","handlePostType","handleShowLogin","showSignup","src","defaultPic","imagePost","linkPost","pastParams","match","withRouter","dropdown","setDropDown","searchInput","setSearchInput","searchContent","setSearchContent","searchActive","setSearchActive","currentModal","flattened","handleSearchContent","a","trimStart","trimmed","filter","RegExp","test","filtered","handleCloseSearch","closeSearch","document","body","addEventListener","removeEventListener","replace","style","overflow","newPost","path","searchicon","backgroundColor","triangle","handleShowSignup","htmlFor","NewPost","useLocation","newQuery","newQuery2","useHistory","setTitle","text","setText","imagedata","setImage","submitCheck","submitted","fetchingLogin","fetching","reRouteId","push","replaceState","action","files","name","cols","rows","preventDefault","FormData","append","uploadForm","newComment","content","savedComment","parentId","newCommentSuccess","changeCommentPoint","commentId","currentCommentId","_ref3","_ref4","_ref5","_ref6","_ref7","_ref8","_ref9","_ref10","_ref11","_ref12","_ref13","_ref14","_ref15","_ref16","_ref17","_ref18","SvgEdit","Comment","allComments","replyText","setReplyText","replyToggle","setReplyToggle","nestedComments","marginLeft","marginTop","upvote","downvote","authorName","reply","newReply","connect","ownProps","commentText","setCommentText","edit","setEdit","editText","setEditText","currentPost","handleReroute","saveEdit","date","Date","createdAt","formatDate","Intl","DateTimeFormat","format","stopPropagation","image","showLogin","setLogin","setFetchingLogin","setShowSignup","loggedInStatus","signedUpStatus","isSignedUp","closeModal","handleShowNextPage","lastId","exact","render","props2","combineArrays","arr1","arr2","combined","concat","set","Set","addComment","changePostPoint","handlePostSubmission","submitting","createdPosts","editPostReduce","handlePreviousPage","incomingIds","result","isFetching","entities","handleNextPage","setListings","prev","receievePosts","setPostModal","addCommentEntry","rootReducer","combineReducers","allId","firstId","newObj","splicedArray","filteredPosts","isLoggingIn","isSigningUp","userInfo","store","preloadedState","persistedState","serializedState","JSON","parse","loadState","composeEnhancers","composeWithDevTools","trace","createStore","applyMiddleware","thunkMiddleware","configureStore","createBrowserHistory","ReactDOM","StrictMode","component","App","getElementById"],"mappings":"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","file":"static/js/main.84141e10.chunk.js","sourcesContent":["import { schema } from \"normalizr\";\r\nexport const comment = new schema.Entity(\r\n  \"comments\",\r\n  {},\r\n  { idAttribute: \"_id\" }\r\n);\r\ncomment.define({\r\n  comments: [comment],\r\n});\r\nexport const post = new schema.Entity(\r\n  \"posts\",\r\n  {\r\n    comments: [comment],\r\n  },\r\n  { idAttribute: \"_id\" }\r\n);\r\n","export const REQUEST_POSTS = \"REQUEST_POSTS\";\r\nexport const RECEIVE_POSTS = \"RECEIVE_POSTS\";\r\nexport const REQUEST_SINGLE_POST = \"REQUEST_SINGLE_POST\";\r\nexport const RECEIVE_SINGLE_POSTS = \"RECEIVE_SINGLE_POSTS\";\r\nexport const LOGIN_REQUEST = \"LOGIN_REQUEST\";\r\nexport const LOGIN_SUCCESS = \"LOGIN_SUCCESS\";\r\nexport const LOGIN_ERROR = \"LOGIN_ERROR\";\r\nexport const SIGNUP_REQUEST = \"SIGNUP_REQUEST\";\r\nexport const SIGNUP_SUCCESS = \"SIGNUP_SUCCESS\";\r\nexport const SIGNUP_ERROR = \"SIGNUP_ERROR\";\r\nexport const CURRENT_USER = \"CURRENT_USER\";\r\nexport const POST_CREATION_CHANGE_SUBMISSION_TYPE =\r\n  \"POST_CREATION_CHANGE_SUBMISSION_TYPE\";\r\nexport const NEW_POST_SUCCESS = \"NEW_POST_SUCCESS\";\r\nexport const NEW_POST_REQUEST = \"NEW_POST_REQUEST\";\r\nexport const RESET_POST = \"RESET_POST\";\r\nexport const NEW_COMMENT_REQUEST = \"NEW_COMMENT_REQUEST\";\r\nexport const NEW_COMMENT_SUCCESS = \"NEW_COMMENT_SUCCESS\";\r\nexport const CHANGE_TO_MEDIA = \"CHANGE_TO_MEDIA\";\r\nexport const NEW_REPLY_REQUEST = \"NEW_REPLY_REQUEST\";\r\nexport const NEW_REPLY_SUCCESS = \"NEW_REPLY_SUCCESS\";\r\nexport const VOTE_CAST = \"VOTE_CAST\";\r\nexport const NEXT_PAGE = \"NEXT_PAGE\";\r\nexport const PREV_PAGE = \"PREV_PAGE\";\r\nexport const DELETE_POST = \"DELETE_POST\";\r\nexport const EDIT_POST = \"EDIT_POST\";\r\nexport const LOG_OUT = \"LOG_OUT\";\r\nexport const CLEAR_ERROR = \"CLEAR_ERROR\";\r\nexport const LOGIN_FAILURE = \"LOGIN_FAILURE\";\r\nexport const SET_POST_MODAL = \"SET_POST_MODAL\";\r\nexport const SPLICED_POST = \"SPLICED_POST\";\r\nexport const REFRESH_USER = \"REFRESH_USER\";\r\nexport const SET_POST = \"SET_POST\";\r\nexport const UNAUTHORIZED_ERROR = \"UNAUTHORIZED_ERROR\";\r\nexport const SORT_POSTS = \"SORT_POSTS\";\r\nexport const SORT_POSTS_REQUEST = \"SORT_POSTS_REQUEST\";\r\nexport const GET_SINGLE_POST = \"GET_SINGLE_POST\";\r\nexport const CLEAR_LOGIN_MODAL = \"CLEAR_LOGIN_MODAL\";\r\nexport const REQUEST_USER_INFO = \"REQUEST_USER_INFO\";\r\n","import axios from \"axios\";\r\nimport { normalize } from \"normalizr\";\r\nimport { post } from \"../schemas\";\r\nimport {\r\n  DELETE_POST,\r\n  EDIT_POST,\r\n  NEW_POST_REQUEST,\r\n  NEW_POST_SUCCESS,\r\n  NEXT_PAGE,\r\n  POST_CREATION_CHANGE_SUBMISSION_TYPE,\r\n  PREV_PAGE,\r\n  RECEIVE_POSTS,\r\n  RECEIVE_SINGLE_POSTS,\r\n  REQUEST_POSTS,\r\n  REQUEST_SINGLE_POST,\r\n  RESET_POST,\r\n  SET_POST,\r\n  SET_POST_MODAL,\r\n  SORT_POSTS,\r\n  VOTE_CAST,\r\n} from \"../types\";\r\nfunction requestPosts(e) {\r\n  return {\r\n    type: REQUEST_POSTS,\r\n    e,\r\n  };\r\n}\r\n\r\nfunction submitPostSuccess(post) {\r\n  let id = post._id;\r\n  post[\"newPost\"] = true;\r\n  return (dispatch) => {\r\n    dispatch({ type: NEW_POST_SUCCESS, post, id });\r\n  };\r\n}\r\nexport function newPostSubmissionType(postType) {\r\n  return (dispatch) => {\r\n    dispatch({ type: POST_CREATION_CHANGE_SUBMISSION_TYPE, postType });\r\n  };\r\n}\r\nexport function changePostSubmissionType(postType) {\r\n  return (dispatch, getState) => {\r\n    let currentValue = getState().changeNewSubmissionType.submissionType;\r\n    if (postType === currentValue) {\r\n      return;\r\n    } else {\r\n      dispatch({\r\n        type: POST_CREATION_CHANGE_SUBMISSION_TYPE,\r\n        postType,\r\n      });\r\n    }\r\n  };\r\n}\r\nexport function changePoint(point, postId) {\r\n  return (dispatch, getState) => {\r\n    let currentPostId = postId;\r\n    let currentPost = getState().posts.byId[currentPostId];\r\n    let currentVoteState = currentPost.voteState;\r\n    dispatch({\r\n      type: VOTE_CAST,\r\n      postId,\r\n      point,\r\n      currentVoteState,\r\n    });\r\n    if (point === 1) {\r\n      return axios({\r\n        url: `/api/posts/vote-up/${currentPostId}`,\r\n        method: \"PUT\",\r\n        withCredentials: true,\r\n      });\r\n    }\r\n    if (point === -1) {\r\n      return axios({\r\n        url: `/api/posts/vote-down/${currentPostId}`,\r\n        method: \"PUT\",\r\n        withCredentials: true,\r\n      });\r\n    }\r\n  };\r\n}\r\nexport function setPostModal(post) {\r\n  return {\r\n    type: SET_POST_MODAL,\r\n    post,\r\n  };\r\n}\r\nexport function submitPostAttempt() {\r\n  return {\r\n    type: NEW_POST_REQUEST,\r\n  };\r\n}\r\nexport function submitPost(form) {\r\n  return (dispatch) => {\r\n    return axios({\r\n      url: `/api/post/new/`,\r\n      method: \"POST\",\r\n      data: form,\r\n      withCredentials: true,\r\n    }).then((res) => {\r\n      if (res.status === 200) {\r\n        dispatch(submitPostSuccess(res.data));\r\n      }\r\n    });\r\n  };\r\n}\r\nfunction requestSinglePost() {\r\n  return {\r\n    type: REQUEST_SINGLE_POST,\r\n  };\r\n}\r\nexport function reset() {\r\n  return {\r\n    type: RESET_POST,\r\n  };\r\n}\r\nfunction getNormalizeData(myData, params) {\r\n  const normalizedData = normalize(myData.posts, [post]);\r\n  return normalizedData;\r\n}\r\nexport function sortPosts() {}\r\nexport function deletePost(postId, params) {\r\n  return (dispatch) => {\r\n    dispatch({\r\n      type: DELETE_POST,\r\n      postId,\r\n      params: params ? params : \"default\",\r\n    });\r\n    return axios({\r\n      url: `/api/delete/${postId}`,\r\n      method: \"DELETE\",\r\n      withCredentials: true,\r\n    });\r\n  };\r\n}\r\nexport function editPost(postId, content) {\r\n  return (dispatch) => {\r\n    dispatch({ type: EDIT_POST, postId, content });\r\n    return axios({\r\n      url: `/api/edit/${postId}`,\r\n      method: \"PUT\",\r\n      withCredentials: true,\r\n      data: {\r\n        content: content,\r\n      },\r\n    });\r\n  };\r\n}\r\nexport function fetchPosts(query, id, params, e) {\r\n  return (dispatch) => {\r\n    dispatch(requestPosts(e));\r\n    axios({\r\n      url: `/api/posts/${params && params.sort ? params.sort : \"\"}${\r\n        query ? `?${query}=${id}` : \"\"\r\n      }`,\r\n      method: \"GET\",\r\n      withCredentials: true,\r\n    }).then((res) => {\r\n      const normalizedData = getNormalizeData(\r\n        { posts: res.data.posts },\r\n        params\r\n      );\r\n      dispatch({\r\n        type:\r\n          params && params.sort && e === \"click\" ? SORT_POSTS : RECEIVE_POSTS,\r\n        normalizedData,\r\n        offset: res.data.offset,\r\n        sort: params && params.sort ? params.sort : \"default\",\r\n      });\r\n    });\r\n  };\r\n}\r\nexport function prevPage(id, params) {\r\n  return (dispatch) => {\r\n    dispatch(requestPosts());\r\n    return new Promise((resolve) => {\r\n      axios({\r\n        url: `/api/posts/${\r\n          params.length > 0 ? params : \"\"\r\n        }?page[size]=${10}&before=${id}`,\r\n        method: \"GET\",\r\n        withCredentials: true,\r\n      }).then((res) => {\r\n        if (res.status === 200) {\r\n          const normalizedData = getNormalizeData(\r\n            { posts: res.data.posts },\r\n            params\r\n          );\r\n          dispatch({\r\n            type: PREV_PAGE,\r\n            normalizedData,\r\n            offset: res.data.offset,\r\n            sort: params.sort ? params.sort : \"default\",\r\n          });\r\n          resolve(\"completed\");\r\n        }\r\n      });\r\n    });\r\n  };\r\n}\r\nexport function nextPage(id, params) {\r\n  return (dispatch) => {\r\n    dispatch(requestPosts());\r\n    return new Promise((resolve) => {\r\n      axios({\r\n        url: `/api/posts/${\r\n          params && params.sort ? params.sort : \"\"\r\n        }?page[size]=${10}&after=${id}`,\r\n        method: \"GET\",\r\n        withCredentials: true,\r\n      }).then((res) => {\r\n        if (res.status === 200) {\r\n          const normalizedData = getNormalizeData(\r\n            { posts: res.data.posts },\r\n            params\r\n          );\r\n          dispatch({\r\n            type: NEXT_PAGE,\r\n            normalizedData,\r\n            offset: res.data.offset,\r\n            sort: params.sort ? params.sort : \"default\",\r\n          });\r\n          resolve(\"completed\");\r\n        }\r\n      });\r\n    });\r\n  };\r\n}\r\nexport function setPostRange(before, after) {\r\n  return { type: SET_POST, before, after };\r\n}\r\nexport function fetchSinglePost(id) {\r\n  return (dispatch) => {\r\n    dispatch(requestSinglePost());\r\n    return axios({\r\n      url: `/api/post/${id}`,\r\n      method: \"GET\",\r\n      withCredentials: true,\r\n    }).then((res) => {\r\n      const normalizedData = getNormalizeData({ posts: [res.data] });\r\n      dispatch({ normalizedData, type: RECEIVE_SINGLE_POSTS });\r\n    });\r\n  };\r\n}\r\n","import axios from \"axios\";\r\nimport {\r\n  CLEAR_LOGIN_MODAL,\r\n  CURRENT_USER,\r\n  LOGIN_REQUEST,\r\n  LOGIN_SUCCESS,\r\n  LOG_OUT,\r\n  REQUEST_USER_INFO,\r\n  SIGNUP_ERROR,\r\n  SIGNUP_REQUEST,\r\n  SIGNUP_SUCCESS,\r\n  UNAUTHORIZED_ERROR,\r\n} from \"../types\";\r\nlet retryCount = 0;\r\naxios.interceptors.request.use((config) => {\r\n  const accessToken = localStorage.getItem(\"accessToken\");\r\n  if (accessToken) {\r\n    config.headers[\"Authorization\"] = `Bearer ${accessToken}`;\r\n  }\r\n  return config;\r\n});\r\naxios.interceptors.response.use(\r\n  function (response) {\r\n    return response;\r\n  },\r\n  function (err) {\r\n    const originalRequest = err.config;\r\n    if (\r\n      (err.response.status === 401 || err.response.status === 403) &&\r\n      !originalRequest._retry &&\r\n      retryCount <= 2 &&\r\n      err.config.url !== \"/api/refresh\"\r\n    ) {\r\n      retryCount = retryCount + 1;\r\n      originalRequest._retry = true;\r\n      axios({\r\n        url: \"/api/refresh\",\r\n        method: \"POST\",\r\n        withCredentials: true,\r\n      }).then((data) => {\r\n        if (data.data) {\r\n          localStorage.setItem(\"accessToken\", data.data.jwt_token);\r\n          axios.defaults.headers.common[\"Authorization\"] =\r\n            \"Bearer \" + data.jwt_token;\r\n          originalRequest.headers[\"Authorization\"] =\r\n            \"Bearer \" + data.data.jwt_token;\r\n          return axios(originalRequest);\r\n        }\r\n      });\r\n    } else {\r\n      return Promise.reject(err);\r\n    }\r\n  }\r\n);\r\nfunction loginRequest() {\r\n  return {\r\n    type: LOGIN_REQUEST,\r\n  };\r\n}\r\nfunction loginSuccess(username, id) {\r\n  return (dispatch) => {\r\n    dispatch({\r\n      type: LOGIN_SUCCESS,\r\n      username,\r\n      id,\r\n    });\r\n    Promise.resolve(\"success\");\r\n  };\r\n}\r\nexport function logOut() {\r\n  return (dispatch) => {\r\n    return axios({\r\n      url: \"/api/logout\",\r\n      withCredentials: true,\r\n      method: \"POST\",\r\n    }).then((res) => {\r\n      if (res.status === 200) {\r\n        localStorage.removeItem(\"accessToken\");\r\n        return res;\r\n      }\r\n    });\r\n  };\r\n}\r\nfunction unauthorized() {\r\n  return {\r\n    type: UNAUTHORIZED_ERROR,\r\n  };\r\n}\r\nexport function login(username, password) {\r\n  return (dispatch) => {\r\n    dispatch(loginRequest());\r\n    return axios({\r\n      withCredentials: true,\r\n      method: \"POST\",\r\n      data: {\r\n        username: username,\r\n        password: password,\r\n      },\r\n      url: \"/api/login\",\r\n    })\r\n      .then((res) => {\r\n        if (res.status === 200) {\r\n          dispatch(loginSuccess(res.data.username, res.data._id));\r\n          let token = res.data.jwt_token;\r\n          return token;\r\n        }\r\n      })\r\n      .then((token) => {\r\n        localStorage.setItem(\"accessToken\", token);\r\n        return \"login\";\r\n      })\r\n      .catch(() => {\r\n        dispatch(unauthorized());\r\n      });\r\n  };\r\n}\r\nexport function clearLoginModal() {\r\n  return {\r\n    type: CLEAR_LOGIN_MODAL,\r\n  };\r\n}\r\n\r\nexport function loggedIn() {\r\n  const token = localStorage.getItem(\"accessToken\");\r\n  return async (dispatch) => {\r\n    if (!token) {\r\n      return \"completed\";\r\n    }\r\n    dispatch({ type: REQUEST_USER_INFO });\r\n    const data = await axios({\r\n      withCredentials: true,\r\n      method: \"GET\",\r\n      url: \"/api/logged-in\",\r\n    });\r\n    try {\r\n      dispatch({\r\n        type: CURRENT_USER,\r\n        username: data.data.username,\r\n        user: data.data._id,\r\n      });\r\n      return \"completed\";\r\n    } catch (error) {\r\n      dispatch(logOut());\r\n    }\r\n  };\r\n}\r\n\r\nexport function signupRequest() {\r\n  return {\r\n    type: SIGNUP_REQUEST,\r\n  };\r\n}\r\nfunction signupSuccess() {\r\n  return {\r\n    type: SIGNUP_SUCCESS,\r\n  };\r\n}\r\nexport function signup(username, password, passwordConfirm) {\r\n  return (dispatch) => {\r\n    dispatch({ type: SIGNUP_REQUEST });\r\n    return axios({\r\n      url: \"/api/signup\",\r\n      data: {\r\n        username,\r\n        password,\r\n        passwordConfirm,\r\n      },\r\n      method: \"POST\",\r\n    })\r\n      .then((res) => {\r\n        if (res.status === 200) {\r\n          dispatch(signupSuccess());\r\n          return \"signup\";\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        let error = err.response.data;\r\n        let passwordError;\r\n        if (password !== passwordConfirm) {\r\n          passwordError = \"Passwords do not match\";\r\n        }\r\n        dispatch({ type: SIGNUP_ERROR, error, passwordError });\r\n      });\r\n  };\r\n}\r\n","export default __webpack_public_path__ + \"static/media/image-placeholder.1c6a32aa.svg\";","export default __webpack_public_path__ + \"static/media/link-post.cdb86b79.svg\";","export default __webpack_public_path__ + \"static/media/reddit-default.f7d549ef.svg\";","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"g\", {\n  id: \"Page-1\"\n}, /*#__PURE__*/React.createElement(\"g\", {\n  id: \"Desktop-(Card)\",\n  transform: \"translate(-516.000000, -289.000000)\"\n}, /*#__PURE__*/React.createElement(\"g\", {\n  id: \"Group-6\",\n  transform: \"translate(428.000000, 154.000000)\"\n}, /*#__PURE__*/React.createElement(\"g\", {\n  id: \"Group\",\n  transform: \"translate(16.000000, 134.000000)\"\n}, /*#__PURE__*/React.createElement(\"g\", {\n  id: \"down-arrow-copy\",\n  transform: \"translate(72.000000, 1.000000)\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M12.2275497,7.76096702 C12.1820052,7.65192943 12.0757255,7.58077755 11.957786,7.58077755 L8.75858504,7.58077755 L8.75858504,0.291577829 C8.75858504,0.130631897 8.62778141,0 8.4666239,0 L3.79538263,0 C3.63422512,0 3.50342149,0.130631897 3.50342149,0.291577829 L3.50342149,7.58080489 L0.291958509,7.58080489 C0.174019021,7.58080489 0.0677393658,7.65195676 0.0221948522,7.76042033 C-0.0227748808,7.86945792 0.00174908806,7.99484158 0.0852564863,8.07823934 L5.90969908,13.9142788 C5.96457693,13.9690846 6.03875099,14 6.1164011,14 C6.19405121,14 6.26822527,13.9690846 6.32310313,13.9148528 L12.1644881,8.07881337 C12.2479955,7.99538827 12.2730942,7.87003194 12.2275497,7.76096702 Z\",\n  id: \"Path\"\n}))))));\n\nfunction SvgDownArrow(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: \"13px\",\n    height: \"14px\",\n    viewBox: \"0 0 13 14\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title === undefined ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, \"down-arrow copy\") : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgDownArrow);\nexport default __webpack_public_path__ + \"static/media/down-arrow.c9c98d5d.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"g\", {\n  id: \"Page-1\"\n}, /*#__PURE__*/React.createElement(\"g\", {\n  id: \"Desktop-(Card)\",\n  transform: \"translate(-444.000000, -289.000000)\"\n}, /*#__PURE__*/React.createElement(\"g\", {\n  id: \"Group-6\",\n  transform: \"translate(428.000000, 154.000000)\"\n}, /*#__PURE__*/React.createElement(\"g\", {\n  id: \"Group\",\n  transform: \"translate(16.000000, 134.000000)\"\n}, /*#__PURE__*/React.createElement(\"g\", {\n  id: \"down-arrow\",\n  transform: \"translate(6.500000, 8.000000) scale(1, -1) translate(-6.500000, -8.000000) translate(0.000000, 1.000000)\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M12.2275497,7.76096702 C12.1820052,7.65192943 12.0757255,7.58077755 11.957786,7.58077755 L8.75858504,7.58077755 L8.75858504,0.291577829 C8.75858504,0.130631897 8.62778141,0 8.4666239,0 L3.79538263,0 C3.63422512,0 3.50342149,0.130631897 3.50342149,0.291577829 L3.50342149,7.58080489 L0.291958509,7.58080489 C0.174019021,7.58080489 0.0677393658,7.65195676 0.0221948522,7.76042033 C-0.0227748808,7.86945792 0.00174908806,7.99484158 0.0852564863,8.07823934 L5.90969908,13.9142788 C5.96457693,13.9690846 6.03875099,14 6.1164011,14 C6.19405121,14 6.26822527,13.9690846 6.32310313,13.9148528 L12.1644881,8.07881337 C12.2479955,7.99538827 12.2730942,7.87003194 12.2275497,7.76096702 Z\",\n  id: \"Path\"\n}))))));\n\nfunction SvgUpArrow(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: \"13px\",\n    height: \"14px\",\n    viewBox: \"0 0 13 14\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title === undefined ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, \"down-arrow\") : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgUpArrow);\nexport default __webpack_public_path__ + \"static/media/up-arrow.927fb299.svg\";\nexport { ForwardRef as ReactComponent };","import DeleteIcon from \"@material-ui/icons/Delete\";\r\nimport React, { useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Link, useParams } from \"react-router-dom\";\r\nimport { deletePost, fetchSinglePost } from \"../actions/postActions\";\r\nimport { ReactComponent as DownArrow } from \"../images/down-arrow.svg\";\r\nimport { ReactComponent as UpArrow } from \"../images/up-arrow.svg\";\r\nconst Post = ({ post }) => {\r\n  const [deleteButton, setDelete] = useState(false);\r\n  const [, setActive] = useState(true);\r\n  const params = useParams();\r\n  const dispatch = useDispatch();\r\n  const postStore = useSelector((state) => {\r\n    return state.posts.allIds;\r\n  });\r\n  const currentUser = useSelector((state) => state.currentUser._id);\r\n  const postStatus = useSelector((state) => state.listings.status);\r\n  const handleDelete = () => {\r\n    setDelete(!deleteButton);\r\n  };\r\n  const confirmedDelete = (postId) => {\r\n    dispatch(deletePost(postId, params.sort === \"post\" ? null : params));\r\n    setActive(false);\r\n  };\r\n  if (!postStore[0]) {\r\n    return <div></div>;\r\n  }\r\n  return (\r\n    <>\r\n      <div key={post._id} className=\"card-container\">\r\n        <div\r\n          className={`card-content-container ${\r\n            postStatus === \"loading\" ? \"content-loading-mask\" : \"\"\r\n          }`}\r\n        >\r\n          <p className={\"card-author\"}>u/{post.author.username}</p>\r\n          <h4 className=\"card-title\">\r\n            <Link\r\n              onClick={() => {\r\n                dispatch(fetchSinglePost(post._id));\r\n              }}\r\n              to={{\r\n                pathname: `/post/${post._id}`,\r\n                state: {\r\n                  modal: true,\r\n                },\r\n              }}\r\n            >\r\n              {post.title}\r\n            </Link>\r\n          </h4>\r\n          <div className=\"vote-container\">\r\n            <li>\r\n              <UpArrow\r\n                className={post.voteState === 1 ? `home-vote-color` : ``}\r\n                alt=\"\"\r\n              />\r\n            </li>\r\n            <li>{post.voteTotal}</li>\r\n            <li>\r\n              <DownArrow\r\n                className={post.voteState === -1 ? `home-vote-color` : ``}\r\n                alt=\"\"\r\n              />\r\n            </li>\r\n          </div>\r\n        </div>\r\n        {currentUser === post.author._id ? (\r\n          <div className=\"edit-del-container\">\r\n            <div className=\"edit-del-content\">\r\n              {deleteButton ? (\r\n                <div className=\"delete-confirm-container\">\r\n                  <div>\r\n                    <p className=\"delete-confirm\">Delete?</p>\r\n                  </div>\r\n                  <li\r\n                    onClick={() => confirmedDelete(post._id)}\r\n                    className=\"delete-button-yes\"\r\n                  >\r\n                    Yes\r\n                  </li>\r\n                  <li className=\"delete-button-slash\">/</li>\r\n                  <li className=\"delete-button-yes\">No</li>\r\n                </div>\r\n              ) : null}\r\n              <button onClick={handleDelete} className=\"delete-button\">\r\n                <DeleteIcon className=\"del-svg\" />\r\n              </button>\r\n            </div>\r\n          </div>\r\n        ) : null}\r\n      </div>\r\n    </>\r\n  );\r\n};\r\nexport default Post;\r\n","import React, { useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { login } from \"../actions/userActions\";\r\nconst Login = (props) => {\r\n  const [username, setUsername] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const dispatch = useDispatch();\r\n  const user = useSelector((state) => {\r\n    return state.login.isLoggedIn;\r\n  });\r\n  const error = useSelector((state) => {\r\n    return state.login.err;\r\n  });\r\n  const handleLogin = (e) => {\r\n    if (e.key === \"Enter\" || e.type === \"click\") {\r\n      dispatch(login(username, password)).then((x) => {\r\n        if (x === \"login\") {\r\n          window.location.reload();\r\n        }\r\n      });\r\n    }\r\n  };\r\n  if (user) {\r\n  }\r\n  return (\r\n    <div className=\"login-modal-wrapper\">\r\n      <div className=\"login-card-modal\">\r\n        <div className=\"login-modal-title-exit-container\">\r\n          <p className=\"login-modal-title\">Login</p>\r\n          <button onClick={props.close} className=\"login-cancel-button\">\r\n            X\r\n          </button>\r\n        </div>\r\n        <div className=\"login-input-container\">\r\n          <input\r\n            onChange={(e) => {\r\n              setUsername(e.target.value);\r\n            }}\r\n            className=\"login-input\"\r\n            placeholder=\"username\"\r\n            type=\"text\"\r\n          />\r\n          <input\r\n            onKeyDown={handleLogin}\r\n            onChange={(e) => {\r\n              setPassword(e.target.value);\r\n            }}\r\n            className=\"login-input\"\r\n            placeholder=\"password\"\r\n            type=\"password\"\r\n          />{\" \"}\r\n          <p className={`signup-error`}>{error}</p>\r\n          <button onClick={handleLogin} className=\"login-button\">\r\n            Log in\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\nexport default Login;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport { signup, signupRequest } from \"../actions/userActions\";\r\nimport { CLEAR_ERROR } from \"../types\";\r\nimport Login from \"./Login\";\r\nconst Signup = (props) => {\r\n  const [username, setUsername] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [passwordConfirm, setPasswordConfirm] = useState(\"\");\r\n  const dispatch = useDispatch();\r\n  const user = useSelector((state) => {\r\n    return state.login.isLoggedIn;\r\n  });\r\n  const error = useSelector((state) => {\r\n    return state.signup.err;\r\n  });\r\n  const passwordError = useSelector((state) => {\r\n    return state.signup.passwordError;\r\n  });\r\n  const handleSignup = () => {\r\n    dispatch(signup(username, password, passwordConfirm)).then((res) => {\r\n      if (res === \"signup\") {\r\n        <Redirect to={Login}></Redirect>;\r\n      }\r\n    });\r\n  };\r\n  const handleError = () => {\r\n    dispatch({ type: CLEAR_ERROR });\r\n  };\r\n  if (user) {\r\n    window.location.reload();\r\n  }\r\n  useEffect(() => {\r\n    dispatch(signupRequest());\r\n  }, [dispatch]);\r\n  return (\r\n    <div className=\"login-modal-wrapper\">\r\n      <div className=\"login-card-modal\">\r\n        <div className=\"login-modal-title-exit-container\">\r\n          <p className=\"login-modal-title\">Sign up</p>\r\n          <button onClick={props.close} className=\"login-cancel-button\">\r\n            X\r\n          </button>\r\n        </div>\r\n        <div className=\"login-input-container\">\r\n          <input\r\n            onChange={(e) => {\r\n              setUsername(e.target.value);\r\n            }}\r\n            onClick={handleError}\r\n            className=\"login-input\"\r\n            placeholder=\"username\"\r\n            type=\"text\"\r\n          />\r\n          <p className={`signup-error`}>{error}</p>\r\n          <input\r\n            onChange={(e) => {\r\n              setPassword(e.target.value);\r\n            }}\r\n            className=\"login-input\"\r\n            placeholder=\"password\"\r\n            type=\"password\"\r\n          />\r\n          <p className={`signup-error`}>{passwordError}</p>\r\n          <input\r\n            onChange={(e) => {\r\n              setPasswordConfirm(e.target.value);\r\n            }}\r\n            className=\"login-input\"\r\n            placeholder=\"Confirm your password\"\r\n            type=\"password\"\r\n          />\r\n          <button onClick={handleSignup} className=\"login-button\">\r\n            Sign up\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\nexport default Signup;\r\n","import React, { useCallback, useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Link, useParams } from \"react-router-dom\";\r\nimport {\r\n  fetchPosts,\r\n  newPostSubmissionType,\r\n  nextPage,\r\n  submitPostAttempt,\r\n} from \"../actions/postActions\";\r\nimport imagePost from \"../images/image-placeholder.svg\";\r\nimport linkPost from \"../images/link-post.svg\";\r\nimport defaultPic from \"../images/reddit-default.svg\";\r\nimport Post from \"./Post\";\r\nimport Signup from \"./Signup\";\r\nfunction Home(props) {\r\n  const dispatch = useDispatch();\r\n  const allPosts = useSelector((state) => {\r\n    return state.posts.byId;\r\n  });\r\n  const loggedIn = useSelector((state) => state.login.isLoggedIn);\r\n  const postStatus = useSelector((state) => state.posts.status);\r\n  const params = useParams();\r\n  const listingOrder = useSelector((state) => state.listings.listingOrder);\r\n  const sortOrder = useSelector((state) => state.listings.sortOrder);\r\n  const currentIds = listingOrder[sortOrder];\r\n  let queryParams = props.history.location.search;\r\n  const offSetId = useSelector((state) => {\r\n    return state.posts.offset;\r\n  });\r\n  let after = new URLSearchParams(queryParams).get(\"after\");\r\n  let before = new URLSearchParams(queryParams).get(\"before\");\r\n  let query = (after && \"after\") || (before && \"before\");\r\n  let id = after || before;\r\n  let postsToDisplay;\r\n  if (currentIds) {\r\n    postsToDisplay = currentIds.map((id) => {\r\n      return allPosts[id];\r\n    });\r\n  }\r\n  const bottomRef = useCallback(\r\n    (node) => {\r\n      const options = {\r\n        threshold: [0],\r\n      };\r\n      let shouldFetch = true;\r\n      var observer = new IntersectionObserver(function (entries, observer) {\r\n        if (entries[0].intersectionRatio > 0 && shouldFetch && offSetId) {\r\n          observer.disconnect();\r\n          dispatch(nextPage(offSetId, params)).then((status) => {\r\n            shouldFetch = false;\r\n            if (status === \"completed\") {\r\n              observer.observe(node);\r\n            }\r\n          });\r\n        }\r\n      }, options);\r\n      if (node) {\r\n        observer.observe(node);\r\n      } else {\r\n        observer.disconnect();\r\n      }\r\n    },\r\n    [offSetId]\r\n  );\r\n  useEffect(() => {\r\n    dispatch(fetchPosts(query, id, params.sort === \"post\" ? null : params));\r\n  }, []);\r\n  let listing = listingOrder[sortOrder];\r\n  const handlePostType = (type) => {\r\n    if (!loggedIn) {\r\n      props.handleShowLogin();\r\n    }\r\n    dispatch(newPostSubmissionType(type));\r\n    dispatch(submitPostAttempt());\r\n  };\r\n  if (!listing) {\r\n    return <div></div>;\r\n  }\r\n  return (\r\n    <>\r\n      <div className=\"home-wrapper\">\r\n        {props.showSignup ? <Signup /> : null}\r\n        <div className=\"new-post-container\">\r\n          <Link to=\"\">\r\n            <img className=\"new-post-profile-image\" src={defaultPic} alt=\"\" />\r\n          </Link>\r\n          <Link\r\n            onClick={() => handlePostType(\"post\")}\r\n            to={loggedIn ? \"/new-post\" : \"\"}\r\n            className=\"new-post-input-container\"\r\n          >\r\n            <input\r\n              placeholder=\"Create Post\"\r\n              className=\"new-post-input\"\r\n              type=\"text\"\r\n            />\r\n          </Link>\r\n          <Link\r\n            onClick={() => handlePostType(\"media\")}\r\n            to={loggedIn ? \"/new-post?media=true\" : \"\"}\r\n          >\r\n            <img className=\"post-option\" src={imagePost} alt=\"\" />\r\n          </Link>\r\n          <Link\r\n            onClick={() => handlePostType(\"link\")}\r\n            to={loggedIn ? \"/new-post?link=true\" : \"\"}\r\n          >\r\n            <img className=\"post-option\" src={linkPost} alt=\"\" />\r\n          </Link>\r\n        </div>\r\n        <div className=\"categories-container\">\r\n          <Link\r\n            to=\"/hot\"\r\n            onClick={() =>\r\n              dispatch(fetchPosts(query, id, { sort: \"hot\" }, \"click\"))\r\n            }\r\n          >\r\n            Hot\r\n          </Link>\r\n          <Link\r\n            to=\"/new\"\r\n            onClick={() =>\r\n              dispatch(fetchPosts(query, id, { sort: \"new\" }, \"click\"))\r\n            }\r\n          >\r\n            New\r\n          </Link>\r\n          <Link\r\n            to=\"/top\"\r\n            onClick={() =>\r\n              dispatch(fetchPosts(query, id, { sort: \"top\" }, \"click\"))\r\n            }\r\n          >\r\n            Top\r\n          </Link>\r\n        </div>\r\n        <div className={\"posts-container\"}>\r\n          {postsToDisplay.map((post) => {\r\n            if (post) {\r\n              return (\r\n                <Post\r\n                  pastParams={props.match}\r\n                  history={props}\r\n                  key={post._id}\r\n                  post={post}\r\n                />\r\n              );\r\n            }\r\n          })}\r\n          <div className=\"page-set-container\"></div>\r\n        </div>\r\n      </div>\r\n      <div className=\"loading-container\">\r\n        <div\r\n          className={postStatus === \"loading\" ? \"lds-dual-ring\" : \"inactive\"}\r\n        ></div>\r\n      </div>\r\n      <span ref={bottomRef}></span>\r\n    </>\r\n  );\r\n}\r\nexport default Home;\r\n","export default __webpack_public_path__ + \"static/media/magnifying-glass.4af3fe67.svg\";","export default __webpack_public_path__ + \"static/media/hamburger.19fb64e1.svg\";","export default __webpack_public_path__ + \"static/media/Triangle.145cb339.svg\";","import React, { useEffect, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Link, withRouter } from \"react-router-dom\";\r\nimport { fetchPosts } from \"../actions/postActions\";\r\nimport { logOut } from \"../actions/userActions\";\r\nimport hamburger from \"../images/hamburger.svg\";\r\nimport searchicon from \"../images/magnifying-glass.svg\";\r\nimport defaultPic from \"../images/reddit-default.svg\";\r\nimport triangle from \"../images/Triangle.svg\";\r\nfunction Navbar(props) {\r\n  const [dropdown, setDropDown] = useState(false);\r\n  const [searchInput, setSearchInput] = useState(\"\");\r\n  const [authDropDown, setAuthDropDown] = useState(false);\r\n  const [searchContent, setSearchContent] = useState([]);\r\n  const [searchActive, setSearchActive] = useState(false);\r\n  const currentUser = useSelector((state) => {\r\n    return state.currentUser;\r\n  });\r\n  const loggedIn = useSelector((state) => {\r\n    return state.login.isLoggedIn;\r\n  });\r\n  const currentModal = useSelector((state) => {\r\n    return state.currentModal;\r\n  });\r\n  const dispatch = useDispatch();\r\n  const allIds = useSelector((state) => {\r\n    return state.posts.allIds;\r\n  });\r\n  const post = useSelector((state) => {\r\n    return state.posts.byId;\r\n  });\r\n  let flattened = allIds.map((x) => {\r\n    return post[x];\r\n  });\r\n  const handleDropDown = () => {\r\n    setDropDown(!dropdown);\r\n  };\r\n  let value;\r\n  const handleSearchContent = async (e) => {\r\n    setSearchInput(e.target.value);\r\n    value = e.target.value;\r\n    let trimmed = await value.trimStart();\r\n    let filtered = await flattened.filter((post) => {\r\n      const regex = new RegExp(`^` + trimmed, \"gi\");\r\n      return regex.test(post.title);\r\n    });\r\n    setSearchContent(filtered);\r\n  };\r\n  const handleCloseSearch = () => {\r\n    setSearchActive(!searchActive);\r\n  };\r\n  const handleLogout = () => {\r\n    dispatch(logOut()).then((data) => {\r\n      if (data.status === 200) {\r\n        window.location.reload();\r\n      }\r\n    });\r\n  };\r\n  let re = /^\\s+(?=[a-z0-9])|^[a-z0-9]/g;\r\n  const closeSearch = () => {\r\n    if (searchActive) {\r\n      setSearchActive(false);\r\n    }\r\n  };\r\n  const handleLogoClick = () => {\r\n    document.body.style.overflow = \"\";\r\n    if (currentModal.post.newPost) {\r\n    }\r\n    if (props.match.path === \"/\") {\r\n      dispatch(fetchPosts());\r\n    }\r\n  };\r\n  useEffect(() => {\r\n    document.title = \"Readit\";\r\n    document.body.addEventListener(\"click\", closeSearch);\r\n    return () => {\r\n      document.body.removeEventListener(\"click\", closeSearch);\r\n    };\r\n  }, [closeSearch]);\r\n  return (\r\n    <>\r\n      <div className=\"navbar-wrapper\">\r\n        <div className=\"navbar-container\">\r\n          <div className=\"navbar-content\">\r\n            <li>\r\n              <Link\r\n                to={{ pathname: \"/\" }}\r\n                replace={props.history.location.pathname === \"/\" ? true : false}\r\n                onClick={handleLogoClick}\r\n                className=\"logo\"\r\n              >\r\n                readit\r\n              </Link>\r\n            </li>\r\n            <div className={\"search-bar-container\"}>\r\n              <input\r\n                onClick={handleCloseSearch}\r\n                onChange={(e) => handleSearchContent(e)}\r\n                className=\"search-bar\"\r\n                placeholder=\"Search\"\r\n                type=\"text\"\r\n              />\r\n              <span className=\"search-icon\">\r\n                <img src={searchicon} alt=\"\" />\r\n              </span>\r\n              <div\r\n                onClick={(e) => handleCloseSearch(e)}\r\n                className=\"search-dropdown-container\"\r\n              >\r\n                {re.test(searchInput)\r\n                  ? searchContent.map((post) => {\r\n                      return (\r\n                        <>\r\n                          {\" \"}\r\n                          <div\r\n                            className={`search-dropdown-content ${\r\n                              !searchActive ? `hide-search` : null\r\n                            } `}\r\n                            key={post._id}\r\n                          >\r\n                            <Link\r\n                              className={`search-content-item`}\r\n                              to={`/post/${post._id}`}\r\n                            >\r\n                              {post.title}\r\n                            </Link>\r\n                          </div>\r\n                        </>\r\n                      );\r\n                    })\r\n                  : null}\r\n              </div>\r\n            </div>\r\n            {!loggedIn ? (\r\n              <>\r\n                <div className=\"auth-button-container-navbar\">\r\n                  <button onClick={props.handleShowLogin}>log in</button>\r\n                  <button onClick={props.handleShowSignup}>sign up</button>\r\n                </div>\r\n                <div className=\"hamburger-container\">\r\n                  <div className=\"hamburger-button-container\">\r\n                    <input\r\n                      type=\"checkbox\"\r\n                      id=\"trigger\"\r\n                      className={\"burger-input\"}\r\n                    />\r\n                    <label htmlFor=\"trigger\" className={\"burger-label\"}>\r\n                      <div className={\"main-trigger-icon-container\"}>\r\n                        <span className={\"main-trigger-icon\"}></span>\r\n                      </div>\r\n                    </label>\r\n                    <div className=\"hamburger-item-container\">\r\n                      <li className=\"hamburger-item\">\r\n                        {\" \"}\r\n                        <button\r\n                          className=\"hamburger-item-button\"\r\n                          onClick={props.handleShowLogin}\r\n                        >\r\n                          log in\r\n                        </button>\r\n                      </li>\r\n                      <li className=\"hamburger-item\">\r\n                        <button\r\n                          className=\"hamburger-item-button\"\r\n                          onClick={props.handleShowSignup}\r\n                        >\r\n                          sign up\r\n                        </button>\r\n                      </li>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </>\r\n            ) : (\r\n              <div className=\"profile-wrapper\">\r\n                <button\r\n                  onClick={() => handleDropDown()}\r\n                  className=\"navbar-profile-container\"\r\n                >\r\n                  <div className=\"navbar-logo-text\">\r\n                    <img\r\n                      className=\"default-profile-image\"\r\n                      style={{ backgroundColor: \"rgba(0, 0, 0, 0.1)\" }}\r\n                      src={defaultPic}\r\n                      alt=\"\"\r\n                    />\r\n                    <p className=\"navbar-profile-username\">\r\n                      {currentUser.username}\r\n                    </p>\r\n                  </div>\r\n                  <img\r\n                    className=\"navbar-profile-triangle\"\r\n                    src={triangle}\r\n                    alt=\"\"\r\n                  />\r\n                </button>\r\n                {dropdown ? (\r\n                  <div className=\"navbar-dropdown-container\">\r\n                    <ul className=\"navbar-dropdown\">\r\n                      <li>\r\n                        <button\r\n                          onClick={handleLogout}\r\n                          className=\"navbar-dropdown-options\"\r\n                        >\r\n                          Logout\r\n                        </button>\r\n                      </li>\r\n                      <li></li>\r\n                      <li></li>\r\n                    </ul>\r\n                  </div>\r\n                ) : null}\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div></div>\r\n    </>\r\n  );\r\n}\r\nexport default withRouter(Navbar);\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { useHistory, useLocation } from \"react-router-dom\";\r\nimport { changePostSubmissionType, submitPost } from \"../actions/postActions\";\r\nimport { loggedIn, loginStatus } from \"../actions/userActions\";\r\n\r\nconst NewPost = () => {\r\n  const useQuery = () => {\r\n    return new URLSearchParams(useLocation().search);\r\n  };\r\n  let query = useQuery();\r\n  let newQuery = query.get(\"media\");\r\n  let newQuery2 = query.get(\"link\");\r\n  let submissionType = useSelector((state) => {\r\n    return state.changeNewSubmissionType.submissionType;\r\n  });\r\n  const history = useHistory();\r\n  const dispatch = useDispatch();\r\n  const [title, setTitle] = useState(\"\");\r\n  const [text, setText] = useState(\"\");\r\n  const [imagedata, setImage] = useState(\"\");\r\n  const submitCheck = useSelector((state) => {\r\n    return state.posts.submitted;\r\n  });\r\n  const fetchingLogin = useSelector((state) => state.login.fetching);\r\n  const loggedInStatus = useSelector((state) => state.login.isLoggedIn);\r\n\r\n  const reRouteId = useSelector((state) => {\r\n    return state.posts.reRouteId;\r\n  });\r\n  useEffect(() => {\r\n \r\n  }, []);\r\n  useEffect(() => {\r\n    if (newQuery) {\r\n      submissionType = \"media\";\r\n    } else if (newQuery2) {\r\n      submissionType = \"link\";\r\n    }\r\n    if (submitCheck) {\r\n      history.push(`/post/${reRouteId}`);\r\n    }\r\n  }, [submitCheck]);\r\n  if (fetchingLogin) {\r\n    return <div></div>;\r\n  }\r\n  const uploadForm = (e) => {\r\n    e.preventDefault();\r\n    const data = new FormData();\r\n    data.append(\"title\", title);\r\n    data.append(\"content\", text);\r\n    data.append(\"file\", imagedata);\r\n\r\n    dispatch(submitPost(data));\r\n  };\r\n\r\n  const handleFormType = () => {\r\n    window.history.replaceState(\"page2\", \"Title\", \"/new-post\");\r\n\r\n    dispatch(changePostSubmissionType(\"post\"));\r\n  };\r\n  const handleImageType = () => {\r\n    dispatch(changePostSubmissionType(\"media\"));\r\n    window.history.replaceState(\"page2\", \"Title\", \"/new-post\");\r\n  };\r\n  const handleLinkType = () => {\r\n    dispatch(changePostSubmissionType(\"link\"));\r\n    window.history.replaceState(\"page2\", \"Title\", \"/new-post\");\r\n  };\r\n  return (\r\n    <div className=\"newpost-wrapper\">\r\n      <div className=\"newpost-container\">\r\n        <p className=\"newpost-title\">Create a post</p>\r\n        <div className=\"newpost-template\">\r\n          <div className=\"newpost-options\">\r\n            <button\r\n              className={\r\n                submissionType === \"post\"\r\n                  ? `submit-type-button ${`selectedType`}`\r\n                  : `submit-type-button`\r\n              }\r\n              onClick={handleFormType}\r\n            >\r\n              Post\r\n            </button>\r\n            <button\r\n              className={\r\n                submissionType === \"media\"\r\n                  ? `submit-type-button ${`selectedType`}`\r\n                  : `submit-type-button`\r\n              }\r\n              onClick={handleImageType}\r\n            >\r\n              Images {\"&\"} Video\r\n            </button>\r\n            <button\r\n              className={\r\n                submissionType === \"link\"\r\n                  ? `submit-type-button ${`selectedType`}`\r\n                  : `submit-type-button`\r\n              }\r\n              onClick={handleLinkType}\r\n            >\r\n              Link\r\n            </button>\r\n          </div>\r\n          <form action=\"\">\r\n            <div className=\"newpost-title-container\">\r\n              <input\r\n                onChange={(e) => {\r\n                  setTitle(e.target.value);\r\n                }}\r\n                placeholder=\"Title\"\r\n                className=\"newpost-title\"\r\n                type=\"text\"\r\n              />\r\n            </div>\r\n\r\n            <div className=\"newpost-entry-container\">\r\n              {submissionType === \"media\" ? (\r\n                <div className=\"upload-input-container\">\r\n                  <input\r\n                    onChange={(e) => {\r\n                      setImage(e.target.files[0]);\r\n                    }}\r\n                    className=\"upload-input\"\r\n                    type=\"file\"\r\n                    name=\"\"\r\n                    id=\"file-input\"\r\n                  />\r\n                </div>\r\n              ) : (\r\n                <textarea\r\n                  onChange={(e) => {\r\n                    setText(e.target.value);\r\n                  }}\r\n                  placeholder=\"Text(optional)\"\r\n                  className=\"newpost-entry\"\r\n                  name=\"\"\r\n                  id=\"\"\r\n                  cols=\"30\"\r\n                  rows=\"10\"\r\n                ></textarea>\r\n              )}\r\n              <div className=\"submission-button-container\">\r\n                <button\r\n                  type=\"submit\"\r\n                  onClick={(e) => uploadForm(e)}\r\n                  className=\"submission-buttons\"\r\n                >\r\n                  Post\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NewPost;\r\n","import axios from \"axios\";\r\nimport {\r\n  NEW_COMMENT_REQUEST,\r\n  NEW_COMMENT_SUCCESS,\r\n  NEW_REPLY_REQUEST,\r\n  NEW_REPLY_SUCCESS,\r\n  VOTE_CAST,\r\n} from \"../types\";\r\n\r\nexport function newCommentRequest() {\r\n  return {\r\n    type: NEW_COMMENT_REQUEST,\r\n  };\r\n}\r\nfunction newCommentSuccess(savedComment, postId, parentId) {\r\n  return (dispatch, getState) => {\r\n    dispatch({\r\n      type: NEW_COMMENT_SUCCESS,\r\n      savedComment,\r\n      postId,\r\n      parentId,\r\n    });\r\n  };\r\n}\r\nexport function newComment(content, postId) {\r\n  return (dispatch, getState) => {\r\n    dispatch(newCommentRequest());\r\n    return axios({\r\n      url: \"/api/comment/new\",\r\n      method: \"POST\",\r\n      data: {\r\n        content,\r\n        postId,\r\n      },\r\n      withCredentials: true,\r\n    }).then((res) => {\r\n      dispatch(newCommentSuccess(res.data, postId));\r\n    });\r\n  };\r\n}\r\nexport function newReplyRequest() {\r\n  return {\r\n    type: NEW_REPLY_REQUEST,\r\n    test: {},\r\n  };\r\n}\r\nexport function test(test) {\r\n  return (dispatch, getState) => {\r\n    dispatch(test.push(\"sdfsdf\"));\r\n  };\r\n}\r\nexport function changeCommentPoint(point, postId, commentId) {\r\n  return (dispatch, getState) => {\r\n    const currentCommentId = commentId;\r\n    const currentComment = getState().comments.byId[currentCommentId];\r\n    const currentVoteState = currentComment.voteState;\r\n    dispatch({\r\n      type: VOTE_CAST,\r\n      point,\r\n      commentId,\r\n      currentVoteState,\r\n    });\r\n    if (point === 1) {\r\n      axios({\r\n        url: \"/api/comment/vote-up\",\r\n        method: \"PUT\",\r\n        data: {\r\n          postId,\r\n          commentId,\r\n        },\r\n        withCredentials: true,\r\n      });\r\n    } else if (point === -1) {\r\n      axios({\r\n        url: \"/api/comment/vote-down\",\r\n        method: \"PUT\",\r\n        data: {\r\n          postId,\r\n          commentId,\r\n        },\r\n        withCredentials: true,\r\n      });\r\n    }\r\n  };\r\n}\r\nexport function newReply(content, postId, commentId) {\r\n  return (dispatch, getState) =>\r\n    axios({\r\n      url: `/api/comments/${commentId}/replies`,\r\n      method: \"POST\",\r\n      data: {\r\n        content,\r\n        postId,\r\n      },\r\n      withCredentials: true,\r\n    }).then((res) => {\r\n      dispatch({\r\n        type: NEW_REPLY_SUCCESS,\r\n        reply: res.data,\r\n        postId,\r\n        commentId,\r\n      });\r\n    });\r\n}\r\n","export default __webpack_public_path__ + \"static/media/down-arrow.c9c98d5d.svg\";","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"g\", null, /*#__PURE__*/React.createElement(\"g\", null, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M392.533,238.937c-9.426,0-17.067,7.641-17.067,17.067V426.67c0,9.426-7.641,17.067-17.067,17.067H51.2 c-9.426,0-17.067-7.641-17.067-17.067V85.337c0-9.426,7.641-17.067,17.067-17.067H256c9.426,0,17.067-7.641,17.067-17.067 S265.426,34.137,256,34.137H51.2C22.923,34.137,0,57.06,0,85.337V426.67c0,28.277,22.923,51.2,51.2,51.2h307.2 c28.277,0,51.2-22.923,51.2-51.2V256.003C409.6,246.578,401.959,238.937,392.533,238.937z\"\n})));\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"g\", null, /*#__PURE__*/React.createElement(\"g\", null, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M458.742,19.142c-12.254-12.256-28.875-19.14-46.206-19.138c-17.341-0.05-33.979,6.846-46.199,19.149L141.534,243.937 c-1.865,1.879-3.272,4.163-4.113,6.673l-34.133,102.4c-2.979,8.943,1.856,18.607,10.799,21.585 c1.735,0.578,3.552,0.873,5.38,0.875c1.832-0.003,3.653-0.297,5.393-0.87l102.4-34.133c2.515-0.84,4.8-2.254,6.673-4.13 l224.802-224.802C484.25,86.023,484.253,44.657,458.742,19.142z\"\n})));\n\nvar _ref4 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref5 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref6 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref7 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref8 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref9 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref10 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref11 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref12 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref13 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref14 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref15 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref16 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref17 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref18 = /*#__PURE__*/React.createElement(\"g\", null);\n\nfunction SvgEdit(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 477.873 477.873\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2, _ref3, _ref4, _ref5, _ref6, _ref7, _ref8, _ref9, _ref10, _ref11, _ref12, _ref13, _ref14, _ref15, _ref16, _ref17, _ref18);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgEdit);\nexport default __webpack_public_path__ + \"static/media/edit.4e81c026.svg\";\nexport { ForwardRef as ReactComponent };","export default __webpack_public_path__ + \"static/media/up-arrow.927fb299.svg\";","import React, { useEffect, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport {\r\n  changeCommentPoint,\r\n  newReply,\r\n  newReplyRequest,\r\n} from \"../actions/commentActions\";\r\nimport downvote from \"../images/down-arrow.svg\";\r\nimport upvote from \"../images/up-arrow.svg\";\r\nconst Comment = ({ comment, handleShowLogin }) => {\r\n  const allComments = useSelector((state) => {\r\n    return state.comments.byId;\r\n  });\r\n  const loggedIn = useSelector((state) => state.login.isLoggedIn);\r\n\r\n  const dispatch = useDispatch();\r\n  const params = useParams();\r\n  const [replyText, setReplyText] = useState(\"\");\r\n  const [replyToggle, setReplyToggle] = useState(false);\r\n  const voteUp = () => {\r\n    if (loggedIn) {\r\n      dispatch(changeCommentPoint(1, params.id, comment._id));\r\n    } else {\r\n      handleShowLogin();\r\n    }\r\n  };\r\n  const voteDown = () => {\r\n    if (loggedIn) {\r\n      dispatch(changeCommentPoint(-1, params.id, comment._id));\r\n    } else {\r\n      handleShowLogin();\r\n    }\r\n  };\r\n  const handleReplyToggle = () => {\r\n    setReplyToggle(!replyToggle);\r\n    dispatch(newReplyRequest());\r\n  };\r\n\r\n  const handleReply = () => {\r\n    let commentId = comment._id;\r\n    dispatch(newReply(replyText, params.id, commentId));\r\n    setReplyToggle(false);\r\n    setReplyText(\"\");\r\n  };\r\n\r\n  useEffect(() => {}, []);\r\n  if (!comment) {\r\n    return <div></div>;\r\n  }\r\n  const nestedComments = (comment.comments || []).map((comment) => {\r\n    return <Comment key={comment} comment={allComments[comment]} />;\r\n  });\r\n  return (\r\n    <div style={{ marginLeft: \"15px\", marginTop: \"10px\" }}>\r\n      <div className=\"comment-vote-title-container\">\r\n        <div className=\"comment-vote-container\">\r\n          <div className=\"comment-vote-button-container\">\r\n            <img\r\n              className={\r\n                comment.voteState === 1\r\n                  ? \"comment-vote-button-color\"\r\n                  : \"comment-vote-button\"\r\n              }\r\n              src={upvote}\r\n              onClick={voteUp}\r\n              alt=\"\"\r\n            />\r\n            <span>{comment.voteTotal}</span>\r\n            <img\r\n              className={\r\n                comment.voteState === -1\r\n                  ? \"comment-vote-button-color\"\r\n                  : \"comment-vote-button\"\r\n              }\r\n              src={downvote}\r\n              onClick={voteDown}\r\n            />\r\n          </div>\r\n        </div>\r\n        <div className=\"comment-container\">\r\n          <p className=\"comment-author\">{comment.authorName}</p>\r\n          <div className=\"parent-comment\">{comment.content}</div>\r\n          <div className=\"reply-button-container\">\r\n            {loggedIn ? (\r\n              <button onClick={handleReplyToggle} className=\"reply-button\">\r\n                Reply\r\n              </button>\r\n            ) : null}\r\n            {replyToggle ? (\r\n              <div className=\"new-comment-container\">\r\n                <textarea\r\n                  value={replyText}\r\n                  onChange={(e) => {\r\n                    setReplyText(e.target.value);\r\n                  }}\r\n                  placeholder=\"What are your thoughts?\"\r\n                  className=\"new-comment reply-textarea\"\r\n                  rows=\"6\"\r\n                ></textarea>\r\n                <div className=\"submit-comment-container\">\r\n                  <button\r\n                    onClick={handleReply}\r\n                    className=\"submit-comment-button\"\r\n                  >\r\n                    Reply\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            ) : null}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"nested-comments\">{nestedComments}</div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Comment;\r\n","import React, { useState } from \"react\";\r\nimport { connect, useDispatch, useSelector } from \"react-redux\";\r\nimport { useHistory, useParams } from \"react-router-dom\";\r\nimport { newComment } from \"../actions/commentActions\";\r\nimport { changePoint, editPost } from \"../actions/postActions\";\r\nimport downvote from \"../images/down-arrow.svg\";\r\nimport { ReactComponent as Edit } from \"../images/edit.svg\";\r\nimport upvote from \"../images/up-arrow.svg\";\r\nimport Comment from \"./Comment\";\r\nconst PostModal = (props) => {\r\n  const params = useParams();\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n  const [commentText, setCommentText] = useState(\"\");\r\n  const [edit, setEdit] = useState(false);\r\n  const [editText, setEditText] = useState(\"\");\r\n  const currentUser = useSelector((state) => state.currentUser._id);\r\n  const comments = useSelector((state) => {\r\n    return state.comments.byId;\r\n  });\r\n  const loggedIn = useSelector((state) => state.login.isLoggedIn);\r\n  let currentPost = props.post;\r\n  const back = (e) => {\r\n    e.stopPropagation();\r\n  };\r\n  const handleReroute = () => {\r\n    history.push(\"/\");\r\n  };\r\n  const handleSubmitComment = () => {\r\n    dispatch(newComment(commentText, props.post._id));\r\n    setCommentText(\"\");\r\n  };\r\n  const handleUpvote = () => {\r\n    if (loggedIn) {\r\n      dispatch(changePoint(1, params.id));\r\n    } else {\r\n      props.handleShowLogin();\r\n    }\r\n  };\r\n  const handleDownVote = () => {\r\n    if (loggedIn) {\r\n      dispatch(changePoint(-1, params.id));\r\n    } else {\r\n      props.handleShowLogin();\r\n    }\r\n  };\r\n  const handleEdit = () => {\r\n    setEdit(true);\r\n  };\r\n  const handleCancelEdit = () => {\r\n    setEdit(false);\r\n  };\r\n  const saveEdit = (id) => {\r\n    dispatch(editPost(id, editText));\r\n    setEdit(false);\r\n  };\r\n  if (!currentPost) {\r\n    return <div></div>;\r\n  }\r\n  const date = new Date(currentPost.createdAt);\r\n  const formatDate = new Intl.DateTimeFormat(\"en-US\", {}).format(date);\r\n  return (\r\n    <div onClick={handleReroute} className=\"modal-wrapper\">\r\n      <input type=\"checkbox\" id=\"trigger\" className={\"burger-input\"} />\r\n      <label htmlFor=\"trigger\" className={\"close-label\"}>\r\n        <div onClick={handleReroute} className={\"main-close-icon-container\"}>\r\n          <span className={\"main-close-icon\"}></span>\r\n        </div>\r\n      </label>\r\n      <div onClick={back} className=\"card-modal\">\r\n        {currentPost.author ? (\r\n          <>\r\n            <p className=\"card-modal-author\">\r\n              {\" \"}\r\n              u/{currentPost.author.username}\r\n            </p>\r\n            <p>{formatDate}</p>\r\n            <h4 className=\"card-modal-title\">{currentPost.title}</h4>\r\n            {currentUser === currentPost.author._id ? (\r\n              <div className=\"edit-container\">\r\n                <p\r\n                  className={`card-modal-content ${edit ? \"inactive\" : null} `}\r\n                >\r\n                  {currentPost.content}\r\n                </p>\r\n                <textarea\r\n                  onChange={(e) => {\r\n                    setEditText(e.target.value);\r\n                  }}\r\n                  className={edit ? \"edit-text-area\" : \"inactive\"}\r\n                  value={editText}\r\n                ></textarea>\r\n                <div className={edit ? `edit-button-container` : `inactive`}>\r\n                  <button\r\n                    onClick={() => saveEdit(currentPost._id)}\r\n                    className=\"edit-submit-button\"\r\n                  >\r\n                    Save\r\n                  </button>\r\n                  <button\r\n                    onClick={handleCancelEdit}\r\n                    className=\"edit-cancel-button\"\r\n                  >\r\n                    Cancel\r\n                  </button>\r\n                </div>\r\n                <button\r\n                  className={`edit-button ${edit ? \"inactive\" : null}`}\r\n                  onClick={handleEdit}\r\n                >\r\n                  <Edit />\r\n                </button>\r\n              </div>\r\n            ) : null}\r\n            <div className=\"post-image-container\">\r\n              <img className=\"post-image\" src={props.post.image} alt=\"\" />\r\n            </div>\r\n            {currentUser ? (\r\n              <div className=\"new-comment-container\">\r\n                <textarea\r\n                  className=\"new-comment\"\r\n                  name=\"\"\r\n                  id=\"\"\r\n                  placeholder=\"What are your thoughts?\"\r\n                  rows=\"6\"\r\n                  value={commentText}\r\n                  onChange={(e) => setCommentText(e.target.value)}\r\n                ></textarea>\r\n                <span className=\"submit-comment-container\">\r\n                  <button\r\n                    onClick={() => {\r\n                      handleSubmitComment();\r\n                    }}\r\n                    className=\"submit-comment-button\"\r\n                  >\r\n                    Comment\r\n                  </button>\r\n                </span>\r\n              </div>\r\n            ) : (\r\n              <div className=\"no-user-comment-container\">\r\n                <p className=\"no-user-comment\">\r\n                  Log in or sign up to leave a comment\r\n                </p>\r\n                <div className=\"auth-button-container\">\r\n                  <button onClick={props.handleShowLogin}>log in</button>\r\n                  <button onClick={props.handleShowSignup}>sign up</button>\r\n                </div>\r\n              </div>\r\n            )}\r\n            <div className=\"card-modal-vote-container\">\r\n              <li onClick={handleUpvote}>\r\n                <img\r\n                  className={\r\n                    currentPost.voteState === 1\r\n                      ? `vote-button-color`\r\n                      : `vote-button`\r\n                  }\r\n                  src={upvote}\r\n                  alt=\"\"\r\n                />\r\n              </li>\r\n              <li>{currentPost.voteTotal}</li>\r\n              <li onClick={handleDownVote}>\r\n                <img\r\n                  className={\r\n                    currentPost.voteState === -1\r\n                      ? `vote-button-color`\r\n                      : `vote-button`\r\n                  }\r\n                  src={downvote}\r\n                  alt=\"\"\r\n                />\r\n              </li>\r\n            </div>\r\n            <h4 className=\"comment-section-header\">Comments</h4>\r\n            {props.post.comments.length > 0 &&\r\n              props.post.comments.map((comment) => {\r\n                return (\r\n                  <Comment\r\n                    handleShowLogin={props.handleShowLogin}\r\n                    key={comment}\r\n                    comment={comments[comment]}\r\n                  />\r\n                );\r\n              })}\r\n          </>\r\n        ) : null}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\nfunction mapStateToProps(state, ownProps) {\r\n  let id = ownProps.match.params.id;\r\n  let post;\r\n  post = state.posts.byId[id];\r\n  return {\r\n    post: post,\r\n  };\r\n}\r\nexport default connect(mapStateToProps)(PostModal);\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { connect, useDispatch, useSelector } from \"react-redux\";\r\nimport { Redirect, Route, Switch } from \"react-router-dom\";\r\nimport { nextPage } from \"./actions/postActions\";\r\nimport { clearLoginModal, loggedIn } from \"./actions/userActions\";\r\nimport Home from \"./components/Home\";\r\nimport Login from \"./components/Login\";\r\nimport Navbar from \"./components/Navbar\";\r\nimport NewPost from \"./components/NewPost\";\r\nimport PostModal from \"./components/PostModal\";\r\nimport Signup from \"./components/Signup\";\r\nimport \"./styles/myApp.scss\";\r\nfunction App(props) {\r\n  const [showLogin, setLogin] = useState(false);\r\n  const [fetchingLogin, setFetchingLogin] = useState(true);\r\n  const [showSignup, setShowSignup] = useState(false);\r\n  const loggedInStatus = useSelector((state) => state.currentUser.isLoggedIn);\r\n  const signedUpStatus = useSelector((state) => state.signup.isSignedUp);\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    dispatch(loggedIn()).then((data) => {\r\n      if (data) {\r\n        setFetchingLogin(false);\r\n      }\r\n    });\r\n  }, [dispatch]);\r\n  useEffect(() => {\r\n    if (loggedInStatus) {\r\n      setLogin(false);\r\n    }\r\n    if (signedUpStatus && !loggedInStatus) {\r\n      setShowSignup(false);\r\n      setLogin(true);\r\n    }\r\n  }, [loggedInStatus, signedUpStatus]);\r\n  const handleShowLogin = () => {\r\n    setLogin(!showLogin);\r\n  };\r\n  const handleShowSignup = () => {\r\n    setShowSignup(!showSignup);\r\n  };\r\n  const closeModal = () => {\r\n    dispatch(clearLoginModal());\r\n    setLogin(false);\r\n    setShowSignup(false);\r\n  };\r\n  const handleShowNextPage = (lastId, sort) => {\r\n    dispatch(nextPage(lastId, sort));\r\n  };\r\n\r\n  return (\r\n    <div id=\"scroll-wrapper\" className={\"app-wrapper\"}>\r\n      {showLogin ? <Login close={closeModal} /> : null}\r\n      {showSignup ? <Signup close={closeModal} /> : null}\r\n      <Navbar\r\n        handleShowLogin={handleShowLogin}\r\n        handleShowSignup={handleShowSignup}\r\n      />\r\n      <Route\r\n        exact\r\n        path=\"/post/:id\"\r\n        render={(props) => {\r\n          return (\r\n            <PostModal\r\n              handleShowLogin={handleShowLogin}\r\n              handleShowSignup={handleShowSignup}\r\n              {...props}\r\n            />\r\n          );\r\n        }}\r\n      />\r\n      <Switch>\r\n        <Route\r\n          exact\r\n          path=\"/new-post\"\r\n          render={(props) => {\r\n            return <NewPost {...props} />;\r\n          }}\r\n        >\r\n          {!fetchingLogin && !props.loggedIn ? <Redirect to=\"/\" /> : null}\r\n        </Route>\r\n\r\n        <Route\r\n          path={[\"/:sort\", \"/\"]}\r\n          render={(props2) => {\r\n            return (\r\n              <Home\r\n                handleShowLogin={handleShowLogin}\r\n                handleShowSignup={handleShowSignup}\r\n                handleShowNextPage={handleShowNextPage}\r\n                {...props2}\r\n                test={props.posts}\r\n              />\r\n            );\r\n          }}\r\n          showLogin={showLogin}\r\n          showSignup={showSignup}\r\n        />\r\n      </Switch>\r\n    </div>\r\n  );\r\n}\r\nfunction mapStateToProps(state, ownProps) {\r\n  let loggedInStatus = state.login.isLoggedIn;\r\n  return {\r\n    loggedIn: loggedInStatus,\r\n  };\r\n}\r\nexport default connect(mapStateToProps)(App);\r\n","import { combineReducers } from \"redux\";\r\nimport {\r\n  CLEAR_ERROR,\r\n  CLEAR_LOGIN_MODAL,\r\n  CURRENT_USER,\r\n  DELETE_POST,\r\n  EDIT_POST,\r\n  LOGIN_ERROR,\r\n  LOGIN_REQUEST,\r\n  LOGIN_SUCCESS,\r\n  LOG_OUT,\r\n  NEW_COMMENT_SUCCESS,\r\n  NEW_POST_REQUEST,\r\n  NEW_POST_SUCCESS,\r\n  NEW_REPLY_REQUEST,\r\n  NEW_REPLY_SUCCESS,\r\n  NEXT_PAGE,\r\n  POST_CREATION_CHANGE_SUBMISSION_TYPE,\r\n  PREV_PAGE,\r\n  RECEIVE_POSTS,\r\n  RECEIVE_SINGLE_POSTS,\r\n  REFRESH_USER,\r\n  REQUEST_POSTS,\r\n  REQUEST_USER_INFO,\r\n  SET_POST_MODAL,\r\n  SIGNUP_ERROR,\r\n  SIGNUP_REQUEST,\r\n  SIGNUP_SUCCESS,\r\n  SORT_POSTS,\r\n  SPLICED_POST,\r\n  UNAUTHORIZED_ERROR,\r\n  VOTE_CAST,\r\n} from \"../types\";\r\nfunction combineArrays(arr1, arr2) {\r\n  let combined = arr1.concat(arr2);\r\n  let set = new Set(combined);\r\n  return [...set];\r\n}\r\nfunction addComment(state, action) {\r\n  return {\r\n    ...state,\r\n    byId: {\r\n      ...state.byId,\r\n      [action.postId]: {\r\n        ...state.byId[action.postId],\r\n        comments: [\r\n          ...state.byId[action.postId].comments,\r\n          action.savedComment._id,\r\n        ],\r\n      },\r\n    },\r\n  };\r\n}\r\nfunction changePostPoint(state, action) {\r\n  const { postId } = action;\r\n  const { point } = action;\r\n  const { currentVoteState } = action;\r\n  const post = state.byId[postId];\r\n  if (action.commentId) {\r\n    return state;\r\n  } else {\r\n    if (currentVoteState === 1 && point === 1) {\r\n      return {\r\n        ...state,\r\n        byId: {\r\n          ...state.byId,\r\n          [postId]: {\r\n            ...post,\r\n            voteState: 0,\r\n            voteTotal: state.byId[postId].voteTotal - 1,\r\n          },\r\n        },\r\n      };\r\n    }\r\n    if (currentVoteState === 0 && point === 1) {\r\n      return {\r\n        ...state,\r\n        byId: {\r\n          ...state.byId,\r\n          [postId]: {\r\n            ...post,\r\n            voteState: 1,\r\n            voteTotal: state.byId[postId].voteTotal + 1,\r\n          },\r\n        },\r\n      };\r\n    }\r\n    if (currentVoteState === 1 && point === -1) {\r\n      return {\r\n        ...state,\r\n        byId: {\r\n          ...state.byId,\r\n          [postId]: {\r\n            ...post,\r\n            voteState: -1,\r\n            voteTotal: state.byId[postId].voteTotal - 2,\r\n          },\r\n        },\r\n      };\r\n    }\r\n    if (currentVoteState === 0 && point === -1) {\r\n      return {\r\n        ...state,\r\n        byId: {\r\n          ...state.byId,\r\n          [postId]: {\r\n            ...post,\r\n            voteState: -1,\r\n            voteTotal: state.byId[postId].voteTotal - 1,\r\n          },\r\n        },\r\n      };\r\n    }\r\n    if (currentVoteState === -1 && point === -1) {\r\n      return {\r\n        ...state,\r\n        byId: {\r\n          ...state.byId,\r\n          [postId]: {\r\n            ...post,\r\n            voteState: 0,\r\n            voteTotal: state.byId[postId].voteTotal + 1,\r\n          },\r\n        },\r\n      };\r\n    }\r\n    if (currentVoteState === -1 && point === 1) {\r\n      return {\r\n        ...state,\r\n        byId: {\r\n          ...state.byId,\r\n          [postId]: {\r\n            ...post,\r\n            voteState: 1,\r\n            voteTotal: state.byId[postId].voteTotal + 2,\r\n          },\r\n        },\r\n      };\r\n    }\r\n  }\r\n}\r\nfunction handlePostSubmission(state, action) {\r\n  const { post, id } = action;\r\n  return {\r\n    ...state,\r\n    byId: {\r\n      ...state.byId,\r\n      [id]: post,\r\n    },\r\n    allIds: [...state.allIds, id],\r\n    submitting: false,\r\n    createdPosts: {\r\n      ...state.createdPosts,\r\n      [id]: post,\r\n    },\r\n    submitted: true,\r\n    reRouteId: id,\r\n  };\r\n}\r\nfunction editPostReduce(state, action) {\r\n  const { postId, content } = action;\r\n  const post = state.byId[postId];\r\n  return {\r\n    ...state,\r\n    byId: {\r\n      ...state.byId,\r\n      [postId]: {\r\n        ...post,\r\n        content: content,\r\n      },\r\n    },\r\n  };\r\n}\r\nfunction handlePreviousPage(state, action) {\r\n  let allIds = state.allIds;\r\n  let incomingIds = action.normalizedData.result;\r\n  let set = new Set(incomingIds.concat(allIds));\r\n  return {\r\n    ...state,\r\n    isFetching: false,\r\n    byId: {\r\n      ...state.byId,\r\n      ...action.normalizedData.entities.posts,\r\n    },\r\n    status: \"succeeded\",\r\n    allIds: [...set],\r\n  };\r\n}\r\nfunction handleNextPage(state, action) {\r\n  let allIds = state.allIds;\r\n  let incomingIds = action.normalizedData.result;\r\n  let set = new Set(allIds.concat(incomingIds));\r\n  return {\r\n    ...state,\r\n    isFetching: false,\r\n    byId: {\r\n      ...state.byId,\r\n      ...action.normalizedData.entities.posts,\r\n    },\r\n    offset: action.offset,\r\n    status: \"succeeded\",\r\n    allIds: [...set],\r\n  };\r\n}\r\nfunction setListings(state, action, prev) {\r\n  return {\r\n    ...state,\r\n    status: \"completed\",\r\n    sortOrder: action.sort,\r\n    listingOrder: {\r\n      ...state.listingOrder,\r\n      [action.sort]: combineArrays(\r\n        state.listingOrder[action.sort] ? state.listingOrder[action.sort] : [],\r\n        action.normalizedData.result\r\n      ),\r\n    },\r\n  };\r\n}\r\nfunction listings(\r\n  state = {\r\n    sortOrder: \"default\",\r\n    listingOrder: {},\r\n    status: \"idle\",\r\n  },\r\n  action\r\n) {\r\n  switch (action.type) {\r\n    case SORT_POSTS:\r\n      return setListings(state, action);\r\n    case REQUEST_POSTS:\r\n      return action.e\r\n        ? Object.assign({}, state, {\r\n            status: \"loading\",\r\n          })\r\n        : state;\r\n    case DELETE_POST:\r\n      const filteredPosts = state.listingOrder[state.sortOrder].filter((id) => {\r\n        return id !== action.postId;\r\n      });\r\n      return {\r\n        ...state,\r\n        listingOrder: {\r\n          ...state.listingOrder,\r\n          [state.sortOrder]: [...filteredPosts],\r\n        },\r\n      };\r\n    case PREV_PAGE:\r\n      return setListings(state, action, \"prev\");\r\n    case NEXT_PAGE:\r\n      return setListings(state, action);\r\n    case RECEIVE_POSTS:\r\n      return setListings(state, action);\r\n    default:\r\n      return state;\r\n  }\r\n}\r\nfunction receievePosts(state, action) {\r\n  let allIds = state.allIds;\r\n  let incomingIds = action.normalizedData.result;\r\n  let set = new Set(allIds.concat(incomingIds));\r\n  return {\r\n    ...state,\r\n    isFetching: false,\r\n    byId: {\r\n      ...state.byId,\r\n      ...action.normalizedData.entities.posts,\r\n    },\r\n    offset: action.offset,\r\n    status: \"completed\",\r\n    allIds: [...set],\r\n  };\r\n}\r\nfunction posts(\r\n  state = {\r\n    isFetching: false,\r\n    byId: {},\r\n    allIds: [],\r\n    offset: null,\r\n    submitted: false,\r\n    err: null,\r\n    createdPosts: {},\r\n    submitting: false,\r\n    reRouteId: null,\r\n    status: \"idle\",\r\n    firstId: \"\",\r\n    lastId: \"\",\r\n  },\r\n  action\r\n) {\r\n  switch (action.type) {\r\n    case SORT_POSTS:\r\n      return Object.assign({}, state, {\r\n        status: \"idle\",\r\n        offset: action.offset,\r\n      });\r\n    case PREV_PAGE:\r\n      return handlePreviousPage(state, action);\r\n    case NEXT_PAGE:\r\n      return handleNextPage(state, action);\r\n    case REQUEST_POSTS:\r\n      return Object.assign({}, state, {\r\n        isFetching: true,\r\n        status: \"loading\",\r\n      });\r\n    case SPLICED_POST:\r\n      return Object.assign({}, state, {\r\n        byId: action.newObj,\r\n        allIds: action.splicedArray,\r\n        createdPosts: {},\r\n      });\r\n    case RECEIVE_SINGLE_POSTS:\r\n      return receievePosts(state, action);\r\n    case RECEIVE_POSTS:\r\n      return receievePosts(state, action);\r\n    case VOTE_CAST:\r\n      return changePostPoint(state, action);\r\n    case DELETE_POST:\r\n      const allIds = state.allIds;\r\n      const filteredPosts = allIds.filter((id) => {\r\n        return id !== action.postId;\r\n      });\r\n      return Object.assign({}, state, {\r\n        allIds: filteredPosts,\r\n      });\r\n    case NEW_COMMENT_SUCCESS:\r\n      return addComment(state, action);\r\n    case NEW_POST_REQUEST:\r\n      return Object.assign({}, state, {\r\n        submitted: false,\r\n        submitting: true,\r\n        reRouteId: \"\",\r\n      });\r\n    case EDIT_POST:\r\n      return editPostReduce(state, action);\r\n    case NEW_POST_SUCCESS:\r\n      return handlePostSubmission(state, action);\r\n    default:\r\n      return state;\r\n  }\r\n}\r\nfunction setPostModal(state, action) {\r\n  const { post } = action;\r\n  return {\r\n    ...state,\r\n    post,\r\n  };\r\n}\r\nfunction currentModal(\r\n  state = {\r\n    post: {},\r\n  },\r\n  action\r\n) {\r\n  switch (action.type) {\r\n    case SET_POST_MODAL:\r\n      return setPostModal(state, action);\r\n    case NEW_POST_SUCCESS:\r\n      return Object.assign({}, state, {\r\n        post: action.post,\r\n      });\r\n    default:\r\n      return state;\r\n  }\r\n}\r\nfunction addCommentEntry(state, action) {\r\n  const { savedComment } = action;\r\n  return {\r\n    ...state,\r\n    byId: {\r\n      ...state.byId,\r\n      [action.savedComment._id]: {\r\n        ...state.byId[savedComment._id],\r\n        ...action.savedComment,\r\n      },\r\n    },\r\n  };\r\n}\r\nfunction changeCommentPoint(state, action) {\r\n  if (action.commentId) {\r\n    const { commentId } = action;\r\n    const { point } = action;\r\n    const { currentVoteState } = action;\r\n    const comment = state.byId[commentId];\r\n    if (currentVoteState === 1 && point === 1) {\r\n      return {\r\n        ...state,\r\n        byId: {\r\n          ...state.byId,\r\n          [commentId]: {\r\n            ...comment,\r\n            voteState: 0,\r\n            voteTotal: state.byId[commentId].voteTotal - 1,\r\n          },\r\n        },\r\n      };\r\n    }\r\n    if (currentVoteState === 0 && point === 1) {\r\n      return {\r\n        ...state,\r\n        byId: {\r\n          ...state.byId,\r\n          [commentId]: {\r\n            ...comment,\r\n            voteState: 1,\r\n            voteTotal: state.byId[commentId].voteTotal + 1,\r\n          },\r\n        },\r\n      };\r\n    }\r\n    if (currentVoteState === 1 && point === -1) {\r\n      return {\r\n        ...state,\r\n        byId: {\r\n          ...state.byId,\r\n          [commentId]: {\r\n            ...comment,\r\n            voteState: -1,\r\n            voteTotal: state.byId[commentId].voteTotal - 2,\r\n          },\r\n        },\r\n      };\r\n    }\r\n    if (currentVoteState === 0 && point === -1) {\r\n      return {\r\n        ...state,\r\n        byId: {\r\n          ...state.byId,\r\n          [commentId]: {\r\n            ...comment,\r\n            voteState: -1,\r\n            voteTotal: state.byId[commentId].voteTotal - 1,\r\n          },\r\n        },\r\n      };\r\n    }\r\n    if (currentVoteState === -1 && point === -1) {\r\n      return {\r\n        ...state,\r\n        byId: {\r\n          ...state.byId,\r\n          [commentId]: {\r\n            ...comment,\r\n            voteState: 0,\r\n            voteTotal: state.byId[commentId].voteTotal + 1,\r\n          },\r\n        },\r\n      };\r\n    }\r\n    if (currentVoteState === -1 && point === 1) {\r\n      return {\r\n        ...state,\r\n        byId: {\r\n          ...state.byId,\r\n          [commentId]: {\r\n            ...comment,\r\n            voteState: 1,\r\n            voteTotal: state.byId[commentId].voteTotal + 2,\r\n          },\r\n        },\r\n      };\r\n    }\r\n  } else {\r\n    return state;\r\n  }\r\n}\r\nconst newReply = (state, action) => {\r\n  return {\r\n    ...state,\r\n    byId: {\r\n      ...state.byId,\r\n      [action.commentId]: {\r\n        ...state.byId[action.commentId],\r\n        comments: [...state.byId[action.commentId].comments, action.reply._id],\r\n      },\r\n      [action.reply._id]: action.reply,\r\n    },\r\n  };\r\n};\r\nfunction comments(\r\n  state = {\r\n    byId: {},\r\n    allId: [],\r\n  },\r\n  action\r\n) {\r\n  switch (action.type) {\r\n    case RECEIVE_SINGLE_POSTS: {\r\n      return Object.assign({}, state, {\r\n        byId: {\r\n          ...state.byId,\r\n          ...action.normalizedData.entities.comments,\r\n        },\r\n      });\r\n    }\r\n    case RECEIVE_POSTS: {\r\n      return Object.assign({}, state, {\r\n        byId: {\r\n          ...state.byId,\r\n          ...action.normalizedData.entities.comments,\r\n        },\r\n      });\r\n    }\r\n    case NEW_REPLY_SUCCESS:\r\n      return newReply(state, action);\r\n    case VOTE_CAST:\r\n      return changeCommentPoint(state, action);\r\n    case NEW_COMMENT_SUCCESS:\r\n      return addCommentEntry(state, action);\r\n    case NEW_REPLY_REQUEST:\r\n      return Object.assign({}, state, {});\r\n    default:\r\n      return state;\r\n  }\r\n}\r\nfunction changeNewSubmissionType(\r\n  state = {\r\n    submissionType: \"\",\r\n  },\r\n  action\r\n) {\r\n  switch (action.type) {\r\n    case POST_CREATION_CHANGE_SUBMISSION_TYPE:\r\n      return Object.assign({}, state, {\r\n        submissionType: action.postType,\r\n      });\r\n    default:\r\n      return state;\r\n  }\r\n}\r\nfunction signup(\r\n  state = {\r\n    isSigningUp: false,\r\n    isSignedUp: false,\r\n    err: null,\r\n    passwordError: null,\r\n  },\r\n  action\r\n) {\r\n  const { passwordError } = action;\r\n  switch (action.type) {\r\n    case SIGNUP_REQUEST:\r\n      return Object.assign({}, state, {\r\n        err: null,\r\n        passwordError: null,\r\n      });\r\n    case SIGNUP_SUCCESS:\r\n      return Object.assign({}, state, {\r\n        isSignedUp: true,\r\n        isSigningUp: false,\r\n        err: null,\r\n        passwordError: null,\r\n      });\r\n    case CLEAR_ERROR:\r\n      return Object.assign({}, state, {\r\n        err: null,\r\n      });\r\n    case SIGNUP_ERROR:\r\n      return Object.assign({}, state, {\r\n        err: action.error,\r\n        passwordError,\r\n      });\r\n    default:\r\n      return state;\r\n  }\r\n}\r\nfunction login(\r\n  state = {\r\n    isLoggingIn: false,\r\n    isLoggedIn: false,\r\n    err: null,\r\n    fetching: false,\r\n  },\r\n  action\r\n) {\r\n  switch (action.type) {\r\n    case REQUEST_USER_INFO:\r\n      return Object.assign({}, state, {\r\n        isLoggedIn: true,\r\n        fetching: true,\r\n      });\r\n    case CURRENT_USER:\r\n      return Object.assign({}, state, {\r\n        fetching: false,\r\n      });\r\n    case UNAUTHORIZED_ERROR:\r\n      return Object.assign({}, state, {\r\n        err: \"Username or Password do not match\",\r\n      });\r\n    case CLEAR_LOGIN_MODAL:\r\n      return Object.assign({}, state, {\r\n        err: null,\r\n      });\r\n    case LOGIN_REQUEST:\r\n      return Object.assign({}, state, {\r\n        isLoggingIn: true,\r\n        isLoggedIn: false,\r\n      });\r\n    case LOGIN_SUCCESS:\r\n      return Object.assign({}, state, {\r\n        isLoggingIn: false,\r\n        isLoggedIn: true,\r\n      });\r\n    case LOG_OUT:\r\n      return Object.assign({}, state, {\r\n        isLoggingIn: false,\r\n        isLoggedIn: false,\r\n      });\r\n    case LOGIN_ERROR:\r\n      return Object.assign({}, state, {\r\n        isLoggingIn: false,\r\n        isLoggedIn: false,\r\n      });\r\n    default:\r\n      return state;\r\n  }\r\n}\r\nfunction currentUser(\r\n  state = {\r\n    username: \"\",\r\n    _id: \"\",\r\n    err: null,\r\n  },\r\n  action\r\n) {\r\n  switch (action.type) {\r\n    case LOG_OUT:\r\n      return Object.assign({}, state, {\r\n        username: null,\r\n        _id: null,\r\n      });\r\n    case REFRESH_USER:\r\n      return Object.assign({}, state, {\r\n        username: action.userInfo.username,\r\n        _id: action.userInfo._id,\r\n      });\r\n    case LOGIN_SUCCESS:\r\n      return Object.assign({}, state, {\r\n        username: action.username,\r\n        _id: action.id,\r\n      });\r\n    case CURRENT_USER:\r\n      return Object.assign({}, state, {\r\n        isLoggedIn: true,\r\n        username: action.username,\r\n        _id: action.user,\r\n      });\r\n    default:\r\n      return state;\r\n  }\r\n}\r\nconst rootReducer = combineReducers({\r\n  comments,\r\n  currentModal,\r\n  changeNewSubmissionType,\r\n  posts,\r\n  login,\r\n  signup,\r\n  currentUser,\r\n  listings,\r\n});\r\nexport default rootReducer;\r\n","import { createBrowserHistory } from \"history\";\r\nimport React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { Provider } from \"react-redux\";\r\nimport { Router } from \"react-router\";\r\nimport { Route } from \"react-router-dom\";\r\nimport App from \"./App\";\r\nimport configureStore from \"./store/store\";\r\nconst store = configureStore();\r\nconst history = createBrowserHistory();\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Provider store={store}>\r\n      <Router history={history}>\r\n        <Route component={App} />\r\n      </Router>\r\n    </Provider>\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n);\r\n","import { applyMiddleware, createStore } from \"redux\";\r\nimport { composeWithDevTools } from \"redux-devtools-extension\";\r\nimport thunkMiddleware from \"redux-thunk\";\r\nimport { loadState } from \"../localStorage\";\r\nimport rootReducer from \"../reducers/reducer\";\r\nexport default function configureStore(preloadedState) {\r\n  const persistedState = loadState();\r\n  const composeEnhancers = composeWithDevTools({ trace: true });\r\n  return createStore(\r\n    rootReducer,\r\n    persistedState,\r\n    composeEnhancers(applyMiddleware(thunkMiddleware))\r\n  );\r\n}\r\n","export const loadState = () => {\r\n  try {\r\n    const serializedState = localStorage.getItem(\"state\");\r\n    if (serializedState === null) {\r\n      return undefined;\r\n    }\r\n    return JSON.parse(serializedState);\r\n  } catch (err) {\r\n    return undefined;\r\n  }\r\n};\r\nexport const saveState = (state) => {\r\n  try {\r\n    const serializedState = JSON.stringify(state);\r\n    localStorage.setItem(\"state\", serializedState);\r\n  } catch {}\r\n};\r\n"],"sourceRoot":""}