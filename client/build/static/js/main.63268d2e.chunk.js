(this["webpackJsonpreddit-react"]=this["webpackJsonpreddit-react"]||[]).push([[0],{71:function(t,e,n){},72:function(t,e){},73:function(t,e,n){"use strict";n.r(e);var r=n(0),a=n(1),s=n.n(a),c=n(21),i=n.n(c),o=n(2),l=n(4),u=n(3),d=n(8),b="REQUEST_POSTS",j="RECEIVE_POSTS",O="RECEIVE_SINGLE_POSTS",p="LOGIN_REQUEST",m="LOGIN_SUCCESS",f="LOGIN_ERROR",h="SIGNUP_REQUEST",g="SIGNUP_SUCCESS",v="SIGNUP_ERROR",y="CURRENT_USER",I="POST_CREATION_CHANGE_SUBMISSION_TYPE",x="NEW_POST_SUCCESS",w="NEW_POST_REQUEST",S="NEW_COMMENT_SUCCESS",N="NEW_REPLY_REQUEST",E="NEW_REPLY_SUCCESS",P="VOTE_CAST",C="NEXT_PAGE",T="PREV_PAGE",_="DELETE_POST",L="EDIT_POST",k="LOG_OUT",R="CLEAR_ERROR",U="SET_POST_MODAL",G="SPLICED_POST",A="REFRESH_USER",D="SET_POST",F="UNAUTHORIZED_ERROR",M="SORT_POSTS",z="CLEAR_LOGIN_MODAL",V=n(11),W=new V.b.Entity("comments",{},{idAttribute:"_id"}),B=new V.b.Array(W);W.define({comments:B});var H=new V.b.Entity("posts",{comments:[W]},{idAttribute:"_id"}),Q=n(5),J=n.n(Q);function Y(){return{type:b}}function q(t){return function(e,n){var r={},a=n().posts.allIds,s=n().posts.byId,c=a.map((function(t){return s[t]})),i=a.filter((function(e){if(t!==e)return e}));c.filter((function(e){if(!e.newPost&&e._id!==t)return e})).map((function(t){r[t._id]=t})),e({type:G,newObj:r,splicedArray:i})}}function X(t,e){return function(n,r){var a=r().posts.createdPosts;a=Object.keys(a);r().posts.allIds;n({type:j,data:t,arrayOfNewIds:a,sort:e})}}function Z(t){return function(e,n){e({type:I,postType:t})}}function K(t){return function(e,n){var r=n().changeNewSubmissionType.submissionType;t!==r&&e({type:I,postType:t})}}function $(t,e){return function(n,r){var a=e,s=r().posts.byId[a].voteState;return n({type:P,postId:e,point:t,currentVoteState:s}),1===t?J()({url:"/api/posts/vote-up/".concat(a),method:"PUT",withCredentials:!0}):-1===t?J()({url:"/api/posts/vote-down/".concat(a),method:"PUT",withCredentials:!0}):void 0}}function tt(){return{type:w}}function et(t){return function(e){return J()({url:"/api/post/new/",method:"POST",data:t,withCredentials:!0}).then((function(t){200===t.status&&e(function(t){var e=t._id;return t.newPost=!0,function(n,r){n({type:x,post:t,id:e})}}(t.data))}))}}function nt(t,e,n){return function(r,a){var s=a().posts.byId,c=a().posts.allIds.map((function(t){return s[t]}));return r(Y()),n?J()({url:"/api/posts/".concat(n,"?page[size]=").concat(t,"&firstId=").concat(e),method:"GET",withCredentials:!0}).then((function(t){var e=Object(V.a)(t.data,[H]),a=e.result,i=a.map((function(t){return e.entities.posts[t]})),o=e.entities.posts;r({type:T,idsofNewData:a,sort:n,newPosts:o,newPostsArray:i,currentPosts:s,arrayOfCurrentPosts:c})})):n?void 0:J()({url:"/api/posts?page[size]=".concat(t,"&firstId=").concat(e),method:"GET",withCredentials:!0}).then((function(t){var e=Object(V.a)(t.data,[H]),a=e.result,i=a.map((function(t){return e.entities.posts[t]})),o=e.entities.posts;return r({type:T,idsofNewData:a,newPosts:o,sort:n,newPostsArray:i,currentPosts:s,arrayOfCurrentPosts:c}),"completed"}))}}function rt(t,e,n){return function(r,a){var s=a().posts.byId,c=a().posts.allIds.map((function(t){return s[t]}));return r(Y()),n?J()({url:"/api/posts/".concat(n,"?page[size]=").concat(t,"&lastId=").concat(e),method:"GET",withCredentials:!0}).then((function(t){var e=Object(V.a)(t.data,[H]),a=e.result,i=a.map((function(t){return e.entities.posts[t]})),o=e.entities.posts;r({type:C,sort:n,idsofNewData:a,newPosts:o,newPostsArray:i,currentPosts:s,arrayOfCurrentPosts:c})})):n?void 0:J()({url:"/api/posts?page[size]=".concat(t,"&lastId=").concat(e),method:"GET",withCredentials:!0}).then((function(t){var e=Object(V.a)(t.data,[H]),n=e.result,a=n.map((function(t){return e.entities.posts[t]})),i=e.entities.posts;return r({type:C,idsofNewData:n,newPosts:i,newPostsArray:a,currentPosts:s,arrayOfCurrentPosts:c}),"completed"}))}}function at(t,e,n){return function(r,a){a().posts.byId;if(r(Y()),n){if(!t)return J()({url:"/api/posts/".concat(n),method:"GET",withCredentials:!0}).then((function(t){var e=Object(V.a)(t.data,[H]);r(X(e,n))}));if("lastId"in e)return J()({url:"/api/posts/".concat(n,"?page[size]=").concat(t,"&lastId=").concat(e.lastId),method:"GET",withCredentials:!0}).then((function(t){var e=Object(V.a)(t.data,[H]);r(X(e,n))}));if("firstId"in e){if(void 0===e)return;return J()({url:"/api/posts/".concat(n,"?page[size]=").concat(t,"&firstId=").concat(e.firstId),method:"GET",withCredentials:!0}).then((function(t){var e=Object(V.a)(t.data,[H]);r(X(e,n))}))}}if(!t&&!n)return J()({url:"/api/posts",method:"GET",withCredentials:!0}).then((function(t){var e=Object(V.a)(t.data,[H]);r(X(e))}));if("lastId"in e)return J()({url:"/api/posts/?page[size]=".concat(t,"&lastId=").concat(e.lastId),method:"GET",withCredentials:!0}).then((function(t){var e=Object(V.a)(t.data,[H]);r(X(e))}));if("firstId"in e){if(void 0===e)return;return J()({url:"/api/posts?page[size]=".concat(t,"&firstId=").concat(e.firstId),method:"GET",withCredentials:!0}).then((function(t){var e=Object(V.a)(t.data,[H]);r(X(e))}))}}}function st(t){return function(e){return e({type:"REQUEST_SINGLE_POST"}),J()({url:"/api/post/".concat(t),method:"GET",withCredentials:!0}).then((function(t){e(function(t){var e={},n=t._id;return e[t._id]=t,{type:O,id:n,temp:e}}(t.data))}))}}function ct(t,e){return function(n){return n({type:p}),J()({withCredentials:!0,method:"POST",data:{username:t,password:e},url:"/api/login"}).then((function(t){if(200===t.status)return n(function(t,e){return function(n){n({type:m,username:t,id:e}),Promise.resolve("success")}}(t.data.username,t.data._id)),t.data.jwt_token})).then((function(t){return localStorage.setItem("accessToken",t),"login"})).catch((function(){n({type:F})}))}}function it(){return function(t,e){if(localStorage.getItem("accessToken"))return J()({withCredentials:!0,method:"GET",url:"/api/logged-in"}).then((function(e){var n;200===e.status&&t((n={username:e.data.username,_id:e.data._id},{type:y,user:n})),"jwt expired"===e.data.error&&J()({url:"/api/refresh",withCredentials:!0,method:"POST"}).then((function(e){if(200===e.status){var n=e.data.jwt_token;t({type:A,userInfo:e.data}),localStorage.setItem("accessToken",n)}}))})).catch((function(e){e&&t(function(t){return function(e){J()({withCredentials:!0,method:"POST",url:"/api/logout"}),e({type:f,err:t})}}())}))}}function ot(t,e,n){return function(r){return r({type:h}),J()({url:"/api/signup",data:{username:t,password:e,passwordConfirm:n},method:"POST"}).then((function(t){if(200===t.status)return r({type:g}),"signup"})).catch((function(t){var a,s=t.response.data;e!==n&&(a="Passwords do not match"),r({type:v,error:s,passwordError:a})}))}}J.a.interceptors.request.use((function(t){var e=localStorage.getItem("accessToken");return e&&(t.headers.Authorization="Bearer ".concat(e)),t}));var lt=n(9),ut=n.p+"static/media/image-placeholder.1c6a32aa.svg",dt=n.p+"static/media/link-post.cdb86b79.svg",bt=n.p+"static/media/reddit-default.f7d549ef.svg";function jt(){return(jt=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function Ot(t,e){if(null==t)return{};var n,r,a=function(t,e){if(null==t)return{};var n,r,a={},s=Object.keys(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)>=0||(a[n]=t[n]);return a}(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}var pt=a.createElement("g",null,a.createElement("g",null,a.createElement("g",null,a.createElement("path",{d:"M64,341.333C64,364.907,83.093,384,106.667,384h170.667C300.907,384,320,364.907,320,341.333v-256H64V341.333z"}),a.createElement("polygon",{points:"266.667,21.333 245.333,0 138.667,0 117.333,21.333 42.667,21.333 42.667,64 341.333,64 341.333,21.333  "})))),mt=a.createElement("g",null),ft=a.createElement("g",null),ht=a.createElement("g",null),gt=a.createElement("g",null),vt=a.createElement("g",null),yt=a.createElement("g",null),It=a.createElement("g",null),xt=a.createElement("g",null),wt=a.createElement("g",null),St=a.createElement("g",null),Nt=a.createElement("g",null),Et=a.createElement("g",null),Pt=a.createElement("g",null),Ct=a.createElement("g",null),Tt=a.createElement("g",null);function _t(t,e){var n=t.title,r=t.titleId,s=Ot(t,["title","titleId"]);return a.createElement("svg",jt({id:"Capa_1",x:"0px",y:"0px",viewBox:"0 0 384 384",xmlSpace:"preserve",ref:e,"aria-labelledby":r},s),n?a.createElement("title",{id:r},n):null,pt,mt,ft,ht,gt,vt,yt,It,xt,wt,St,Nt,Et,Pt,Ct,Tt)}var Lt=a.forwardRef(_t);n.p;function kt(){return(kt=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function Rt(t,e){if(null==t)return{};var n,r,a=function(t,e){if(null==t)return{};var n,r,a={},s=Object.keys(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)>=0||(a[n]=t[n]);return a}(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}var Ut=a.createElement("g",{id:"Page-1"},a.createElement("g",{id:"Desktop-(Card)",transform:"translate(-516.000000, -289.000000)"},a.createElement("g",{id:"Group-6",transform:"translate(428.000000, 154.000000)"},a.createElement("g",{id:"Group",transform:"translate(16.000000, 134.000000)"},a.createElement("g",{id:"down-arrow-copy",transform:"translate(72.000000, 1.000000)"},a.createElement("path",{d:"M12.2275497,7.76096702 C12.1820052,7.65192943 12.0757255,7.58077755 11.957786,7.58077755 L8.75858504,7.58077755 L8.75858504,0.291577829 C8.75858504,0.130631897 8.62778141,0 8.4666239,0 L3.79538263,0 C3.63422512,0 3.50342149,0.130631897 3.50342149,0.291577829 L3.50342149,7.58080489 L0.291958509,7.58080489 C0.174019021,7.58080489 0.0677393658,7.65195676 0.0221948522,7.76042033 C-0.0227748808,7.86945792 0.00174908806,7.99484158 0.0852564863,8.07823934 L5.90969908,13.9142788 C5.96457693,13.9690846 6.03875099,14 6.1164011,14 C6.19405121,14 6.26822527,13.9690846 6.32310313,13.9148528 L12.1644881,8.07881337 C12.2479955,7.99538827 12.2730942,7.87003194 12.2275497,7.76096702 Z",id:"Path"}))))));function Gt(t,e){var n=t.title,r=t.titleId,s=Rt(t,["title","titleId"]);return a.createElement("svg",kt({width:"13px",height:"14px",viewBox:"0 0 13 14",ref:e,"aria-labelledby":r},s),void 0===n?a.createElement("title",{id:r},"down-arrow copy"):n?a.createElement("title",{id:r},n):null,Ut)}var At=a.forwardRef(Gt);n.p;function Dt(){return(Dt=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function Ft(t,e){if(null==t)return{};var n,r,a=function(t,e){if(null==t)return{};var n,r,a={},s=Object.keys(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)>=0||(a[n]=t[n]);return a}(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}var Mt=a.createElement("g",{id:"Page-1"},a.createElement("g",{id:"Desktop-(Card)",transform:"translate(-444.000000, -289.000000)"},a.createElement("g",{id:"Group-6",transform:"translate(428.000000, 154.000000)"},a.createElement("g",{id:"Group",transform:"translate(16.000000, 134.000000)"},a.createElement("g",{id:"down-arrow",transform:"translate(6.500000, 8.000000) scale(1, -1) translate(-6.500000, -8.000000) translate(0.000000, 1.000000)"},a.createElement("path",{d:"M12.2275497,7.76096702 C12.1820052,7.65192943 12.0757255,7.58077755 11.957786,7.58077755 L8.75858504,7.58077755 L8.75858504,0.291577829 C8.75858504,0.130631897 8.62778141,0 8.4666239,0 L3.79538263,0 C3.63422512,0 3.50342149,0.130631897 3.50342149,0.291577829 L3.50342149,7.58080489 L0.291958509,7.58080489 C0.174019021,7.58080489 0.0677393658,7.65195676 0.0221948522,7.76042033 C-0.0227748808,7.86945792 0.00174908806,7.99484158 0.0852564863,8.07823934 L5.90969908,13.9142788 C5.96457693,13.9690846 6.03875099,14 6.1164011,14 C6.19405121,14 6.26822527,13.9690846 6.32310313,13.9148528 L12.1644881,8.07881337 C12.2479955,7.99538827 12.2730942,7.87003194 12.2275497,7.76096702 Z",id:"Path"}))))));function zt(t,e){var n=t.title,r=t.titleId,s=Ft(t,["title","titleId"]);return a.createElement("svg",Dt({width:"13px",height:"14px",viewBox:"0 0 13 14",ref:e,"aria-labelledby":r},s),void 0===n?a.createElement("title",{id:r},"down-arrow"):n?a.createElement("title",{id:r},n):null,Mt)}var Vt=a.forwardRef(zt),Wt=(n.p,function(t){var e=t.post,n=t.pastParams,s=t.firstPost,c=Object(a.useState)(!1),i=Object(l.a)(c,2),o=i[0],d=i[1],b=Object(a.useState)(!0),j=Object(l.a)(b,2),O=j[0],p=j[1],m=Object(u.c)(),f=Object(u.d)((function(t){return t.posts.allIds})),h=Object(u.d)((function(t){return t.currentUser._id})),g=Object(u.d)((function(t){return t.posts.status})),v=function(t){m(function(t){return function(e){return e({type:_,postId:t}),J()({url:"/api/delete/".concat(t),method:"DELETE",withCredentials:!0})}}(t)),p(!1)};return"loading"===e?Object(r.jsx)("div",{className:"card-container",children:Object(r.jsx)("div",{className:"card-content-container"})}):f[0]?Object(r.jsx)(r.Fragment,{children:O?Object(r.jsxs)("div",{className:"card-container",children:["loading"===g?Object(r.jsx)("div",{}):Object(r.jsxs)("div",{className:"card-content-container",children:[Object(r.jsxs)("p",{className:"card-author",children:["u/",e.author.username]}),Object(r.jsx)("h4",{className:"card-title",children:Object(r.jsx)(lt.a,{to:{pathname:"/post/".concat(e._id),state:{modal:!0,homePosts:{params:n.params,firstPost:s._id}}},children:e.title})}),Object(r.jsxs)("div",{className:"vote-container",children:[Object(r.jsx)("li",{children:Object(r.jsx)(Vt,{className:1===e.voteState?"home-vote-color":"",alt:""})}),Object(r.jsx)("li",{children:e.voteTotal}),Object(r.jsx)("li",{children:Object(r.jsx)(At,{className:-1===e.voteState?"home-vote-color":"",alt:""})})]})]}),h===e.author._id?Object(r.jsx)("div",{className:"edit-del-container",children:Object(r.jsxs)("div",{className:"edit-del-content",children:[o?Object(r.jsxs)("div",{className:"delete-confirm-container",children:[Object(r.jsx)("div",{children:Object(r.jsx)("p",{className:"delete-confirm",children:"Delete?"})}),Object(r.jsx)("li",{onClick:function(){return v(e._id)},className:"delete-button-yes",children:"Yes"}),Object(r.jsx)("li",{className:"delete-button-slash",children:"/"}),Object(r.jsx)("li",{className:"delete-button-yes",children:"No"})]}):null,Object(r.jsx)("button",{onClick:function(){d(!o)},className:"delete-button",children:Object(r.jsx)(Lt,{className:"del-svg"})})]})}):null]},e._id):null}):Object(r.jsx)("div",{})}),Bt=function(t){var e=Object(a.useState)(""),n=Object(l.a)(e,2),s=n[0],c=n[1],i=Object(a.useState)(""),o=Object(l.a)(i,2),d=o[0],b=o[1],j=Object(u.c)(),O=(Object(u.d)((function(t){return t.login.isLoggedIn})),Object(u.d)((function(t){return t.login.err})));return Object(r.jsx)("div",{className:"login-modal-wrapper",children:Object(r.jsxs)("div",{className:"login-card-modal",children:[Object(r.jsxs)("div",{className:"login-modal-title-exit-container",children:[Object(r.jsx)("p",{className:"login-modal-title",children:"Login"}),Object(r.jsx)("button",{onClick:t.close,className:"login-cancel-button",children:"X"})]}),Object(r.jsxs)("div",{className:"login-input-container",children:[Object(r.jsx)("input",{onChange:function(t){c(t.target.value)},className:"login-input",placeholder:"username",type:"text"}),Object(r.jsx)("input",{onChange:function(t){b(t.target.value)},className:"login-input",placeholder:"password",type:"password"})," ",Object(r.jsx)("p",{className:"signup-error",children:O}),Object(r.jsx)("button",{onClick:function(){j(ct(s,d)).then((function(t){"login"===t&&window.location.reload()}))},className:"login-button",children:"Log in"})]})]})})},Ht=function(t){var e=Object(a.useState)(""),n=Object(l.a)(e,2),s=n[0],c=n[1],i=Object(a.useState)(""),o=Object(l.a)(i,2),b=o[0],j=o[1],O=Object(a.useState)(""),p=Object(l.a)(O,2),m=p[0],f=p[1],g=Object(a.useState)(!1),v=Object(l.a)(g,2),y=(v[0],v[1],Object(u.c)()),I=Object(u.d)((function(t){return t.login.isLoggedIn})),x=Object(u.d)((function(t){return t.signup.err})),w=Object(u.d)((function(t){return t.signup.passwordError}));return I&&window.location.reload(),Object(a.useEffect)((function(){y({type:h})}),[]),Object(r.jsx)("div",{className:"modal-wrapper",children:Object(r.jsxs)("div",{className:"card-modal",children:[Object(r.jsxs)("div",{className:"login-modal-title-exit-container",children:[Object(r.jsx)("p",{className:"login-modal-title",children:"Sign up"}),Object(r.jsx)("button",{onClick:t.close,className:"login-cancel-button",children:"X"})]}),Object(r.jsxs)("div",{className:"login-input-container",children:[Object(r.jsx)("input",{onChange:function(t){c(t.target.value)},onClick:function(){y({type:R})},className:"login-input",placeholder:"username",type:"text"}),Object(r.jsx)("p",{className:"signup-error",children:x}),Object(r.jsx)("input",{onChange:function(t){j(t.target.value)},className:"login-input",placeholder:"password",type:"password"}),Object(r.jsx)("p",{className:"signup-error",children:w}),Object(r.jsx)("input",{onChange:function(t){f(t.target.value)},className:"login-input",placeholder:"Confirm your password",type:"password"}),Object(r.jsx)("button",{onClick:function(){y(ot(s,b,m)).then((function(t){"signup"===t&&d.a}))},className:"login-button",children:"Sign up"})]})]})})};var Qt=Object(u.b)((function(t,e){var n,r,a,s,c=t.posts.allIds,i=t.posts.byId,o=[],l=[],u=[],d=[],b=e.location.search,j=new URLSearchParams(b).get("after"),O=new URLSearchParams(b).get("before");t.listings.listingOrder.hot&&"hot"===t.listings.sortOrder&&(n=O,r=j,o=t.listings.listingOrder.hot,a=t.listings.listingOrder.hot.indexOf(n),s=t.listings.listingOrder.hot.indexOf(r)),t.listings.listingOrder.default&&"default"===t.listings.sortOrder&&(n=O,r=j,d=t.listings.listingOrder.default,a=t.listings.listingOrder.default.indexOf(n),s=t.listings.listingOrder.default.indexOf(r)),t.listings.listingOrder.top&&"top"===t.listings.sortOrder&&(n=O,r=j,l=t.listings.listingOrder.top,a=t.listings.listingOrder.top.indexOf(n),s=t.listings.listingOrder.top.indexOf(r)),t.listings.listingOrder.new&&"new"===t.listings.sortOrder&&(n=O,r=j,u=t.listings.listingOrder.new,a=t.listings.listingOrder.new.indexOf(n),s=t.listings.listingOrder.new.indexOf(r));var p,m=c.map((function(t){return i[t]}));if(t.posts.byId,"default"===e.match.params.sort&&t.listings.listingOrder.default){if(!j&&!O)return{posts:d=(d=d.slice(0,10)).map((function(e){return t.posts.byId[e]}))};if(j)return{posts:d=(d=d.slice(s+1,s+11)).map((function(e){return t.posts.byId[e]}))};if(O&&d.length>=10)return{posts:d=(d=d.slice(a-10,a)).map((function(e){return t.posts.byId[e]}))};if(O&&d.length<=10)return{posts:d=d.map((function(e){return t.posts.byId[e]}))}}if("hot"===e.match.params.sort&&t.listings.listingOrder.hot){if(!j&&!O)return{posts:o=(o=o.slice(0,10)).map((function(e){return t.posts.byId[e]}))};if(j)return{posts:o=(o=o.slice(s+1,s+11)).map((function(e){return t.posts.byId[e]}))};if(O&&o.length>=10)return{posts:o=(o=o.slice(a-10,a)).map((function(e){return t.posts.byId[e]}))};if(O&&o.length<=10)return{posts:o=o.map((function(e){return t.posts.byId[e]}))}}if("top"===e.match.params.sort&&t.listings.listingOrder.top){if(!j&&!O)return{posts:l=(l=l.slice(0,10)).map((function(e){return t.posts.byId[e]}))};if(j&&l.length>10)return{posts:l=(l=l.slice(s+1,s+11)).map((function(e){return t.posts.byId[e]}))};if(j&&l.length<=10)return{posts:l=l.map((function(e){return t.posts.byId[e]}))};if(O&&l.length>10)return{posts:l=(l=l.slice(a-10,a)).map((function(e){return t.posts.byId[e]}))};if(O&&l.length<=10)return{posts:l=l.map((function(e){return t.posts.byId[e]}))}}if("new"===e.match.params.sort&&t.listings.listingOrder.new){if(!j&&!O)return{posts:u=(u=u.slice(0,10)).map((function(e){return t.posts.byId[e]}))};if(j&&u.length>10)return{posts:u=(u=u.slice(s+1,s+11)).map((function(e){return t.posts.byId[e]}))};if(j&&u.length<=10)return{posts:u=u.map((function(e){return t.posts.byId[e]}))};if(O&&u.length>10)return{posts:u=(u=u.slice(a-10,a)).map((function(e){return t.posts.byId[e]}))};if(O&&u.length<=10)return{posts:u=u.map((function(e){return t.posts.byId[e]}))}}if(e.match.isExact&&!e.match.params.sort&&t.listings.listingOrder.default){var f=t.listings.listingOrder.default.map((function(e){return t.posts.byId[e]}));if(j)return s=c.indexOf(j),p=f.slice(s+1,s+11),{allIds:c,allPosts:m,firstId:n&&n._id,lastId:r&&r._id,query:e.location.search,posts:p};if(O)return a=c.indexOf(O),p=f.slice(a-10,a),{allIds:c,allPosts:m,firstId:n&&n._id,lastId:r&&r._id,query:e.location.search,posts:p};if(!e.after&&!e.before){for(var h=[],g=0;g<f.length;g++)h.push(f[g]);return{allPosts:m,allIds:c,firstId:n&&n._id,lastId:r&&r._id,posts:h}}}var v=t.listings.listingOrder.default?t.listings.listingOrder.default.map((function(e){return t.posts.byId[e]})):[],y=t.listings.listingOrder.hot?t.listings.listingOrder.hot.map((function(e){return t.posts.byId[e]})):[],I=t.listings.listingOrder.top?t.listings.listingOrder.top.map((function(e){return t.posts.byId[e]})):[],x=t.listings.listingOrder.new?t.listings.listingOrder.new.map((function(e){return t.posts.byId[e]})):[];if(e.location.state){if(!e.match.isExact&&!e.location.state.homePosts.params.sort)return a=d.indexOf(e.location.state.homePosts.firstPost),{posts:p=v.slice(a,a+10)};if(!e.match.isExact&&"hot"===e.location.state.homePosts.params.sort)return a=o.indexOf(e.location.state.homePosts.firstPost),{posts:p=y.slice(a,a+10)};if(!e.match.isExact&&"new"===e.location.state.homePosts.params.sort)return a=u.indexOf(e.location.state.homePosts.firstPost),{posts:p=x.slice(a,a+10)};if(!e.match.isExact&&"top"===e.location.state.homePosts.params.sort)return a=l.indexOf(e.location.state.homePosts.firstPost),{posts:p=I.slice(a,a+10)}}}))((function(t){var e=Object(u.c)(),n=Object(a.useState)(""),s=Object(l.a)(n,2),c=(s[0],s[1],Object(a.useState)("")),i=Object(l.a)(c,2),o=(i[0],i[1],Object(u.d)((function(t){return t.posts.allIds}))),b=Object(u.d)((function(t){return t.posts.byId})),j=o.map((function(t){return b[t]})),O=Object(u.d)((function(t){return t.login.isLoggedIn})),p=Object(u.d)((function(t){return t.posts.status})),m=Object(d.i)(),f=(Object(u.d)((function(t){return t.listings.listingOrder.hot})),t.history.location.search),h=new URLSearchParams(f).get("count"),g=new URLSearchParams(f).get("after"),v=new URLSearchParams(f).get("before");if(Object(a.useEffect)((function(){var t=[];document.body.style.overflow="";for(var n=0;n<10;n++)t.push(j[n]);if("post"===m.sort)e(at());else{if(m.sort){if(h&&g)e(at(h,{lastId:g},m.sort));if(h||g||v||!m.sort||e(at(null,null,m.sort)),h&&v)e(at(h,{firstId:v},m.sort))}if(!m.sort){if(h&&g)e(at(h,{lastId:g}));if(h&&v)e(at(h,{firstId:v}));h||g||v||e(at())}}}),[]),"idle"===p)return Object(r.jsx)("div",{});var y,I,x,w=function(t){e(function(t){return function(e,n){var r=n().posts.byId,a=n().posts.allIds.map((function(t){return r[t]}));return e(Y()),J()({url:"/api/posts/".concat(t),method:"GET",withCredentials:!0}).then((function(n){var s=Object(V.a)(n.data,[H]),c=s.result,i=c.map((function(t){return s.entities.posts[t]})),o=s.entities.posts;if(e({type:M,idsofNewData:c,newPosts:o,sortType:t,newPostsArray:i,currentPosts:r,arrayOfCurrentPosts:a}),200===n.data.status)return"fetched"}))}}(t)).then((function(t){}))};try{x=t.posts.filter((function(t){if(void 0!==t)return t})),I=t.posts[0]._id,y=x[x.length-1]._id}catch(S){}return Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)("div",{className:"home-wrapper",children:[t.showSignup?Object(r.jsx)(Ht,{}):null,Object(r.jsxs)("div",{className:"new-post-container",children:[Object(r.jsx)(lt.a,{to:"",children:Object(r.jsx)("img",{className:"new-post-profile-image",src:bt,alt:""})}),Object(r.jsx)(lt.a,{onClick:function(){O||t.handleShowLogin(),e(Z("post")),e(tt())},to:O?"/new-post":"",className:"new-post-input-container",children:Object(r.jsx)("input",{placeholder:"Create Post",className:"new-post-input",type:"text"})}),Object(r.jsx)(lt.a,{onClick:function(){O||t.handleShowLogin(),e(Z("media")),e(tt())},to:O?"/new-post?media=true":"",children:Object(r.jsx)("img",{className:"post-option",src:ut,alt:""})}),Object(r.jsx)(lt.a,{onClick:function(){O||t.handleShowLogin(),e(Z("link")),e(tt())},to:O?"/new-post?link=true":"",children:Object(r.jsx)("img",{className:"post-option",src:dt,alt:""})})]}),Object(r.jsxs)("div",{className:"categories-container",children:[Object(r.jsx)(lt.a,{to:"/hot",onClick:function(){return w("hot")},children:"Hot"}),Object(r.jsx)(lt.a,{to:"/new",onClick:function(){return w("new")},children:"New"}),Object(r.jsx)(lt.a,{to:"/top",onClick:function(){return w("top")},children:"Top"})]}),t.posts&&0!==t.posts.length&&t.posts[0]?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(r.Fragment,{children:t.posts.map((function(e){if(e)return Object(r.jsx)(Wt,{firstPost:t.posts[0],pastParams:t.match,history:t,post:e},e._id)}))}),b.length>=10?Object(r.jsxs)("div",{className:"page-set-container",children:[1!==t.posts[0].page&&h?Object(r.jsx)(lt.a,{to:{pathname:t.location.pathname,search:"?"+"count=10&before=".concat(I)},onClick:function(){return t.handlePrevPage(I,m.sort)},children:"Prev"}):null,"last"===t.posts[0].page?null:Object(r.jsx)(lt.a,{to:{pathname:t.location.pathname,search:"?"+"count=10&after=".concat(y)},onClick:function(){return t.handleShowNextPage(y,m.sort)},children:"Next"})]}):null]}):Object(r.jsx)("div",{})]})})})),Jt=n(29),Yt=n.n(Jt),qt=n(40),Xt=n.p+"static/media/magnifying-glass.4af3fe67.svg",Zt=n.p+"static/media/Triangle.145cb339.svg",Kt=n.p+"static/media/hamburger.19fb64e1.svg",$t=Object(d.j)((function(t){Object(d.g)(),Object(d.i)(),Object(d.h)();var e,n=Object(a.useState)(!1),s=Object(l.a)(n,2),c=s[0],i=s[1],o=Object(a.useState)(""),b=Object(l.a)(o,2),j=b[0],O=b[1],p=Object(a.useState)(!1),m=Object(l.a)(p,2),f=m[0],h=m[1],g=Object(a.useState)([]),v=Object(l.a)(g,2),y=v[0],I=v[1],x=Object(a.useState)(!1),w=Object(l.a)(x,2),S=w[0],N=w[1],E=Object(u.d)((function(t){return t.currentUser})),P=Object(u.d)((function(t){return t.currentModal})),C=Object(u.c)(),T=Object(u.d)((function(t){return t.posts.allIds})),_=Object(u.d)((function(t){return t.posts.byId})),L=T.map((function(t){return _[t]})),R=function(){i(!c)},U=function(){var t=Object(qt.a)(Yt.a.mark((function t(n){var r,a;return Yt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return O(n.target.value),e=n.target.value,t.next=4,e.trimStart();case 4:return r=t.sent,t.next=7,L.filter((function(t){if(new RegExp("^"+r,"gi").test(t.title))return t.title}));case 7:a=t.sent,I(a);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),G=function(){N(!S)},A=function(){S&&N(!1)};return Object(a.useEffect)((function(){return document.title="Readit",document.body.addEventListener("click",A),function(){document.body.removeEventListener("click",A)}}),[A]),Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("div",{className:"wrapper",children:Object(r.jsx)("div",{className:"navbar-container",children:Object(r.jsxs)("div",{className:"navbar-content",children:[Object(r.jsx)("li",{children:Object(r.jsx)(lt.a,{to:{pathname:"/"},replace:"/"===t.history.location.pathname,onClick:function(){document.body.style.overflow="",P.post.newPost&&C(q(P.post._id)),"/"===t.match.path&&C(at())},className:"logo",children:"readit"})}),Object(r.jsxs)("div",{className:"search-bar-container",children:[Object(r.jsx)("input",{onClick:G,onChange:function(t){return U(t)},className:"search-bar",placeholder:"Search",type:"text"}),Object(r.jsx)("span",{className:"search-icon",children:Object(r.jsx)("img",{src:Xt,alt:""})}),Object(r.jsx)("div",{onClick:function(t){return G()},className:"search-dropdown-container",children:/^\s+(?=[a-z0-9])|^[a-z0-9]/g.test(j)?y.map((function(t){return Object(r.jsxs)(r.Fragment,{children:[" ",Object(r.jsx)("div",{className:"search-dropdown-content ".concat(S?null:"hide-search"," "),children:Object(r.jsx)(lt.a,{className:"search-content-item",to:"/post/".concat(t._id),children:t.title})},t._id)]})})):null})]}),E.username?Object(r.jsxs)("div",{className:"profile-wrapper",children:[Object(r.jsxs)("button",{onClick:function(){return R()},className:"navbar-profile-container",children:[Object(r.jsxs)("div",{className:"navbar-logo-text",children:[Object(r.jsx)("img",{className:"default-profile-image",style:{backgroundColor:"rgba(0, 0, 0, 0.1)"},src:bt,alt:""}),Object(r.jsx)("p",{className:"navbar-profile-username",children:E.username})]}),Object(r.jsx)("img",{className:"navbar-profile-triangle",src:Zt,alt:""})]}),c?Object(r.jsx)("div",{className:"navbar-dropdown-container",children:Object(r.jsxs)("ul",{className:"navbar-dropdown",children:[Object(r.jsx)("li",{children:Object(r.jsx)("button",{onClick:function(){C((function(t){return t({type:k}),J()({url:"/api/logout",withCredentials:!0,method:"POST"}).then((function(t){if(200===t.status)return localStorage.removeItem("accessToken"),localStorage.removeItem("state"),"success"}))})).then((function(t){"success"===t&&window.location.reload()}))},className:"navbar-dropdown-options",children:"Logout"})}),Object(r.jsx)("li",{}),Object(r.jsx)("li",{})]})}):null]}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)("div",{className:"auth-button-container-navbar",children:[Object(r.jsx)("button",{onClick:t.handleShowLogin,children:"log in"}),Object(r.jsx)("button",{onClick:t.handleShowSignup,children:"sign up"})]}),Object(r.jsxs)("div",{className:"hamburger-container",children:[Object(r.jsx)("button",{onClick:R,className:"hamburger-icon-button",children:Object(r.jsx)("img",{onClick:function(){h(!f)},className:"hamburger-icon",src:Kt,alt:""})}),Object(r.jsxs)("div",{className:f?"hamburger-item-container":"inactive",children:[Object(r.jsxs)("li",{className:"hamburger-item",children:[" ",Object(r.jsx)("button",{className:"hamburger-item-button",onClick:t.handleShowLogin,children:"log in"})]}),Object(r.jsx)("li",{className:"hamburger-item",children:Object(r.jsx)("button",{className:"hamburger-item-button",onClick:t.handleShowSignup,children:"sign up"})})]})]})]})]})})}),Object(r.jsx)("div",{})]})})),te=function(t){var e=new URLSearchParams(Object(d.h)().search),n=e.get("media"),s=e.get("link"),c=Object(u.d)((function(t){return t.changeNewSubmissionType.submissionType})),i=Object(d.g)(),o=Object(u.c)(),b=Object(a.useState)(""),j=Object(l.a)(b,2),O=(j[0],j[1],Object(a.useState)("")),p=Object(l.a)(O,2),m=p[0],f=p[1],h=Object(a.useState)(""),g=Object(l.a)(h,2),v=g[0],y=g[1],I=Object(a.useState)(""),x=Object(l.a)(I,2),w=x[0],S=x[1],N=Object(u.d)((function(t){return t.posts.submitted})),E=Object(u.d)((function(t){return t.posts.reRouteId}));Object(a.useEffect)((function(){n?c="media":s&&(c="link"),N&&i.push("/post/".concat(E))}),[N]);return Object(r.jsx)("div",{className:"newpost-wrapper",children:Object(r.jsxs)("div",{className:"newpost-container",children:[Object(r.jsx)("p",{className:"newpost-title",children:"Create a post"}),Object(r.jsxs)("div",{className:"newpost-template",children:[Object(r.jsxs)("div",{className:"newpost-options",children:[Object(r.jsx)("button",{className:"post"===c?"submit-type-button ".concat("selectedType"):"submit-type-button",onClick:function(){window.history.replaceState("page2","Title","/new-post"),o(K("post"))},children:"Post"}),Object(r.jsxs)("button",{className:"media"===c?"submit-type-button ".concat("selectedType"):"submit-type-button",onClick:function(){o(K("media")),window.history.replaceState("page2","Title","/new-post")},children:["Images ","&"," Video"]}),Object(r.jsx)("button",{className:"link"===c?"submit-type-button ".concat("selectedType"):"submit-type-button",onClick:function(){o(K("link")),window.history.replaceState("page2","Title","/new-post")},children:"Link"})]}),Object(r.jsxs)("form",{action:"",children:[Object(r.jsx)("div",{className:"newpost-title-container",children:Object(r.jsx)("input",{onChange:function(t){f(t.target.value)},placeholder:"Title",className:"newpost-title",type:"text"})}),Object(r.jsxs)("div",{className:"newpost-entry-container",children:["media"===c?Object(r.jsx)("div",{className:"upload-input-container",children:Object(r.jsx)("input",{onChange:function(t){S(t.target.files[0])},className:"upload-input",type:"file",name:"",id:"file-input"})}):Object(r.jsx)("textarea",{onChange:function(t){y(t.target.value)},placeholder:"Text(optional)",className:"newpost-entry",name:"",id:"",cols:"30",rows:"10"}),Object(r.jsx)("div",{className:"submission-button-container",children:Object(r.jsx)("button",{type:"submit",onClick:function(t){return function(t){t.preventDefault();var e=new FormData;e.append("title",m),e.append("content",v),e.append("file",w),o(et(e))}(t)},className:"submission-buttons",children:"Post"})})]})]})]})]})})};function ee(t){return function(e,n){console.log(t,"<-----");var r=t._id,a=t.postId;e({type:S,savedComment:t,id:r,postId:a})}}function ne(t,e,n){return function(r,a){var s=n,c=a().comments.byId[s].voteState;r({type:P,point:t,commentId:n,currentVoteState:c}),1===t&&J()({url:"/api/comment/vote-up",method:"PUT",data:{postId:e,commentId:n},withCredentials:!0}),-1===t&&J()({url:"/api/comment/vote-down",method:"PUT",data:{postId:e,commentId:n},withCredentials:!0})}}var re=n.p+"static/media/down-arrow.c9c98d5d.svg";function ae(){return(ae=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function se(t,e){if(null==t)return{};var n,r,a=function(t,e){if(null==t)return{};var n,r,a={},s=Object.keys(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)>=0||(a[n]=t[n]);return a}(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}var ce=a.createElement("g",null,a.createElement("g",null,a.createElement("path",{d:"M392.533,238.937c-9.426,0-17.067,7.641-17.067,17.067V426.67c0,9.426-7.641,17.067-17.067,17.067H51.2 c-9.426,0-17.067-7.641-17.067-17.067V85.337c0-9.426,7.641-17.067,17.067-17.067H256c9.426,0,17.067-7.641,17.067-17.067 S265.426,34.137,256,34.137H51.2C22.923,34.137,0,57.06,0,85.337V426.67c0,28.277,22.923,51.2,51.2,51.2h307.2 c28.277,0,51.2-22.923,51.2-51.2V256.003C409.6,246.578,401.959,238.937,392.533,238.937z"}))),ie=a.createElement("g",null,a.createElement("g",null,a.createElement("path",{d:"M458.742,19.142c-12.254-12.256-28.875-19.14-46.206-19.138c-17.341-0.05-33.979,6.846-46.199,19.149L141.534,243.937 c-1.865,1.879-3.272,4.163-4.113,6.673l-34.133,102.4c-2.979,8.943,1.856,18.607,10.799,21.585 c1.735,0.578,3.552,0.873,5.38,0.875c1.832-0.003,3.653-0.297,5.393-0.87l102.4-34.133c2.515-0.84,4.8-2.254,6.673-4.13 l224.802-224.802C484.25,86.023,484.253,44.657,458.742,19.142z"}))),oe=a.createElement("g",null),le=a.createElement("g",null),ue=a.createElement("g",null),de=a.createElement("g",null),be=a.createElement("g",null),je=a.createElement("g",null),Oe=a.createElement("g",null),pe=a.createElement("g",null),me=a.createElement("g",null),fe=a.createElement("g",null),he=a.createElement("g",null),ge=a.createElement("g",null),ve=a.createElement("g",null),ye=a.createElement("g",null),Ie=a.createElement("g",null);function xe(t,e){var n=t.title,r=t.titleId,s=se(t,["title","titleId"]);return a.createElement("svg",ae({viewBox:"0 0 477.873 477.873",ref:e,"aria-labelledby":r},s),n?a.createElement("title",{id:r},n):null,ce,ie,oe,le,ue,de,be,je,Oe,pe,me,fe,he,ge,ve,ye,Ie)}var we=a.forwardRef(xe),Se=(n.p,n.p+"static/media/up-arrow.927fb299.svg"),Ne=function t(e){var n=e.comment,s=e.handleShowLogin,c=Object(u.d)((function(t){return t.comments.byId})),i=(Object(u.d)((function(t){return t.comments.allId})),Object(u.d)((function(t){return t.login.isLoggedIn}))),o=Object(u.c)(),b=Object(d.i)(),j=Object(a.useState)(""),O=Object(l.a)(j,2),p=O[0],m=O[1],f=Object(a.useState)(!1),h=Object(l.a)(f,2),g=h[0],v=h[1],y=Object(a.useState)(null),I=Object(l.a)(y,2),x=(I[0],I[1],Object(a.useState)()),w=Object(l.a)(x,2);w[0],w[1];if(Object(a.useEffect)((function(){}),[]),!n)return Object(r.jsx)("div",{});var S=(n.comments||[]).map((function(e){return Object(r.jsx)(t,{comment:c[e],type:"child"},e._id)}));return Object(r.jsxs)("div",{style:{marginLeft:"15px",marginTop:"10px"},children:[Object(r.jsxs)("div",{className:"comment-vote-title-container",children:[Object(r.jsx)("div",{className:"comment-vote-container",children:Object(r.jsxs)("div",{className:"comment-vote-button-container",children:[Object(r.jsx)("img",{className:1===n.voteState?"comment-vote-button-color":"comment-vote-button",src:Se,onClick:function(){i?o(ne(1,b.id,n._id)):s()},alt:""}),Object(r.jsx)("span",{children:n.voteTotal}),Object(r.jsx)("img",{className:-1===n.voteState?"comment-vote-button-color":"comment-vote-button",src:re,onClick:function(){i?o(ne(-1,b.id,n._id)):s()}})]})}),Object(r.jsxs)("div",{className:"comment-container",children:[Object(r.jsx)("p",{className:"comment-author",children:n.authorName}),Object(r.jsx)("div",{className:"parent-comment",children:n.content}),Object(r.jsxs)("div",{className:"reply-button-container",children:[i?Object(r.jsx)("button",{onClick:function(){v(!g),o({type:N,test:{}})},className:"reply-button",children:"Reply"}):null,g?Object(r.jsxs)("div",{className:"new-comment-container",children:[Object(r.jsx)("textarea",{value:p,onChange:function(t){m(t.target.value)},placeholder:"What are your thoughts?",className:"new-comment reply-textarea",rows:"6"}),Object(r.jsx)("div",{className:"submit-comment-container",children:Object(r.jsx)("button",{onClick:function(){n.postId;var t=n._id;o(function(t,e,n){return function(r,a){return J()({url:"/api/comments/".concat(n,"/replies"),method:"POST",data:{content:t,postId:e},withCredentials:!0}).then((function(t){r(ee(t.data))}))}}(p,b.id,t)),v(!1),m("")},className:"submit-comment-button",children:"Reply"})})]}):null]})]})]}),Object(r.jsx)("div",{className:"nested-comments",children:S})]})};var Ee=Object(u.b)((function(t,e){var n=e.match.params.id;return{post:t.posts.byId[n]}}))((function(t){var e=Object(d.i)(),n=Object(u.c)(),s=Object(d.g)(),c=Object(a.useState)(""),i=Object(l.a)(c,2),o=i[0],b=i[1],j=Object(a.useState)(!1),O=Object(l.a)(j,2),p=O[0],m=O[1],f=Object(a.useState)(""),h=Object(l.a)(f,2),g=h[0],v=h[1],y=Object(u.d)((function(t){return t.currentUser._id})),I=Object(u.d)((function(t){return t.posts.allIds})),x=Object(u.d)((function(t){return{test:t.comments.byId}})),w=Object(u.d)((function(t){return t.login.isLoggedIn})),S=t.post,N=Object(u.d)((function(t){return t.listings.sortOrder})),E=function(){var t,r;n((t=o,r=e.id,function(e,n){return e({type:"NEW_COMMENT_REQUEST"}),J()({url:"/api/comment/new",method:"POST",data:{content:t,postId:r},withCredentials:!0}).then((function(t){var n=t.data;e(ee(n))}))})),b("")},P=function(t){var e,r;n((e=t,r=g,function(t,n){return t({type:L,postId:e,content:r}),J()({url:"/api/edit/".concat(e),method:"PUT",withCredentials:!0,data:{content:r}})})),m(!1)};if(Object(a.useEffect)((function(){I.includes(e.id)||n(st(e.id))}),[]),!S)return Object(r.jsx)("div",{});var C=new Date(S.createdAt),T=new Intl.DateTimeFormat("en-US",{}).format(C);return Object(r.jsx)("div",{onClick:function(){S.newPost&&n(q(e.id)),S.newPost||"default"===N?s.push("/"):(s.goBack(),document.body.style.overflow="")},className:"modal-wrapper",children:Object(r.jsx)("div",{onClick:function(t){t.stopPropagation()},className:"card-modal",children:S.author?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)("p",{className:"card-modal-author",children:[" ","u/",S.author.username]}),Object(r.jsx)("p",{children:T}),Object(r.jsx)("h4",{className:"card-modal-title",children:S.title}),y===S.author._id?Object(r.jsxs)("div",{className:"edit-container",children:[Object(r.jsx)("p",{className:"card-modal-content ".concat(p?"inactive":null," "),children:S.content}),Object(r.jsx)("textarea",{onChange:function(t){v(t.target.value)},className:p?"edit-text-area":"inactive",value:g}),Object(r.jsxs)("div",{className:p?"edit-button-container":"inactive",children:[Object(r.jsx)("button",{onClick:function(){return P(S._id)},className:"edit-submit-button",children:"Save"}),Object(r.jsx)("button",{onClick:function(){m(!1)},className:"edit-cancel-button",children:"Cancel"})]}),Object(r.jsx)("button",{className:"edit-button ".concat(p?"inactive":null),onClick:function(){m(!0)},children:Object(r.jsx)(we,{})})]}):null,Object(r.jsx)("img",{className:"post-image",src:t.post.image,alt:""}),y?Object(r.jsxs)("div",{className:"new-comment-container",children:[Object(r.jsx)("textarea",{className:"new-comment",name:"",id:"",placeholder:"What are your thoughts?",rows:"6",value:o,onChange:function(t){return b(t.target.value)}}),Object(r.jsx)("span",{className:"submit-comment-container",children:Object(r.jsx)("button",{onClick:function(){E()},className:"submit-comment-button",children:"Comment"})})]}):Object(r.jsxs)("div",{className:"no-user-comment-container",children:[Object(r.jsx)("p",{className:"no-user-comment",children:"Log in or sign up to leave a comment"}),Object(r.jsxs)("div",{className:"auth-button-container",children:[Object(r.jsx)("button",{onClick:t.handleShowLogin,children:"log in"}),Object(r.jsx)("button",{onClick:t.handleShowSignup,children:"sign up"})]})]}),Object(r.jsxs)("div",{className:"card-modal-vote-container",children:[Object(r.jsx)("li",{onClick:function(){w?n($(1,e.id)):t.handleShowLogin()},children:Object(r.jsx)("img",{className:1===S.voteState?"vote-button-color":"vote-button",src:Se,alt:""})}),Object(r.jsx)("li",{children:S.voteTotal}),Object(r.jsx)("li",{onClick:function(){w?n($(-1,e.id)):t.handleShowLogin()},children:Object(r.jsx)("img",{className:-1===S.voteState?"vote-button-color":"vote-button",src:re,alt:""})})]}),Object(r.jsx)("h4",{className:"comment-section-header",children:"Comments"}),t.post.comments.map((function(e){return Object(r.jsx)(Ne,{handleShowLogin:t.handleShowLogin,comment:x.test[e]},e)}))]}):null})})}));n(71);var Pe=Object(u.b)((function(t,e){return{loggedIn:t.login.isLoggedIn}}))((function(t){var e=t.location.search,n=new URLSearchParams(e).get("after"),s=new URLSearchParams(e).get("before"),c=Object(a.useState)(!1),i=Object(l.a)(c,2),b=i[0],j=i[1],O=Object(a.useState)(!1),p=Object(l.a)(O,2),m=p[0],f=p[1],h=Object(a.useState)(""),g=Object(l.a)(h,2),v=g[0],y=g[1],I=Object(a.useState)(""),x=Object(l.a)(I,2),w=x[0],S=x[1],N=Object(u.d)((function(t){return t.login.isLoggedIn})),E=Object(u.d)((function(t){return t.signup.isSignedUp})),P=Object(u.c)(),C=Object(u.d)((function(t){return t.posts.allIds})),T=Object(u.d)((function(t){return t.posts.byId}));C.map((function(t){return T[t]})),Object(a.useEffect)((function(){P(it()),N&&j(!1),t.location.state||(y(n),S(s)),E&&!N&&(f(!1),j(!0))}),[N,E]);var _=function(){j(!b)},L=function(){f(!m)},k=function(){P({type:z}),j(!1),f(!1)},R=function(t,e){e&&P(rt(10,t,e)).then((function(t){"completed"===t&&window.scrollTo(0,0)})),e||P(rt(10,t)).then((function(t){"completed"===t&&window.scrollTo(0,0)}))},U=function(t,e){e&&P(nt(10,t,e)).then((function(t){"completed"===t&&window.scrollTo(0,0)})),e||P(nt(10,t)).then((function(t){"completed"===t&&window.scrollTo(0,0)}))};return Object(r.jsxs)("div",{className:"app-wrapper",children:[b?Object(r.jsx)(Bt,{close:k}):null,m?Object(r.jsx)(Ht,{close:k}):null,Object(r.jsx)($t,{handleShowLogin:_,handleShowSignup:L}),Object(r.jsx)(d.b,{exact:!0,path:"/post/:id",render:function(t){return Object(r.jsx)(Ee,Object(o.a)({handleShowLogin:_,handleShowSignup:L},t))}}),Object(r.jsxs)(d.d,{children:[Object(r.jsx)(d.b,{exact:!0,path:"/new-post",render:function(t){return Object(r.jsx)(te,Object(o.a)({},t))},children:N?null:Object(r.jsx)(d.a,{to:"/"})}),Object(r.jsx)(d.b,{path:"/:sort?",render:function(e){return Object(r.jsx)(Qt,Object(o.a)(Object(o.a)({handleShowLogin:_,handleShowSignup:L,handleShowNextPage:R,handlePrevPage:U,after:v,before:w},e),{},{test:t.posts}))},showLogin:b,showSignup:m})]})]})})),Ce=n(17),Te=n(41),_e=n(42),Le=n(6),ke=n(10);function Re(t,e){var n=e.id,r=e.savedComment,a=e.postId;if(Object(o.a)({},r).parentId)return Object(o.a)({},t);var s=t.byId[a];return Object(o.a)(Object(o.a)({},t),{},{byId:Object(o.a)(Object(o.a)({},t.byId),{},Object(Le.a)({},a,Object(o.a)(Object(o.a)({},s),{},{comments:[n].concat(Object(ke.a)(t.byId[a].comments))})))})}function Ue(t,e){var n=e.postId,r=e.point,a=e.currentVoteState,s=t.byId[n];return e.commentId?t:1===a&&1===r?Object(o.a)(Object(o.a)({},t),{},{byId:Object(o.a)(Object(o.a)({},t.byId),{},Object(Le.a)({},n,Object(o.a)(Object(o.a)({},s),{},{voteState:0,voteTotal:t.byId[n].voteTotal-1})))}):0===a&&1===r?Object(o.a)(Object(o.a)({},t),{},{byId:Object(o.a)(Object(o.a)({},t.byId),{},Object(Le.a)({},n,Object(o.a)(Object(o.a)({},s),{},{voteState:1,voteTotal:t.byId[n].voteTotal+1})))}):1===a&&-1===r?Object(o.a)(Object(o.a)({},t),{},{byId:Object(o.a)(Object(o.a)({},t.byId),{},Object(Le.a)({},n,Object(o.a)(Object(o.a)({},s),{},{voteState:-1,voteTotal:t.byId[n].voteTotal-2})))}):0===a&&-1===r?Object(o.a)(Object(o.a)({},t),{},{byId:Object(o.a)(Object(o.a)({},t.byId),{},Object(Le.a)({},n,Object(o.a)(Object(o.a)({},s),{},{voteState:-1,voteTotal:t.byId[n].voteTotal-1})))}):-1===a&&-1===r?Object(o.a)(Object(o.a)({},t),{},{byId:Object(o.a)(Object(o.a)({},t.byId),{},Object(Le.a)({},n,Object(o.a)(Object(o.a)({},s),{},{voteState:0,voteTotal:t.byId[n].voteTotal+1})))}):-1===a&&1===r?Object(o.a)(Object(o.a)({},t),{},{byId:Object(o.a)(Object(o.a)({},t.byId),{},Object(Le.a)({},n,Object(o.a)(Object(o.a)({},s),{},{voteState:1,voteTotal:t.byId[n].voteTotal+2})))}):void 0}function Ge(t,e){var n=e.post,r=e.id;return Object(o.a)(Object(o.a)({},t),{},{byId:Object(o.a)(Object(o.a)({},t.byId),{},Object(Le.a)({},r,n)),allIds:[].concat(Object(ke.a)(t.allIds),[r]),submitting:!1,createdPosts:Object(o.a)(Object(o.a)({},t.createdPosts),{},Object(Le.a)({},r,n)),submitted:!0,reRouteId:r})}function Ae(t,e){var n=e.postId,r=e.content,a=t.byId[n];return Object(o.a)(Object(o.a)({},t),{},{byId:Object(o.a)(Object(o.a)({},t.byId),{},Object(Le.a)({},n,Object(o.a)(Object(o.a)({},a),{},{content:r})))})}function De(t,e){e.newPosts;for(var n=e.currentPosts,r=e.idsofNewData,a=Object.keys(e.currentPosts),s=e.newPostsArray,c=e.arrayOfCurrentPosts,i={},l=[],u=0;u<s.length;u++)a.includes(r[u])?n[r[u]]=s[u]:l.push(s[u]);c=(c=a.map((function(t){return n[t]}))).concat(l);for(var d=0;d<c.length;d++)i[c[d]._id]=c[d];var b=c.map((function(t){return t._id}));return Object(o.a)(Object(o.a)({},t),{},{isFetching:!1,byId:Object(o.a)({},i),allIds:Object(ke.a)(b),status:"succeeded",firstId:s[0]._id,lastId:s[s.length-1]._id})}function Fe(t,e){e.newPosts;for(var n=e.currentPosts,r=e.idsofNewData,a=Object.keys(e.currentPosts),s=e.newPostsArray,c=e.arrayOfCurrentPosts,i={},l=[],u=0;u<s.length;u++)a.includes(r[u])?n[r[u]]=s[u]:l.push(s[u]);c=(c=a.map((function(t){return n[t]}))).concat(l);for(var d=0;d<c.length;d++)i[c[d]._id]=c[d];var b=c.map((function(t){return t._id}));return Object(o.a)(Object(o.a)({},t),{},{isFetching:!1,byId:Object(o.a)({},i),allIds:Object(ke.a)(b),status:"succeeded",firstId:s[0]._id,lastId:s[s.length-1]._id})}function Me(t,e){e.newPosts;for(var n=e.currentPosts,r=e.idsofNewData,a=Object.keys(e.currentPosts),s=e.newPostsArray,c=e.arrayOfCurrentPosts,i={},l=[],u=0;u<s.length;u++)a.includes(r[u])?n[r[u]]=s[u]:l.push(s[u]);c=(c=a.map((function(t){return n[t]}))).concat(l);for(var d=0;d<c.length;d++)i[c[d]._id]=c[d];var b=c.map((function(t){return t._id}));return Object(o.a)(Object(o.a)({},t),{},{isFetching:!1,byId:Object(o.a)({},i),allIds:Object(ke.a)(b),status:"succeeded",firstId:s[0]._id,lastId:s[s.length-1]._id})}function ze(t,e){return e.sort?Object(o.a)(Object(o.a)({},t),{},{sortOrder:e.sort,listingOrder:Object(o.a)(Object(o.a)({},t.listingOrder),{},Object(Le.a)({},e.sort,e.data.result))}):e.sort?void 0:Object(o.a)(Object(o.a)({},t),{},{sortOrder:"default",listingOrder:Object(o.a)(Object(o.a)({},t.listingOrder),{},Object(Le.a)({},"default",e.data.result))})}function Ve(t,e){var n=e.newPosts,r=e.currentPosts,a=e.idsofNewData,s=(Object.keys(e.currentPosts),e.newPostsArray,e.arrayOfCurrentPosts,t.listingOrder[e.sort]?Object(ke.a)(t.listingOrder[e.sort]):null),c=t.listingOrder.default?Object(ke.a)(t.listingOrder.default):null;if(e.sort){for(var i=0;i<a.length;i++)t.listingOrder[e.sort].includes(a[i])?r[a[i]]=n[a[i]]:s.push(a[i]);return Object(o.a)(Object(o.a)({},t),{},{listingOrder:Object(o.a)(Object(o.a)({},t.listingOrder),{},Object(Le.a)({},e.sort,Object(ke.a)(s)))})}if(!e.sort){for(var l=0;l<a.length;l++)t.listingOrder.default.includes(a[l])?r[a[l]]=n[a[l]]:c.push(a[l]);return Object(o.a)(Object(o.a)({},t),{},{listingOrder:Object(o.a)(Object(o.a)({},t.listingOrder),{},Object(Le.a)({},"default",Object(ke.a)(c)))})}}function We(t,e){var n=e.newPosts,r=e.currentPosts,a=e.idsofNewData,s=(Object.keys(e.currentPosts),e.newPostsArray,e.arrayOfCurrentPosts,[]),c=t.listingOrder[e.sort]?Object(ke.a)(t.listingOrder[e.sort]):null,i=t.listingOrder.default?Object(ke.a)(t.listingOrder.default):null;if(e.sort){for(var l=0;l<a.length;l++)t.listingOrder[e.sort].includes(a[l])?r[a[l]]=n[a[l]]:s.push(a[l]);return c=s.concat(c),Object(o.a)(Object(o.a)({},t),{},{listingOrder:Object(o.a)(Object(o.a)({},t.listingOrder),{},Object(Le.a)({},e.sort,Object(ke.a)(c)))})}if(!e.sort){for(var u=0;u<a.length;u++)t.listingOrder.default.includes(a[u])?r[a[u]]=n[a[u]]:i.push(a[u]);return Object(o.a)(Object(o.a)({},t),{},{listingOrder:Object(o.a)(Object(o.a)({},t.listingOrder),{},Object(Le.a)({},"default",Object(ke.a)(i)))})}}function Be(t,e){var n=e.arrayOfNewIds.indexOf(t.allIds),r=e.arrayOfNewIds;return e.arrayOfNewIds.includes(e.data.result)?(r.splice(n,1),r):e.data.result}function He(t,e){var n=e.post;return Object(o.a)(Object(o.a)({},t),{},{post:n})}function Qe(t,e){var n=e.data.entities.comments;return n?Object.keys(n):[]}function Je(t,e){var n=e.id,r=e.savedComment,a=Object(o.a)({},r);if(a.parentId){var s=r.parentId;t.byId[s];return Object(o.a)(Object(o.a)({},t),{},{byId:Object(o.a)(Object(o.a)(Object(Le.a)({},n,a),t.byId),{},Object(Le.a)({},s,Object(o.a)(Object(o.a)({},t.byId[s]),{},{comments:[n].concat(Object(ke.a)(t.byId[s].comments))}))),allId:[n].concat(Object(ke.a)(t.allId))})}return Object(o.a)(Object(o.a)({},t),{},{byId:Object(o.a)(Object(o.a)({},t.byId),{},Object(Le.a)({},n,a)),allId:[n].concat(Object(ke.a)(t.allId))})}function Ye(t,e){if(!e.commentId)return t;var n=e.commentId,r=e.point,a=e.currentVoteState,s=t.byId[n];return 1===a&&1===r?Object(o.a)(Object(o.a)({},t),{},{byId:Object(o.a)(Object(o.a)({},t.byId),{},Object(Le.a)({},n,Object(o.a)(Object(o.a)({},s),{},{voteState:0,voteTotal:t.byId[n].voteTotal-1})))}):0===a&&1===r?Object(o.a)(Object(o.a)({},t),{},{byId:Object(o.a)(Object(o.a)({},t.byId),{},Object(Le.a)({},n,Object(o.a)(Object(o.a)({},s),{},{voteState:1,voteTotal:t.byId[n].voteTotal+1})))}):1===a&&-1===r?Object(o.a)(Object(o.a)({},t),{},{byId:Object(o.a)(Object(o.a)({},t.byId),{},Object(Le.a)({},n,Object(o.a)(Object(o.a)({},s),{},{voteState:-1,voteTotal:t.byId[n].voteTotal-2})))}):0===a&&-1===r?Object(o.a)(Object(o.a)({},t),{},{byId:Object(o.a)(Object(o.a)({},t.byId),{},Object(Le.a)({},n,Object(o.a)(Object(o.a)({},s),{},{voteState:-1,voteTotal:t.byId[n].voteTotal-1})))}):-1===a&&-1===r?Object(o.a)(Object(o.a)({},t),{},{byId:Object(o.a)(Object(o.a)({},t.byId),{},Object(Le.a)({},n,Object(o.a)(Object(o.a)({},s),{},{voteState:0,voteTotal:t.byId[n].voteTotal+1})))}):-1===a&&1===r?Object(o.a)(Object(o.a)({},t),{},{byId:Object(o.a)(Object(o.a)({},t.byId),{},Object(Le.a)({},n,Object(o.a)(Object(o.a)({},s),{},{voteState:1,voteTotal:t.byId[n].voteTotal+2})))}):void 0}var qe=Object(Ce.combineReducers)({comments:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{byId:{},allId:[]},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case j:return Object.assign({},t,{byId:e.data.entities.comments,allId:Qe(0,e)});case E:return Object.assign({},t,{byId:Object(o.a)(Object(o.a)({},t.byId),e.temp),allId:[].concat(Object(ke.a)(t.allId),[e.newid])});case P:return Ye(t,e);case S:return Je(t,e);case N:return Object.assign({},t,{});default:return t}},currentModal:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{post:{}},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case U:return He(t,e);case x:return Object.assign({},t,{post:e.post});default:return t}},changeNewSubmissionType:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{submissionType:""},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case I:return Object.assign({},t,{submissionType:e.postType});default:return t}},posts:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isFetching:!1,byId:{},allIds:[],submitted:!1,err:null,createdPosts:{},submitting:!1,reRouteId:null,status:"idle",firstId:"",lastId:""},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case M:return Me(t,e);case T:return De(t,e);case C:return Fe(t,e);case b:return Object.assign({},t,{isFetching:!0,status:"loading"});case G:return Object.assign({},t,{byId:e.newObj,allIds:e.splicedArray,createdPosts:{}});case O:return Object.assign({},t,{byId:Object(o.a)(Object(o.a)({},t.byId),e.temp),allIds:[].concat(Object(ke.a)(t.allIds),[e.id])});case j:return Object(o.a)(Object(o.a)({},t),{},{isFetching:!1,status:"succeeded",byId:Object(o.a)(Object(o.a)(Object(o.a)({},t.byId),e.data.entities.posts),t.createdPosts),allIds:Be(t,e),firstId:e.data.result[0],lastId:e.data.result[e.data.result.length-1]});case P:return Ue(t,e);case _:return Object.assign({},t,{});case S:return Re(t,e);case w:return Object.assign({},t,{submitted:!1,submitting:!0,reRouteId:""});case L:return Ae(t,e);case x:return Ge(t,e);default:return t}},pageNumber:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{currentPage:0,first_id:"",last_id:""},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case D:return Object.assign({},t,{first_id:e.before,last_id:e.after});case C:return Object.assign({},t,{currentPage:t.currentPage+1});case T:return Object.assign({},t,{currentPage:t.currentPage-1});default:return t}},login:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoggingIn:!1,isLoggedIn:!1,err:null},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case F:return Object.assign({},t,{err:"Username or Password do not match"});case z:return Object.assign({},t,{err:null});case p:return Object.assign({},t,{isLoggingIn:!0,isLoggedIn:!1});case m:return Object.assign({},t,{isLoggingIn:!1,isLoggedIn:!0});case k:return Object.assign({},t,Object(Le.a)({isLoggingIn:!1},"isLoggingIn",!1));case f:return Object.assign({},t,{isLoggingIn:!1,isLoggedIn:!1});case y:return Object.assign({},t,{isLoggedIn:!0,currentUser:e.user});default:return t}},signup:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isSigningUp:!1,isSignedUp:!1,err:null,passwordError:null},e=arguments.length>1?arguments[1]:void 0,n=e.passwordError;switch(e.type){case h:return Object.assign({},t,{err:null,passwordError:null});case g:return Object.assign({},t,{isSignedUp:!0,isSigningUp:!1,err:null,passwordError:null});case R:return Object.assign({},t,{err:null});case v:return Object.assign({},t,{err:e.error,passwordError:n});default:return t}},currentUser:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{username:"",_id:"",err:null},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case k:return Object.assign({},t,{username:"",_id:""});case A:return Object.assign({},t,{username:e.userInfo.username,_id:e.userInfo._id});case m:return Object.assign({},t,{username:e.username,_id:e.id});case y:return Object.assign({},t,{isLoggedIn:!0,username:e.user.username,_id:e.user._id});default:return t}},listings:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{sortOrder:"",listingOrder:{}},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case M:return Object.assign({},t,{sortOrder:e.sortType,listingOrder:Object(o.a)(Object(o.a)({},t.listingOrder),{},Object(Le.a)({},e.sortType,e.idsofNewData))});case T:return We(t,e);case C:return Ve(t,e);case j:return ze(t,e);default:return t}}}),Xe=function(t){try{var e=JSON.stringify(t);localStorage.setItem("state",e)}catch(n){}};n(72);var Ze=n(13),Ke=function(t){var e=function(){try{var t=localStorage.getItem("state");if(null===t)return;return JSON.parse(t)}catch(e){return}}(),n=Object(_e.composeWithDevTools)({trace:!0});return Object(Ce.createStore)(qe,e,n(Object(Ce.applyMiddleware)(Te.a)))}();Ke.subscribe((function(){Xe(Ke.getState().currentUser),Xe(Ke.getState().login)}));var $e=Object(Ze.a)();i.a.render(Object(r.jsx)(s.a.StrictMode,{children:Object(r.jsx)(u.a,{store:Ke,children:Object(r.jsxs)(d.c,{history:$e,children:[Object(r.jsx)(d.d,{}),Object(r.jsx)(d.b,{component:Pe})]})})}),document.getElementById("root"))}},[[73,1,2]]]);
//# sourceMappingURL=main.63268d2e.chunk.js.map